import{s as We,l as Ue,i as B,n as we,d as p,B as tn,q as gn,e as z,t as Ce,k as x,ai as Mi,c as N,a as C,b as De,o as $,aj as Ti,f as m,g as E,h as Ne,P as Qn,I as ft,u as ke,E as Ve,F as ze,y as je,A as Ge,j as ce,p as Lt,D as Qe,r as Kt,v as Gt,w as qt,x as Jt,Q as Sn,H as en,S as Xn,N as $n,z as Vi,C as In,ao as ot,U as Wt,V as kt,W as Pn,Y as hn,K as $t,$ as de,T as et,a1 as Ml,ap as to,ah as zi,_ as no,aq as _t,a2 as wl,al as za,ar as Na,am as Pa,J as ts,an as ns,R as ls,O as Zl,m as Oa}from"./scheduler.BXITcVIL.js";import{S as Ae,i as Le,t as S,g as Oe,a as P,c as He,j as os,f as qe,b as ee,d as oe,m as te,e as ne,h as Xl}from"./index.CKC1pLeO.js";import{g as Ni}from"./globals.D0QH3NT1.js";import{e as wt,u as ho,o as mo}from"./each.CeC5znru.js";import{t as nt}from"./Toaster.svelte_svelte_type_style_lang.D8ruyfxE.js";import{C as Ha,D as Ba,F as Aa,a as Pi,b as La,P as Ra}from"./FilesOverlay.BBIZ_1l3.js";import{g as Co}from"./entry.B71ECrEP.js";import{p as Ua}from"./stores.CTYjQQ_n.js";import{t as il,u as Kn,e as Al,h as Ll,p as Oi,n as Hi,m as cl,k as jn,c as Tl,b as Wa,S as ss,T as wn,G as At,l as go,V as Fn,F as Rn,W as Bi,g as rl,s as Lo,E as ja,f as rs,y as Fa,z as ol,r as Ya,J as Kl,H as Za,B as sl,q as Xa}from"./index.DGiyb8ll.js";import{a as Ka,A as Ga,B as qa,C as Ja,D as Qa,E as xa,F as $l,G as is,v as Jn,m as Ai,r as $a,b as lo,H as ec,l as Zo,f as oo,I as tc,J as nc,d as lc,t as Do}from"./index.CaHcOjnl.js";import{f as Ro,i as ml,C as oc,u as Mo,d as sc,a as rc}from"./index.CsC5nGr8.js";import{g as ic}from"./index.CyvP7FPD.js";import{p as ac,h as cc}from"./index.CBI9WEyd.js";import{M as uc,a as fc,b as dc,T as hc,S as mc,P as gc,q as _c}from"./index.BsHuebVy.js";import{h as pc,i as as,j as bc}from"./index.I0UnpWOX.js";import{q as vc,r as wc,s as yc,t as kc,v as Ec,w as Ic}from"./index.DppQFxdV.js";import{g as Xo,j as Sc,k as Cc,l as Dc}from"./index.dM6VPaKA.js";import{f as gl}from"./index.tP7o4U0v.js";import{m as yl,p as cs}from"./marked.esm._0_gBwjO.js";import{t as Li,s as Mc}from"./index.DZ2HRC5r.js";import{u as Tc,b as Vc}from"./index.BGJmrFQt.js";import{T as Xt}from"./Tooltip.Bk1C4ypY.js";import"./updater.DQM2zBRb.js";import{D as _o,M as mn}from"./Dropdown.B45Ky_zR.js";import{b as po}from"./menu-trigger.CKZC45Md.js";import{f as Rl}from"./index.BFuekP1B.js";import{S as Ko}from"./Switch._GFX78Ig.js";import{W as zc}from"./WrenchSolid.C9GKHMyQ.js";import{V as Nc,R as Pc}from"./RichTextInput.Dr52WG8J.js";import{F as Ri}from"./FileItem.CACyhZZd.js";import{g as Oc}from"./index.DMCxP63e.js";import{g as Hc}from"./index.DNI-C03L.js";import{F as Ui}from"./fuse.CU2r43ac.js";import{d as Bc,r as Ac}from"./relativeTime.BDz4fsXT.js";import{S as Go}from"./Spinner.Ds4ZYjMW.js";import{X as bo}from"./XMark.DBrT1hqs.js";import"./index.DQfRr7yB.js";import{h as zn,ba as Wi,bb as qo,bc as To,bd as Vo,ah as Lc,be as Rc,bf as Uc,af as ji,bg as Wc}from"./Markdown.BbZedqzQ.js";import{S as jc,E as Fc,M as Yc}from"./Messages.DPfe3uBN.js";import{S as Zc}from"./Selector.DMDZlS7v.js";import{f as Xc}from"./FileSaver.min.CimDdHIv.js";import{a as Kc}from"./index.-d1fEAWE.js";import{U as Gc}from"./UserMenu.CrdK-gvS.js";import{M as qc}from"./MenuLines.DtYjeyBF.js";import{M as Jc}from"./Modal.DzDM0HzR.js";import{A as Qc}from"./AdvancedParams.DFF5U3ct.js";import{g as xc,j as $c,k as eu,l as tu}from"./index.CcIIQ0GZ.js";import{V as nu,H as lu}from"./Heart.pCekG9wf.js";import{C as eo}from"./Collapsible.CJfsRPy2.js";import{D as ou}from"./Drawer.CwtfKR7C.js";import{w as xe,a as Vn,d as pl}from"./index.CMgO2_ru.js";import{g as xn,a as Vl}from"./spread.CgU5AtxT.js";import{E as su}from"./EllipsisVertical.DnVr1aAq.js";import{C as ru}from"./ConfirmDialog.D3WfRuej.js";function iu(l){let e;for(;e=l.sourceEvent;)l=e;return l}function Ln(l,e){if(l=iu(l),e===void 0&&(e=l.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var n=t.createSVGPoint();return n.x=l.clientX,n.y=l.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[l.clientX-o.left-e.clientLeft,l.clientY-o.top-e.clientTop]}}return[l.pageX,l.pageY]}const au={passive:!1},zl={capture:!0,passive:!1};function zo(l){l.stopImmediatePropagation()}function bl(l){l.preventDefault(),l.stopImmediatePropagation()}function Fi(l){var e=l.document.documentElement,t=zn(l).on("dragstart.drag",bl,zl);"onselectstart"in e?t.on("selectstart.drag",bl,zl):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Yi(l,e){var t=l.document.documentElement,n=zn(l).on("dragstart.drag",null);e&&(n.on("click.drag",bl,zl),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in t?n.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const Gl=l=>()=>l;function Uo(l,{sourceEvent:e,subject:t,target:n,identifier:o,active:s,x:i,y:r,dx:a,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:r,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}Uo.prototype.on=function(){var l=this._.on.apply(this._,arguments);return l===this._?this:l};function cu(l){return!l.ctrlKey&&!l.button}function uu(){return this.parentNode}function fu(l,e){return e??{x:l.x,y:l.y}}function du(){return navigator.maxTouchPoints||"ontouchstart"in this}function hu(){var l=cu,e=uu,t=fu,n=du,o={},s=Wi("start","drag","end"),i=0,r,a,c,u,f=0;function h(k){k.on("mousedown.drag",d).filter(n).on("touchstart.drag",v).on("touchmove.drag",g,au).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(k,I){if(!(u||!l.call(this,k,I))){var V=y(this,e.call(this,k,I),k,I,"mouse");V&&(zn(k.view).on("mousemove.drag",_,zl).on("mouseup.drag",b,zl),Fi(k.view),zo(k),c=!1,r=k.clientX,a=k.clientY,V("start",k))}}function _(k){if(bl(k),!c){var I=k.clientX-r,V=k.clientY-a;c=I*I+V*V>f}o.mouse("drag",k)}function b(k){zn(k.view).on("mousemove.drag mouseup.drag",null),Yi(k.view,c),bl(k),o.mouse("end",k)}function v(k,I){if(l.call(this,k,I)){var V=k.changedTouches,T=e.call(this,k,I),L=V.length,O,H;for(O=0;O<L;++O)(H=y(this,T,k,I,V[O].identifier,V[O]))&&(zo(k),H("start",k,V[O]))}}function g(k){var I=k.changedTouches,V=I.length,T,L;for(T=0;T<V;++T)(L=o[I[T].identifier])&&(bl(k),L("drag",k,I[T]))}function w(k){var I=k.changedTouches,V=I.length,T,L;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),T=0;T<V;++T)(L=o[I[T].identifier])&&(zo(k),L("end",k,I[T]))}function y(k,I,V,T,L,O){var H=s.copy(),F=Ln(O||V,I),Y,G,D;if((D=t.call(k,new Uo("beforestart",{sourceEvent:V,target:h,identifier:L,active:i,x:F[0],y:F[1],dx:0,dy:0,dispatch:H}),T))!=null)return Y=D.x-F[0]||0,G=D.y-F[1]||0,function K(M,W,j){var Z=F,A;switch(M){case"start":o[L]=K,A=i++;break;case"end":delete o[L],--i;case"drag":F=Ln(j||W,I),A=i;break}H.call(M,k,new Uo(M,{sourceEvent:W,subject:D,target:h,identifier:L,active:A,x:F[0]+Y,y:F[1]+G,dx:F[0]-Z[0],dy:F[1]-Z[1],dispatch:H}),T)}}return h.filter=function(k){return arguments.length?(l=typeof k=="function"?k:Gl(!!k),h):l},h.container=function(k){return arguments.length?(e=typeof k=="function"?k:Gl(k),h):e},h.subject=function(k){return arguments.length?(t=typeof k=="function"?k:Gl(k),h):t},h.touchable=function(k){return arguments.length?(n=typeof k=="function"?k:Gl(!!k),h):n},h.on=function(){var k=s.on.apply(s,arguments);return k===s?h:k},h.clickDistance=function(k){return arguments.length?(f=(k=+k)*k,h):Math.sqrt(f)},h}var mu=1e-12;function us(l){return((l=Math.exp(l))+1/l)/2}function gu(l){return((l=Math.exp(l))-1/l)/2}function _u(l){return((l=Math.exp(2*l))-1)/(l+1)}const pu=function l(e,t,n){function o(s,i){var r=s[0],a=s[1],c=s[2],u=i[0],f=i[1],h=i[2],d=u-r,_=f-a,b=d*d+_*_,v,g;if(b<mu)g=Math.log(h/c)/e,v=function(T){return[r+T*d,a+T*_,c*Math.exp(e*T*g)]};else{var w=Math.sqrt(b),y=(h*h-c*c+n*b)/(2*c*t*w),k=(h*h-c*c-n*b)/(2*h*t*w),I=Math.log(Math.sqrt(y*y+1)-y),V=Math.log(Math.sqrt(k*k+1)-k);g=(V-I)/e,v=function(T){var L=T*g,O=us(I),H=c/(t*w)*(O*_u(e*L+I)-gu(I));return[r+H*d,a+H*_,c*O/us(e*L+I)]}}return v.duration=g*1e3*e/Math.SQRT2,v}return o.rho=function(s){var i=Math.max(.001,+s),r=i*i,a=r*r;return l(i,r,a)},o}(Math.SQRT2,2,4),ql=l=>()=>l;function bu(l,{sourceEvent:e,target:t,transform:n,dispatch:o}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:o}})}function No(l){l.stopImmediatePropagation()}function Dl(l){l.preventDefault(),l.stopImmediatePropagation()}function vu(l){return(!l.ctrlKey||l.type==="wheel")&&!l.button}function wu(){var l=this;return l instanceof SVGElement?(l=l.ownerSVGElement||l,l.hasAttribute("viewBox")?(l=l.viewBox.baseVal,[[l.x,l.y],[l.x+l.width,l.y+l.height]]):[[0,0],[l.width.baseVal.value,l.height.baseVal.value]]):[[0,0],[l.clientWidth,l.clientHeight]]}function fs(){return this.__zoom||qo}function yu(l){return-l.deltaY*(l.deltaMode===1?.05:l.deltaMode?1:.002)*(l.ctrlKey?10:1)}function ku(){return navigator.maxTouchPoints||"ontouchstart"in this}function Eu(l,e,t){var n=l.invertX(e[0][0])-t[0][0],o=l.invertX(e[1][0])-t[1][0],s=l.invertY(e[0][1])-t[0][1],i=l.invertY(e[1][1])-t[1][1];return l.translate(o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Iu(){var l=vu,e=wu,t=Eu,n=yu,o=ku,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],r=250,a=pu,c=Wi("start","zoom","end"),u,f,h,d=500,_=150,b=0,v=10;function g(D){D.property("__zoom",fs).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",H).filter(o).on("touchstart.zoom",F).on("touchmove.zoom",Y).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(D,K,M,W){var j=D.selection?D.selection():D;j.property("__zoom",fs),D!==j?I(D,K,M,W):j.interrupt().each(function(){V(this,arguments).event(W).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},g.scaleBy=function(D,K,M,W){g.scaleTo(D,function(){var j=this.__zoom.k,Z=typeof K=="function"?K.apply(this,arguments):K;return j*Z},M,W)},g.scaleTo=function(D,K,M,W){g.transform(D,function(){var j=e.apply(this,arguments),Z=this.__zoom,A=M==null?k(j):typeof M=="function"?M.apply(this,arguments):M,X=Z.invert(A),q=typeof K=="function"?K.apply(this,arguments):K;return t(y(w(Z,q),A,X),j,i)},M,W)},g.translateBy=function(D,K,M,W){g.transform(D,function(){return t(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof M=="function"?M.apply(this,arguments):M),e.apply(this,arguments),i)},null,W)},g.translateTo=function(D,K,M,W,j){g.transform(D,function(){var Z=e.apply(this,arguments),A=this.__zoom,X=W==null?k(Z):typeof W=="function"?W.apply(this,arguments):W;return t(qo.translate(X[0],X[1]).scale(A.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof M=="function"?-M.apply(this,arguments):-M),Z,i)},W,j)};function w(D,K){return K=Math.max(s[0],Math.min(s[1],K)),K===D.k?D:new To(K,D.x,D.y)}function y(D,K,M){var W=K[0]-M[0]*D.k,j=K[1]-M[1]*D.k;return W===D.x&&j===D.y?D:new To(D.k,W,j)}function k(D){return[(+D[0][0]+ +D[1][0])/2,(+D[0][1]+ +D[1][1])/2]}function I(D,K,M,W){D.on("start.zoom",function(){V(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){V(this,arguments).event(W).end()}).tween("zoom",function(){var j=this,Z=arguments,A=V(j,Z).event(W),X=e.apply(j,Z),q=M==null?k(X):typeof M=="function"?M.apply(j,Z):M,se=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),J=j.__zoom,me=typeof K=="function"?K.apply(j,Z):K,_e=a(J.invert(q).concat(se/J.k),me.invert(q).concat(se/me.k));return function(ie){if(ie===1)ie=me;else{var le=_e(ie),Pe=se/le[2];ie=new To(Pe,q[0]-le[0]*Pe,q[1]-le[1]*Pe)}A.zoom(null,ie)}})}function V(D,K,M){return!M&&D.__zooming||new T(D,K)}function T(D,K){this.that=D,this.args=K,this.active=0,this.sourceEvent=null,this.extent=e.apply(D,K),this.taps=0}T.prototype={event:function(D){return D&&(this.sourceEvent=D),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(D,K){return this.mouse&&D!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&D!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&D!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(D){var K=zn(this.that).datum();c.call(D,this.that,new bu(D,{sourceEvent:this.sourceEvent,target:g,type:D,transform:this.that.__zoom,dispatch:c}),K)}};function L(D,...K){if(!l.apply(this,arguments))return;var M=V(this,K).event(D),W=this.__zoom,j=Math.max(s[0],Math.min(s[1],W.k*Math.pow(2,n.apply(this,arguments)))),Z=Ln(D);if(M.wheel)(M.mouse[0][0]!==Z[0]||M.mouse[0][1]!==Z[1])&&(M.mouse[1]=W.invert(M.mouse[0]=Z)),clearTimeout(M.wheel);else{if(W.k===j)return;M.mouse=[Z,W.invert(Z)],Vo(this),M.start()}Dl(D),M.wheel=setTimeout(A,_),M.zoom("mouse",t(y(w(W,j),M.mouse[0],M.mouse[1]),M.extent,i));function A(){M.wheel=null,M.end()}}function O(D,...K){if(h||!l.apply(this,arguments))return;var M=D.currentTarget,W=V(this,K,!0).event(D),j=zn(D.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",se,!0),Z=Ln(D,M),A=D.clientX,X=D.clientY;Fi(D.view),No(D),W.mouse=[Z,this.__zoom.invert(Z)],Vo(this),W.start();function q(J){if(Dl(J),!W.moved){var me=J.clientX-A,_e=J.clientY-X;W.moved=me*me+_e*_e>b}W.event(J).zoom("mouse",t(y(W.that.__zoom,W.mouse[0]=Ln(J,M),W.mouse[1]),W.extent,i))}function se(J){j.on("mousemove.zoom mouseup.zoom",null),Yi(J.view,W.moved),Dl(J),W.event(J).end()}}function H(D,...K){if(l.apply(this,arguments)){var M=this.__zoom,W=Ln(D.changedTouches?D.changedTouches[0]:D,this),j=M.invert(W),Z=M.k*(D.shiftKey?.5:2),A=t(y(w(M,Z),W,j),e.apply(this,K),i);Dl(D),r>0?zn(this).transition().duration(r).call(I,A,W,D):zn(this).call(g.transform,A,W,D)}}function F(D,...K){if(l.apply(this,arguments)){var M=D.touches,W=M.length,j=V(this,K,D.changedTouches.length===W).event(D),Z,A,X,q;for(No(D),A=0;A<W;++A)X=M[A],q=Ln(X,this),q=[q,this.__zoom.invert(q),X.identifier],j.touch0?!j.touch1&&j.touch0[2]!==q[2]&&(j.touch1=q,j.taps=0):(j.touch0=q,Z=!0,j.taps=1+!!u);u&&(u=clearTimeout(u)),Z&&(j.taps<2&&(f=q[0],u=setTimeout(function(){u=null},d)),Vo(this),j.start())}}function Y(D,...K){if(this.__zooming){var M=V(this,K).event(D),W=D.changedTouches,j=W.length,Z,A,X,q;for(Dl(D),Z=0;Z<j;++Z)A=W[Z],X=Ln(A,this),M.touch0&&M.touch0[2]===A.identifier?M.touch0[0]=X:M.touch1&&M.touch1[2]===A.identifier&&(M.touch1[0]=X);if(A=M.that.__zoom,M.touch1){var se=M.touch0[0],J=M.touch0[1],me=M.touch1[0],_e=M.touch1[1],ie=(ie=me[0]-se[0])*ie+(ie=me[1]-se[1])*ie,le=(le=_e[0]-J[0])*le+(le=_e[1]-J[1])*le;A=w(A,Math.sqrt(ie/le)),X=[(se[0]+me[0])/2,(se[1]+me[1])/2],q=[(J[0]+_e[0])/2,(J[1]+_e[1])/2]}else if(M.touch0)X=M.touch0[0],q=M.touch0[1];else return;M.zoom("touch",t(y(A,X,q),M.extent,i))}}function G(D,...K){if(this.__zooming){var M=V(this,K).event(D),W=D.changedTouches,j=W.length,Z,A;for(No(D),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),Z=0;Z<j;++Z)A=W[Z],M.touch0&&M.touch0[2]===A.identifier?delete M.touch0:M.touch1&&M.touch1[2]===A.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(A=Ln(A,this),Math.hypot(f[0]-A[0],f[1]-A[1])<v)){var X=zn(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return g.wheelDelta=function(D){return arguments.length?(n=typeof D=="function"?D:ql(+D),g):n},g.filter=function(D){return arguments.length?(l=typeof D=="function"?D:ql(!!D),g):l},g.touchable=function(D){return arguments.length?(o=typeof D=="function"?D:ql(!!D),g):o},g.extent=function(D){return arguments.length?(e=typeof D=="function"?D:ql([[+D[0][0],+D[0][1]],[+D[1][0],+D[1][1]]]),g):e},g.scaleExtent=function(D){return arguments.length?(s[0]=+D[0],s[1]=+D[1],g):[s[0],s[1]]},g.translateExtent=function(D){return arguments.length?(i[0][0]=+D[0][0],i[1][0]=+D[1][0],i[0][1]=+D[0][1],i[1][1]=+D[1][1],g):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},g.constrain=function(D){return arguments.length?(t=D,g):t},g.duration=function(D){return arguments.length?(r=+D,g):r},g.interpolate=function(D){return arguments.length?(a=D,g):a},g.on=function(){var D=c.on.apply(c,arguments);return D===c?g:D},g.clickDistance=function(D){return arguments.length?(b=(D=+D)*D,g):Math.sqrt(b)},g.tapDistance=function(D){return arguments.length?(v=+D,g):v},g}function Su(l){let e,t,n,o,s,i,r;return a(),{feed:c,reset:a};function a(){e=!0,t="",n=0,o=-1,s=void 0,i=void 0,r=""}function c(f){t=t?t+f:f,e&&Cu(t)&&(t=t.slice(Zi.length)),e=!1;const h=t.length;let d=0,_=!1;for(;d<h;){_&&(t[d]===`
`&&++d,_=!1);let b=-1,v=o,g;for(let w=n;b<0&&w<h;++w)g=t[w],g===":"&&v<0?v=w-d:g==="\r"?(_=!0,b=w-d):g===`
`&&(b=w-d);if(b<0){n=h-d,o=v;break}else n=0,o=-1;u(t,d,v,b),d+=b+1}d===h?t="":d>0&&(t=t.slice(d))}function u(f,h,d,_){if(_===0){r.length>0&&(l({type:"event",id:s,event:i||void 0,data:r.slice(0,-1)}),r="",s=void 0),i=void 0;return}const b=d<0,v=f.slice(h,h+(b?_:d));let g=0;b?g=_:f[h+d+1]===" "?g=d+2:g=d+1;const w=h+g,y=_-g,k=f.slice(w,w+y).toString();if(v==="data")r+=k?"".concat(k,`
`):`
`;else if(v==="event")i=k;else if(v==="id"&&!k.includes("\0"))s=k;else if(v==="retry"){const I=parseInt(k,10);Number.isNaN(I)||l({type:"reconnect-interval",value:I})}}}const Zi=[239,187,191];function Cu(l){return Zi.every((e,t)=>l.charCodeAt(t)===e)}class Du extends TransformStream{constructor(){let e;super({start(t){e=Su(n=>{n.type==="event"&&t.enqueue(n)})},transform(t){e.feed(t)}})}}async function Mu(l,e){const t=l.pipeThrough(new TextDecoderStream).pipeThrough(new Du).getReader();let n=Tu(t);return e&&(n=Vu(n)),n}async function*Tu(l){var e,t,n;for(;;){const{value:o,done:s}=await l.read();if(s){yield{done:!0,value:""};break}if(!o)continue;const i=o.data;if(i.startsWith("[DONE]")){yield{done:!0,value:""};break}try{const r=JSON.parse(i);if(console.log(r),r.error){yield{done:!0,value:"",error:r.error};break}if(r.sources){yield{done:!1,value:"",sources:r.sources};continue}if(r.selected_model_id){yield{done:!1,value:"",selectedModelId:r.selected_model_id};continue}if(r.usage){yield{done:!1,value:"",usage:r.usage};continue}yield{done:!1,value:((n=(t=(e=r.choices)==null?void 0:e[0])==null?void 0:t.delta)==null?void 0:n.content)??""}}catch(r){console.error("Error extracting delta from SSE event:",r)}}}async function*Vu(l){for await(const e of l){if(e.done){yield e;return}if(e.error){yield e;continue}if(e.sources){yield e;continue}if(e.selectedModelId){yield e;continue}if(e.usage){yield e;continue}let t=e.value;if(t.length<5){yield{done:!1,value:t};continue}for(;t!="";){const n=Math.min(Math.floor(Math.random()*3)+1,t.length);yield{done:!1,value:t.slice(0,n)},(document==null?void 0:document.visibilityState)!=="hidden"&&await zu(5),t=t.slice(n)}}}const zu=l=>new Promise(e=>setTimeout(e,l));function ds(l){let e,t=l[2]&&hs(l);return{c(){t&&t.c(),e=Ue()},l(n){t&&t.l(n),e=Ue()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,o){n[2]?t?(t.p(n,o),o&4&&S(t,1)):(t=hs(n),t.c(),S(t,1),t.m(e.parentNode,e)):t&&(Oe(),P(t,1,1,()=>{t=null}),He())},d(n){n&&p(e),t&&t.d(n)}}}function hs(l){let e,t,n,o,s=l[1].type+"",i,r,a,c,u,f,h=yl.parse(cs.sanitize(l[1].content))+"",d,_,b,v,g,w=l[1].url&&ms(),y=l[1].url&&gs(),k=l[1].dismissible&&_s(l);return{c(){e=z("div"),t=z("div"),n=z("div"),o=z("div"),i=Ce(s),a=x(),w&&w.c(),c=x(),u=z("div"),f=new Mi(!1),d=x(),y&&y.c(),_=x(),b=z("div"),k&&k.c(),this.h()},l(I){e=N(I,"DIV",{class:!0});var V=C(e);t=N(V,"DIV",{class:!0});var T=C(t);n=N(T,"DIV",{class:!0});var L=C(n);o=N(L,"DIV",{class:!0});var O=C(o);i=De(O,s),O.forEach(p),a=$(L),w&&w.l(L),L.forEach(p),c=$(T),u=N(T,"DIV",{class:!0});var H=C(u);f=Ti(H,!1),H.forEach(p),T.forEach(p),d=$(V),y&&y.l(V),_=$(V),b=N(V,"DIV",{class:!0});var F=C(b);k&&k.l(F),F.forEach(p),V.forEach(p),this.h()},h(){m(o,"class",r="text-xs font-bold "+(l[3][l[1].type]??l[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"),m(n,"class","flex justify-between self-start"),f.a=null,m(u,"class","flex-1 text-xs text-gray-700 dark:text-white"),m(t,"class","flex flex-col md:flex-row md:items-center flex-1 text-sm w-fit gap-1.5"),m(b,"class","flex self-start"),m(e,"class","top-0 left-0 right-0 p-2 mx-4 px-3 flex justify-center items-center relative rounded-xl border border-gray-50 dark:border-gray-850 text-gray-800 dark:text-gary-100 bg-white dark:bg-gray-900 backdrop-blur-xl z-30")},m(I,V){B(I,e,V),E(e,t),E(t,n),E(n,o),E(o,i),E(n,a),w&&w.m(n,null),E(t,c),E(t,u),f.m(h,u),E(e,d),y&&y.m(e,null),E(e,_),E(e,b),k&&k.m(b,null),g=!0},p(I,V){(!g||V&2)&&s!==(s=I[1].type+"")&&Ne(i,s),(!g||V&2&&r!==(r="text-xs font-bold "+(I[3][I[1].type]??I[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"))&&m(o,"class",r),I[1].url?w||(w=ms(),w.c(),w.m(n,null)):w&&(w.d(1),w=null),(!g||V&2)&&h!==(h=yl.parse(cs.sanitize(I[1].content))+"")&&f.p(h),I[1].url?y||(y=gs(),y.c(),y.m(e,_)):y&&(y.d(1),y=null),I[1].dismissible?k?k.p(I,V):(k=_s(I),k.c(),k.m(b,null)):k&&(k.d(1),k=null)},i(I){g||(I&&Qn(()=>{g&&(v||(v=os(e,gl,{delay:100,duration:300},!0)),v.run(1))}),g=!0)},o(I){I&&(v||(v=os(e,gl,{delay:100,duration:300},!1)),v.run(0)),g=!1},d(I){I&&p(e),w&&w.d(),y&&y.d(),k&&k.d(),I&&v&&v.end()}}}function ms(l){let e,t='<a class="text-gray-700 dark:text-white text-xs font-semibold underline" href="/assets/files/whitepaper.pdf" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=z("div"),e.innerHTML=t,this.h()},l(n){e=N(n,"DIV",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-o2pz5m"&&(e.innerHTML=t),this.h()},h(){m(e,"class","flex md:hidden group w-fit md:items-center")},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function gs(l){let e,t='<a class="text-gray-700 dark:text-white text-xs font-semibold underline" href="/" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=z("div"),e.innerHTML=t,this.h()},l(n){e=N(n,"DIV",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-1wr7se3"&&(e.innerHTML=t),this.h()},h(){m(e,"class","hidden md:flex group w-fit md:items-center")},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function _s(l){let e,t="Ã—",n,o;return{c(){e=z("button"),e.textContent=t,this.h()},l(s){e=N(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-o8kh4p"&&(e.textContent=t),this.h()},h(){m(e,"class","-mt-1 -mb-2 -translate-y-[1px] ml-1.5 mr-1 text-gray-400 dark:hover:text-white")},m(s,i){B(s,e,i),n||(o=ke(e,"click",l[5]),n=!0)},p:we,d(s){s&&p(e),n=!1,o()}}}function Nu(l){let e,t=!l[0]&&ds(l);return{c(){t&&t.c(),e=Ue()},l(n){t&&t.l(n),e=Ue()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,[o]){n[0]?t&&(t.d(1),t=null):t?t.p(n,o):(t=ds(n),t.c(),t.m(e.parentNode,e))},i:we,o:we,d(n){n&&p(e),t&&t.d(n)}}}function Pu(l,e,t){const n=tn();let{banner:o={id:"",type:"info",title:"",content:"",url:"",dismissable:!0,timestamp:Math.floor(Date.now()/1e3)}}=e,{dismissed:s=!1}=e,i=!1;const r={info:"bg-blue-500/20 text-blue-700 dark:text-blue-200 ",success:"bg-green-500/20 text-green-700 dark:text-green-200",warning:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-200",error:"bg-red-500/20 text-red-700 dark:text-red-200"},a=u=>{t(0,s=!0),n("dismiss",u)};gn(()=>{t(2,i=!0)});const c=()=>{a(o.id)};return l.$$set=u=>{"banner"in u&&t(1,o=u.banner),"dismissed"in u&&t(0,s=u.dismissed)},[s,o,i,r,a,c]}class Ou extends Ae{constructor(e){super(),Le(this,e,Pu,Nu,We,{banner:1,dismissed:0})}}let Nl="",Pl="";async function Hu(){var t,n;const l=await fetch("/api/config");if(!l.ok)throw new Error("Failed to fetch Google Drive credentials");const e=await l.json();if(Nl=(t=e.google_drive)==null?void 0:t.api_key,Pl=(n=e.google_drive)==null?void 0:n.client_id,!Nl||!Pl)throw new Error("Google Drive API credentials not configured")}const Bu=["https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.file"],Au=()=>{if(!Nl||!Pl)throw new Error("Google Drive API credentials not configured");if(Nl===""||Pl==="")throw new Error("Please configure valid Google Drive API credentials")};let Jl=null,ps=!1;const Lu=()=>new Promise((l,e)=>{if(typeof gapi>"u"){const t=document.createElement("script");t.src="https://apis.google.com/js/api.js",t.onload=()=>{gapi.load("picker",()=>{l(!0)})},t.onerror=e,document.body.appendChild(t)}else gapi.load("picker",()=>{l(!0)})}),Ru=()=>new Promise((l,e)=>{if(typeof google>"u"){const t=document.createElement("script");t.src="https://accounts.google.com/gsi/client",t.onload=l,t.onerror=e,document.body.appendChild(t)}else l(!0)}),Uu=async()=>Jl||new Promise((l,e)=>{google.accounts.oauth2.initTokenClient({client_id:Pl,scope:Bu.join(" "),callback:n=>{n.access_token?(Jl=n.access_token,l(Jl)):e(new Error("Failed to get access token"))},error_callback:n=>{e(new Error(n.message||"OAuth error occurred"))}}).requestAccessToken()}),Wu=async()=>{ps||(await Hu(),Au(),await Promise.all([Lu(),Ru()]),ps=!0)},ju=()=>new Promise(async(l,e)=>{try{console.log("Initializing Google Drive Picker..."),await Wu(),console.log("Getting auth token...");const t=await Uu();if(!t)throw console.error("Failed to get OAuth token"),new Error("Unable to get OAuth token");console.log("Auth token obtained successfully"),new google.picker.PickerBuilder().enableFeature(google.picker.Feature.NAV_HIDDEN).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(new google.picker.DocsView().setIncludeFolders(!1).setSelectFolderEnabled(!1).setMimeTypes("application/pdf,text/plain,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.google-apps.document,application/vnd.google-apps.spreadsheet,application/vnd.google-apps.presentation")).setOAuthToken(t).setDeveloperKey(Nl).setCallback(async o=>{if(o[google.picker.Response.ACTION]===google.picker.Action.PICKED)try{const s=o[google.picker.Response.DOCUMENTS][0],i=s[google.picker.Document.ID],r=s[google.picker.Document.NAME],a=s[google.picker.Document.URL];if(!i||!r)throw new Error("Required file details missing");const c=s[google.picker.Document.MIME_TYPE];let u,f;c.includes("google-apps")?(c.includes("document")?f="text/plain":c.includes("spreadsheet")?f="text/csv":c.includes("presentation")?f="text/plain":f="application/pdf",u=`https://www.googleapis.com/drive/v3/files/${i}/export?mimeType=${encodeURIComponent(f)}`):u=`https://www.googleapis.com/drive/v3/files/${i}?alt=media`;const h=await fetch(u,{headers:{Authorization:`Bearer ${t}`,Accept:"*/*"}});if(!h.ok){const b=await h.text();throw console.error("Download failed:",{status:h.status,statusText:h.statusText,error:b}),new Error(`Failed to download file (${h.status}): ${b}`)}const d=await h.blob(),_={id:i,name:r,url:u,blob:d,headers:{Authorization:`Bearer ${t}`,Accept:"*/*"}};l(_)}catch(s){e(s)}else o[google.picker.Response.ACTION]===google.picker.Action.CANCEL&&l(null)}).build().setVisible(!0)}catch(t){console.error("Google Drive Picker error:",t),e(t)}});function Fu(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=C(e);t=ze(o,"path",{d:!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"d","M21.721 12.752a9.711 9.711 0 0 0-.945-5.003 12.754 12.754 0 0 1-4.339 2.708 18.991 18.991 0 0 1-.214 4.772 17.165 17.165 0 0 0 5.498-2.477ZM14.634 15.55a17.324 17.324 0 0 0 .332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 0 0 .332 4.647 17.385 17.385 0 0 0 5.268 0ZM9.772 17.119a18.963 18.963 0 0 0 4.456 0A17.182 17.182 0 0 1 12 21.724a17.18 17.18 0 0 1-2.228-4.605ZM7.777 15.23a18.87 18.87 0 0 1-.214-4.774 12.753 12.753 0 0 1-4.34-2.708 9.711 9.711 0 0 0-.944 5.004 17.165 17.165 0 0 0 5.498 2.477ZM21.356 14.752a9.765 9.765 0 0 1-7.478 6.817 18.64 18.64 0 0 0 1.988-4.718 18.627 18.627 0 0 0 5.49-2.098ZM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 0 0 1.988 4.718 9.765 9.765 0 0 1-7.478-6.816ZM13.878 2.43a9.755 9.755 0 0 1 6.116 3.986 11.267 11.267 0 0 1-3.746 2.504 18.63 18.63 0 0 0-2.37-6.49ZM12 2.276a17.152 17.152 0 0 1 2.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0 1 12 2.276ZM10.122 2.43a18.629 18.629 0 0 0-2.37 6.49 11.266 11.266 0 0 1-3.746-2.504 9.754 9.754 0 0 1 6.116-3.985Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),E(e,t)},p(n,[o]){o&1&&m(e,"class",n[0])},i:we,o:we,d(n){n&&p(e)}}}function Yu(l,e,t){let{className:n="size-4"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className)},[n]}class Zu extends Ae{constructor(e){super(),Le(this,e,Yu,Fu,We,{className:0})}}function Xu(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=C(e);t=ze(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z"),m(t,"clip-rule","evenodd"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),E(e,t)},p(n,[o]){o&1&&m(e,"class",n[0])},i:we,o:we,d(n){n&&p(e)}}}function Ku(l,e,t){let{className:n="size-4"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className)},[n]}class Gu extends Ae{constructor(e){super(),Le(this,e,Ku,Xu,We,{className:0})}}function bs(l,e,t){const n=l.slice();return n[29]=e[t],n}function qu(l){let e;const t=l[16].default,n=Kt(t,l,l[26],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s[0]&67108864)&&Gt(n,t,o,o[26],e?Jt(t,o[26],s,null):qt(o[26]),null)},i(o){e||(S(n,o),e=!0)},o(o){P(n,o),e=!1},d(o){n&&n.d(o)}}}function Ju(l){let e,t;return e=new Xt({props:{content:l[12].t("More"),$$slots:{default:[qu]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&4096&&(s.content=n[12].t("More")),o[0]&67108864&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function vs(l){let e,t,n,o,s=wt(Object.keys(l[9])),i=[];for(let a=0;a<s.length;a+=1)i[a]=ws(bs(l,s,a));const r=a=>P(i[a],1,1,()=>{i[a]=null});return{c(){e=z("div");for(let a=0;a<i.length;a+=1)i[a].c();t=x(),n=z("hr"),this.h()},l(a){e=N(a,"DIV",{class:!0});var c=C(e);for(let u=0;u<i.length;u+=1)i[u].l(c);c.forEach(p),t=$(a),n=N(a,"HR",{class:!0}),this.h()},h(){m(e,"class","max-h-28 overflow-y-auto scrollbar-hidden"),m(n,"class","border-black/5 dark:border-white/5 my-1")},m(a,c){B(a,e,c);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);B(a,t,c),B(a,n,c),o=!0},p(a,c){if(c[0]&513){s=wt(Object.keys(a[9]));let u;for(u=0;u<s.length;u+=1){const f=bs(a,s,u);i[u]?(i[u].p(f,c),S(i[u],1)):(i[u]=ws(f),i[u].c(),S(i[u],1),i[u].m(e,null))}for(Oe(),u=s.length;u<i.length;u+=1)r(u);He()}},i(a){if(!o){for(let c=0;c<s.length;c+=1)S(i[c]);o=!0}},o(a){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)P(i[c]);o=!1},d(a){a&&(p(e),p(t),p(n)),Sn(i,a)}}}function Qu(l){let e,t,n,o,s=l[9][l[29]].name+"",i,r;return t=new zc({}),{c(){e=z("div"),ee(t.$$.fragment),n=x(),o=z("div"),i=Ce(s),this.h()},l(a){e=N(a,"DIV",{class:!0});var c=C(e);oe(t.$$.fragment,c),c.forEach(p),n=$(a),o=N(a,"DIV",{class:!0});var u=C(o);i=De(u,s),u.forEach(p),this.h()},h(){m(e,"class","flex-shrink-0"),m(o,"class","truncate")},m(a,c){B(a,e,c),te(t,e,null),B(a,n,c),B(a,o,c),E(o,i),r=!0},p(a,c){(!r||c[0]&512)&&s!==(s=a[9][a[29]].name+"")&&Ne(i,s)},i(a){r||(S(t.$$.fragment,a),r=!0)},o(a){P(t.$$.fragment,a),r=!1},d(a){a&&(p(e),p(n),p(o)),ne(t)}}}function ws(l){var d;let e,t,n,o,s,i,r,a,c,u;n=new Xt({props:{content:((d=l[9][l[29]])==null?void 0:d.description)??"",placement:"top-start",className:"flex flex-1 gap-2 items-center",$$slots:{default:[Qu]},$$scope:{ctx:l}}});function f(..._){return l[17](l[29],..._)}i=new Ko({props:{state:l[9][l[29]].enabled}}),i.$on("change",f);function h(){return l[18](l[29])}return{c(){e=z("button"),t=z("div"),ee(n.$$.fragment),o=x(),s=z("div"),ee(i.$$.fragment),r=x(),this.h()},l(_){e=N(_,"BUTTON",{class:!0});var b=C(e);t=N(b,"DIV",{class:!0});var v=C(t);oe(n.$$.fragment,v),v.forEach(p),o=$(b),s=N(b,"DIV",{class:!0});var g=C(s);oe(i.$$.fragment,g),g.forEach(p),r=$(b),b.forEach(p),this.h()},h(){m(t,"class","flex-1 truncate"),m(s,"class","flex-shrink-0"),m(e,"class","flex w-full justify-between gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer rounded-xl")},m(_,b){B(_,e,b),E(e,t),te(n,t,null),E(e,o),E(e,s),te(i,s,null),E(e,r),a=!0,c||(u=ke(e,"click",h),c=!0)},p(_,b){var w;l=_;const v={};b[0]&512&&(v.content=((w=l[9][l[29]])==null?void 0:w.description)??""),b[0]&67109376&&(v.$$scope={dirty:b,ctx:l}),n.$set(v);const g={};b[0]&512&&(g.state=l[9][l[29]].enabled),i.$set(g)},i(_){a||(S(n.$$.fragment,_),S(i.$$.fragment,_),a=!0)},o(_){P(n.$$.fragment,_),P(i.$$.fragment,_),a=!1},d(_){_&&p(e),ne(n),ne(i),c=!1,u()}}}function ys(l){let e,t,n,o,s,i=l[12].t("Image")+"",r,a,c,u,f,h;return n=new Gu({}),c=new Ko({props:{state:l[2]}}),{c(){e=z("button"),t=z("div"),ee(n.$$.fragment),o=x(),s=z("div"),r=Ce(i),a=x(),ee(c.$$.fragment),this.h()},l(d){e=N(d,"BUTTON",{class:!0});var _=C(e);t=N(_,"DIV",{class:!0});var b=C(t);oe(n.$$.fragment,b),o=$(b),s=N(b,"DIV",{class:!0});var v=C(s);r=De(v,i),v.forEach(p),b.forEach(p),a=$(_),oe(c.$$.fragment,_),_.forEach(p),this.h()},h(){m(s,"class","line-clamp-1"),m(t,"class","flex-1 flex items-center gap-2"),m(e,"class","flex w-full justify-between gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer rounded-xl")},m(d,_){B(d,e,_),E(e,t),te(n,t,null),E(t,o),E(t,s),E(s,r),E(e,a),te(c,e,null),u=!0,f||(h=ke(e,"click",l[19]),f=!0)},p(d,_){(!u||_[0]&4096)&&i!==(i=d[12].t("Image")+"")&&Ne(r,i);const b={};_[0]&4&&(b.state=d[2]),c.$set(b)},i(d){u||(S(n.$$.fragment,d),S(c.$$.fragment,d),u=!0)},o(d){P(n.$$.fragment,d),P(c.$$.fragment,d),u=!1},d(d){d&&p(e),ne(n),ne(c),f=!1,h()}}}function ks(l){let e,t,n,o,s,i=l[12].t("Web Search")+"",r,a,c,u,f,h;return n=new Zu({}),c=new Ko({props:{state:l[1]}}),{c(){e=z("button"),t=z("div"),ee(n.$$.fragment),o=x(),s=z("div"),r=Ce(i),a=x(),ee(c.$$.fragment),this.h()},l(d){e=N(d,"BUTTON",{class:!0});var _=C(e);t=N(_,"DIV",{class:!0});var b=C(t);oe(n.$$.fragment,b),o=$(b),s=N(b,"DIV",{class:!0});var v=C(s);r=De(v,i),v.forEach(p),b.forEach(p),a=$(_),oe(c.$$.fragment,_),_.forEach(p),this.h()},h(){m(s,"class","line-clamp-1"),m(t,"class","flex-1 flex items-center gap-2"),m(e,"class","flex w-full justify-between gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer rounded-xl")},m(d,_){B(d,e,_),E(e,t),te(n,t,null),E(t,o),E(t,s),E(s,r),E(e,a),te(c,e,null),u=!0,f||(h=ke(e,"click",l[20]),f=!0)},p(d,_){(!u||_[0]&4096)&&i!==(i=d[12].t("Web Search")+"")&&Ne(r,i);const b={};_[0]&2&&(b.state=d[1]),c.$set(b)},i(d){u||(S(n.$$.fragment,d),S(c.$$.fragment,d),u=!0)},o(d){P(n.$$.fragment,d),P(c.$$.fragment,d),u=!1},d(d){d&&p(e),ne(n),ne(c),f=!1,h()}}}function Es(l){let e;return{c(){e=z("hr"),this.h()},l(t){e=N(t,"HR",{class:!0}),this.h()},h(){m(e,"class","border-black/5 dark:border-white/5 my-1")},m(t,n){B(t,e,n)},d(t){t&&p(e)}}}function Is(l){let e,t;return e=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl",$$slots:{default:[xu]},$$scope:{ctx:l}}}),e.$on("click",l[21]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&67112960&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function xu(l){let e,t,n,o=l[12].t("Capture")+"",s,i;return e=new Ha({}),{c(){ee(e.$$.fragment),t=x(),n=z("div"),s=Ce(o),this.h()},l(r){oe(e.$$.fragment,r),t=$(r),n=N(r,"DIV",{class:!0});var a=C(n);s=De(a,o),a.forEach(p),this.h()},h(){m(n,"class","line-clamp-1")},m(r,a){te(e,r,a),B(r,t,a),B(r,n,a),E(n,s),i=!0},p(r,a){(!i||a[0]&4096)&&o!==(o=r[12].t("Capture")+"")&&Ne(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){r&&(p(t),p(n)),ne(e,r)}}}function $u(l){let e,t,n,o=l[12].t("Upload Files")+"",s,i;return e=new Ba({}),{c(){ee(e.$$.fragment),t=x(),n=z("div"),s=Ce(o),this.h()},l(r){oe(e.$$.fragment,r),t=$(r),n=N(r,"DIV",{class:!0});var a=C(n);s=De(a,o),a.forEach(p),this.h()},h(){m(n,"class","line-clamp-1")},m(r,a){te(e,r,a),B(r,t,a),B(r,n,a),E(n,s),i=!0},p(r,a){(!i||a[0]&4096)&&o!==(o=r[12].t("Upload Files")+"")&&Ne(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){r&&(p(t),p(n)),ne(e,r)}}}function Ss(l){let e,t;return e=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[ef]},$$scope:{ctx:l}}}),e.$on("click",l[23]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&67112960&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function ef(l){let e,t,n,o,s,i,r,a,c,u=l[12].t("Google Drive")+"",f;return{c(){e=Ve("svg"),t=Ve("path"),n=Ve("path"),o=Ve("path"),s=Ve("path"),i=Ve("path"),r=Ve("path"),a=x(),c=z("div"),f=Ce(u),this.h()},l(h){e=ze(h,"svg",{xmlns:!0,viewBox:!0,class:!0});var d=C(e);t=ze(d,"path",{d:!0,fill:!0}),C(t).forEach(p),n=ze(d,"path",{d:!0,fill:!0}),C(n).forEach(p),o=ze(d,"path",{d:!0,fill:!0}),C(o).forEach(p),s=ze(d,"path",{d:!0,fill:!0}),C(s).forEach(p),i=ze(d,"path",{d:!0,fill:!0}),C(i).forEach(p),r=ze(d,"path",{d:!0,fill:!0}),C(r).forEach(p),d.forEach(p),a=$(h),c=N(h,"DIV",{class:!0});var _=C(c);f=De(_,u),_.forEach(p),this.h()},h(){m(t,"d","m6.6 66.85 3.85 6.65c.8 1.4 1.95 2.5 3.3 3.3l13.75-23.8h-27.5c0 1.55.4 3.1 1.2 4.5z"),m(t,"fill","#0066da"),m(n,"d","m43.65 25-13.75-23.8c-1.35.8-2.5 1.9-3.3 3.3l-25.4 44a9.06 9.06 0 0 0 -1.2 4.5h27.5z"),m(n,"fill","#00ac47"),m(o,"d","m73.55 76.8c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75 7.65-13.25c.8-1.4 1.2-2.95 1.2-4.5h-27.502l5.852 11.5z"),m(o,"fill","#ea4335"),m(s,"d","m43.65 25 13.75-23.8c-1.35-.8-2.9-1.2-4.5-1.2h-18.5c-1.6 0-3.15.45-4.5 1.2z"),m(s,"fill","#00832d"),m(i,"d","m59.8 53h-32.3l-13.75 23.8c1.35.8 2.9 1.2 4.5 1.2h50.8c1.6 0 3.15-.45 4.5-1.2z"),m(i,"fill","#2684fc"),m(r,"d","m73.4 26.5-12.7-22c-.8-1.4-1.95-2.5-3.3-3.3l-13.75 23.8 16.15 28h27.45c0-1.55-.4-3.1-1.2-4.5z"),m(r,"fill","#ffba00"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 87.3 78"),m(e,"class","w-5 h-5"),m(c,"class","line-clamp-1")},m(h,d){B(h,e,d),E(e,t),E(e,n),E(e,o),E(e,s),E(e,i),E(e,r),B(h,a,d),B(h,c,d),E(c,f)},p(h,d){d[0]&4096&&u!==(u=h[12].t("Google Drive")+"")&&Ne(f,u)},d(h){h&&(p(e),p(a),p(c))}}}function tf(l){var g,w;let e=Object.keys(l[9]).length>0,t,n,o,s,i,r,a,c,u,f=e&&vs(l),h=l[10]&&ys(l),d=l[11]&&ks(l),_=(l[10]||l[11])&&Es(),b=!l[13]&&Is(l);r=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[$u]},$$scope:{ctx:l}}}),r.$on("click",l[22]);let v=((w=(g=l[8])==null?void 0:g.features)==null?void 0:w.enable_google_drive_integration)&&Ss(l);return{c(){f&&f.c(),t=x(),h&&h.c(),n=x(),d&&d.c(),o=x(),_&&_.c(),s=x(),b&&b.c(),i=x(),ee(r.$$.fragment),a=x(),v&&v.c(),c=Ue()},l(y){f&&f.l(y),t=$(y),h&&h.l(y),n=$(y),d&&d.l(y),o=$(y),_&&_.l(y),s=$(y),b&&b.l(y),i=$(y),oe(r.$$.fragment,y),a=$(y),v&&v.l(y),c=Ue()},m(y,k){f&&f.m(y,k),B(y,t,k),h&&h.m(y,k),B(y,n,k),d&&d.m(y,k),B(y,o,k),_&&_.m(y,k),B(y,s,k),b&&b.m(y,k),B(y,i,k),te(r,y,k),B(y,a,k),v&&v.m(y,k),B(y,c,k),u=!0},p(y,k){var V,T;k[0]&512&&(e=Object.keys(y[9]).length>0),e?f?(f.p(y,k),k[0]&512&&S(f,1)):(f=vs(y),f.c(),S(f,1),f.m(t.parentNode,t)):f&&(Oe(),P(f,1,1,()=>{f=null}),He()),y[10]?h?(h.p(y,k),k[0]&1024&&S(h,1)):(h=ys(y),h.c(),S(h,1),h.m(n.parentNode,n)):h&&(Oe(),P(h,1,1,()=>{h=null}),He()),y[11]?d?(d.p(y,k),k[0]&2048&&S(d,1)):(d=ks(y),d.c(),S(d,1),d.m(o.parentNode,o)):d&&(Oe(),P(d,1,1,()=>{d=null}),He()),y[10]||y[11]?_||(_=Es(),_.c(),_.m(s.parentNode,s)):_&&(_.d(1),_=null),y[13]?b&&(Oe(),P(b,1,1,()=>{b=null}),He()):b?(b.p(y,k),k[0]&8192&&S(b,1)):(b=Is(y),b.c(),S(b,1),b.m(i.parentNode,i));const I={};k[0]&67112960&&(I.$$scope={dirty:k,ctx:y}),r.$set(I),(T=(V=y[8])==null?void 0:V.features)!=null&&T.enable_google_drive_integration?v?(v.p(y,k),k[0]&256&&S(v,1)):(v=Ss(y),v.c(),S(v,1),v.m(c.parentNode,c)):v&&(Oe(),P(v,1,1,()=>{v=null}),He())},i(y){u||(S(f),S(h),S(d),S(b),S(r.$$.fragment,y),S(v),u=!0)},o(y){P(f),P(h),P(d),P(b),P(r.$$.fragment,y),P(v),u=!1},d(y){y&&(p(t),p(n),p(o),p(s),p(i),p(a),p(c)),f&&f.d(y),h&&h.d(y),d&&d.d(y),_&&_.d(y),b&&b.d(y),ne(r,y),v&&v.d(y)}}}function nf(l){let e,t,n;return t=new po({props:{class:"w-full max-w-[220px] rounded-xl px-1 py-1  border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:15,alignOffset:-8,side:"top",align:"start",transition:Rl,$$slots:{default:[tf]},$$scope:{ctx:l}}}),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(o){e=N(o,"DIV",{slot:!0});var s=C(e);oe(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"slot","content")},m(o,s){B(o,e,s),te(t,e,null),n=!0},p(o,s){const i={};s[0]&67125055&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){o&&p(e),ne(t)}}}function lf(l){let e,t,n;function o(i){l[24](i)}let s={$$slots:{content:[nf],default:[Ju]},$$scope:{ctx:l}};return l[7]!==void 0&&(s.show=l[7]),e=new _o({props:s}),je.push(()=>qe(e,"show",o)),e.$on("change",l[25]),{c(){ee(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){te(e,i,r),n=!0},p(i,r){const a={};r[0]&67125055&&(a.$$scope={dirty:r,ctx:i}),!t&&r[0]&128&&(t=!0,a.show=i[7],Ge(()=>t=!1)),e.$set(a)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){P(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function of(l,e,t){let n,o,s,i,r;ce(l,il,M=>t(27,n=M)),ce(l,Kn,M=>t(15,o=M)),ce(l,Al,M=>t(8,s=M)),ce(l,Ll,M=>t(13,r=M));let{$$slots:a={},$$scope:c}=e;const u=Lt("i18n");ce(l,u,M=>t(12,i=M));let{screenCaptureHandler:f}=e,{uploadFilesHandler:h}=e,{uploadGoogleDriveHandler:d}=e,{selectedToolIds:_=[]}=e,{webSearchEnabled:b}=e,{imageGenerationEnabled:v}=e,{onClose:g}=e,w={},y=!1,k=!1,I=!1;const V=async()=>{n===null&&await il.set(await Xo(localStorage.token)),t(9,w=n.reduce((M,W,j,Z)=>(M[W.id]={name:W.name,description:W.meta.description,enabled:_.includes(W.id)},M),{}))},T=async(M,W)=>{const j=W.detail;await Qe(),j?t(0,_=[..._,M]):t(0,_=_.filter(Z=>Z!==M))},L=M=>{t(9,w[M].enabled=!w[M].enabled,w)},O=()=>{t(2,v=!v)},H=()=>{t(1,b=!b)},F=()=>{f()},Y=()=>{h()},G=()=>{d()};function D(M){y=M,t(7,y)}const K=M=>{M.detail===!1&&g()};return l.$$set=M=>{"screenCaptureHandler"in M&&t(3,f=M.screenCaptureHandler),"uploadFilesHandler"in M&&t(4,h=M.uploadFilesHandler),"uploadGoogleDriveHandler"in M&&t(5,d=M.uploadGoogleDriveHandler),"selectedToolIds"in M&&t(0,_=M.selectedToolIds),"webSearchEnabled"in M&&t(1,b=M.webSearchEnabled),"imageGenerationEnabled"in M&&t(2,v=M.imageGenerationEnabled),"onClose"in M&&t(6,g=M.onClose),"$$scope"in M&&t(26,c=M.$$scope)},l.$$.update=()=>{var M,W,j,Z,A,X;l.$$.dirty[0]&33024&&t(10,k=((M=s==null?void 0:s.features)==null?void 0:M.enable_image_generation)&&(o.role==="admin"||((j=(W=o==null?void 0:o.permissions)==null?void 0:W.features)==null?void 0:j.image_generation))),l.$$.dirty[0]&33024&&t(11,I=((Z=s==null?void 0:s.features)==null?void 0:Z.enable_web_search)&&(o.role==="admin"||((X=(A=o==null?void 0:o.permissions)==null?void 0:A.features)==null?void 0:X.web_search))),l.$$.dirty[0]&128&&y&&V()},[_,b,v,f,h,d,g,y,s,w,k,I,i,r,u,o,a,T,L,O,H,F,Y,G,D,K,c]}class sf extends Ae{constructor(e){super(),Le(this,e,of,lf,We,{screenCaptureHandler:3,uploadFilesHandler:4,uploadGoogleDriveHandler:5,selectedToolIds:0,webSearchEnabled:1,imageGenerationEnabled:2,onClose:6},null,[-1,-1])}}function rf(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=C(e);t=ze(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M12 5a7 7 0 0 0-7 7v1.17c.313-.11.65-.17 1-.17h2a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H6a3 3 0 0 1-3-3v-6a9 9 0 0 1 18 0v6a3 3 0 0 1-3 3h-2a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2c.35 0 .687.06 1 .17V12a7 7 0 0 0-7-7Z"),m(t,"clip-rule","evenodd"),m(e,"aria-hidden","true"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","currentColor"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:we,o:we,d(n){n&&p(e)}}}function af(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:o="0"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class cf extends Ae{constructor(e){super(),Le(this,e,af,rf,We,{className:0,strokeWidth:1})}}function Cs(l,e,t){const n=l.slice();return n[0]=e[t],n[15]=t,n}function Ds(l){let e,t,n,o,s,i,r,a='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>',c,u,f=l[3].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"",h,d=wt(l[2]),_=[];for(let b=0;b<d.length;b+=1)_[b]=Ms(Cs(l,d,b));return{c(){e=z("div"),t=z("div"),n=z("div"),o=z("div");for(let b=0;b<_.length;b+=1)_[b].c();s=x(),i=z("div"),r=z("div"),r.innerHTML=a,c=x(),u=z("div"),h=Ce(f),this.h()},l(b){e=N(b,"DIV",{id:!0,class:!0});var v=C(e);t=N(v,"DIV",{class:!0});var g=C(t);n=N(g,"DIV",{class:!0});var w=C(n);o=N(w,"DIV",{class:!0});var y=C(o);for(let V=0;V<_.length;V+=1)_[V].l(y);y.forEach(p),s=$(w),i=N(w,"DIV",{class:!0});var k=C(i);r=N(k,"DIV",{"data-svelte-h":!0}),ft(r)!=="svelte-cdi12d"&&(r.innerHTML=a),c=$(k),u=N(k,"DIV",{class:!0});var I=C(u);h=De(I,f),I.forEach(p),k.forEach(p),w.forEach(p),g.forEach(p),v.forEach(p),this.h()},h(){m(o,"class","m-1 overflow-y-auto p-1 space-y-0.5 scrollbar-hidden"),m(u,"class","line-clamp-1"),m(i,"class","px-2 pt-0.5 pb-1 text-xs text-gray-600 dark:text-gray-100 bg-white dark:bg-gray-900 rounded-b-xl flex items-center space-x-1"),m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-50 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(b,v){B(b,e,v),E(e,t),E(t,n),E(n,o);for(let g=0;g<_.length;g+=1)_[g]&&_[g].m(o,null);E(n,s),E(n,i),E(i,r),E(i,c),E(i,u),E(u,h)},p(b,v){if(v&38){d=wt(b[2]);let g;for(g=0;g<d.length;g+=1){const w=Cs(b,d,g);_[g]?_[g].p(w,v):(_[g]=Ms(w),_[g].c(),_[g].m(o,null))}for(;g<_.length;g+=1)_[g].d(1);_.length=d.length}v&8&&f!==(f=b[3].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"")&&Ne(h,f)},d(b){b&&p(e),Sn(_,b)}}}function Ms(l){let e,t,n=l[0].command+"",o,s,i,r=l[0].title+"",a,c,u,f,h;function d(){return l[11](l[0])}function _(){return l[12](l[15])}return{c(){e=z("button"),t=z("div"),o=Ce(n),s=x(),i=z("div"),a=Ce(r),c=x(),this.h()},l(b){e=N(b,"BUTTON",{class:!0,type:!0});var v=C(e);t=N(v,"DIV",{class:!0});var g=C(t);o=De(g,n),g.forEach(p),s=$(v),i=N(v,"DIV",{class:!0});var w=C(i);a=De(w,r),w.forEach(p),c=$(v),v.forEach(p),this.h()},h(){m(t,"class","font-medium text-black dark:text-gray-100"),m(i,"class","text-xs text-gray-600 dark:text-gray-100"),m(e,"class",u="px-3 py-1.5 rounded-xl w-full text-left "+(l[15]===l[1]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":"")),m(e,"type","button")},m(b,v){B(b,e,v),E(e,t),E(t,o),E(e,s),E(e,i),E(i,a),E(e,c),f||(h=[ke(e,"click",d),ke(e,"mousemove",_),ke(e,"focus",ff)],f=!0)},p(b,v){l=b,v&4&&n!==(n=l[0].command+"")&&Ne(o,n),v&4&&r!==(r=l[0].title+"")&&Ne(a,r),v&2&&u!==(u="px-3 py-1.5 rounded-xl w-full text-left "+(l[15]===l[1]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":""))&&m(e,"class",u)},d(b){b&&p(e),f=!1,en(h)}}}function uf(l){let e,t=l[2].length>0&&Ds(l);return{c(){t&&t.c(),e=Ue()},l(n){t&&t.l(n),e=Ue()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,[o]){n[2].length>0?t?t.p(n,o):(t=Ds(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:we,o:we,d(n){n&&p(e),t&&t.d(n)}}}const ff=()=>{};function df(l,e,t){let n,o,s;ce(l,Kn,g=>t(13,n=g)),ce(l,Oi,g=>t(10,s=g));const i=Lt("i18n");ce(l,i,g=>t(3,o=g));let{files:r}=e,{prompt:a=""}=e,{command:c=""}=e,u=0,f=[];const h=()=>{t(1,u=Math.max(0,u-1))},d=()=>{t(1,u=Math.min(u+1,f.length-1))},_=async g=>{let w=g.content;if(g.content.includes("{{CLIPBOARD}}")){const I=await navigator.clipboard.readText().catch(L=>(nt.error(o.t("Failed to read clipboard contents")),"{{CLIPBOARD}}")),V=await navigator.clipboard.read();let T=null;for(const L of V)for(const O of L.types)if(O.startsWith("image/")){const H=await L.getType(O);T=URL.createObjectURL(H)}T&&t(6,r=[...r,{type:"image",url:T}]),w=w.replaceAll("{{CLIPBOARD}}",I)}if(g.content.includes("{{USER_LOCATION}}")){const I=await Ka();w=w.replaceAll("{{USER_LOCATION}}",String(I))}if(g.content.includes("{{USER_NAME}}")){console.log(n);const I=n.name||"User";w=w.replaceAll("{{USER_NAME}}",I)}if(g.content.includes("{{USER_LANGUAGE}}")){const I=localStorage.getItem("locale")||"en-US";w=w.replaceAll("{{USER_LANGUAGE}}",I)}if(g.content.includes("{{CURRENT_DATE}}")){const I=Ga();w=w.replaceAll("{{CURRENT_DATE}}",I)}if(g.content.includes("{{CURRENT_TIME}}")){const I=qa();w=w.replaceAll("{{CURRENT_TIME}}",I)}if(g.content.includes("{{CURRENT_DATETIME}}")){const I=Ja();w=w.replaceAll("{{CURRENT_DATETIME}}",I)}if(g.content.includes("{{CURRENT_TIMEZONE}}")){const I=Qa();w=w.replaceAll("{{CURRENT_TIMEZONE}}",I)}if(g.content.includes("{{CURRENT_WEEKDAY}}")){const I=xa();w=w.replaceAll("{{CURRENT_WEEKDAY}}",I)}t(0,a=w);const y=document.getElementById("chat-input-container"),k=document.getElementById("chat-input");await Qe(),y&&(y.style.height="",y.style.height=Math.min(y.scrollHeight,200)+"px"),await Qe(),k&&(k.focus(),k.dispatchEvent(new Event("input")))},b=g=>{_(g)},v=g=>{t(1,u=g)};return l.$$set=g=>{"files"in g&&t(6,r=g.files),"prompt"in g&&t(0,a=g.prompt),"command"in g&&t(7,c=g.command)},l.$$.update=()=>{l.$$.dirty&1152&&t(2,f=s.filter(g=>g.command.toLowerCase().includes(c.toLowerCase())).sort((g,w)=>g.title.localeCompare(w.title))),l.$$.dirty&128&&c&&t(1,u=0)},[a,u,f,o,i,_,r,c,h,d,s,b,v]}class hf extends Ae{constructor(e){super(),Le(this,e,df,uf,We,{files:6,prompt:0,command:7,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function Ts(l,e,t){const n=l.slice();return n[19]=e[t],n[21]=t,n}function Vs(l){let e,t,n,o,s,i,r,a=wt(l[2]),c=[];for(let d=0;d<a.length;d+=1)c[d]=zs(Ts(l,a,d));function u(d,_){var b,v;if(_&1&&(i=null),_&1&&(r=null),i==null&&(i=!!d[0].split(" ").some(yf)),i)return vf;if(r==null&&(r=!!((v=(b=d[0].split(" "))==null?void 0:b.at(0))!=null&&v.substring(1).startsWith("http"))),r)return bf}let f=u(l,-1),h=f&&f(l);return{c(){e=z("div"),t=z("div"),n=z("div"),o=z("div");for(let d=0;d<c.length;d+=1)c[d].c();s=x(),h&&h.c(),this.h()},l(d){e=N(d,"DIV",{id:!0,class:!0});var _=C(e);t=N(_,"DIV",{class:!0});var b=C(t);n=N(b,"DIV",{class:!0});var v=C(n);o=N(v,"DIV",{class:!0});var g=C(o);for(let w=0;w<c.length;w+=1)c[w].l(g);s=$(g),h&&h.l(g),g.forEach(p),v.forEach(p),b.forEach(p),_.forEach(p),this.h()},h(){m(o,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5 scrollbar-hidden"),m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-50 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(d,_){B(d,e,_),E(e,t),E(t,n),E(n,o);for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(o,null);E(o,s),h&&h.m(o,null)},p(d,_){if(_&38){a=wt(d[2]);let b;for(b=0;b<a.length;b+=1){const v=Ts(d,a,b);c[b]?c[b].p(v,_):(c[b]=zs(v),c[b].c(),c[b].m(o,s))}for(;b<c.length;b+=1)c[b].d(1);c.length=a.length}f===(f=u(d,_))&&h?h.p(d,_):(h&&h.d(1),h=f&&f(d),h&&(h.c(),h.m(o,null)))},d(d){d&&p(e),Sn(c,d),h&&h.d()}}}function mf(l){let e,t="Collection";return{c(){e=z("div"),e.textContent=t,this.h()},l(n){e=N(n,"DIV",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-2leuop"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-green-500/20 text-green-700 dark:text-green-200 rounded uppercase text-xs font-bold px-1 flex-shrink-0")},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function gf(l){let e,t="File";return{c(){e=z("div"),e.textContent=t,this.h()},l(n){e=N(n,"DIV",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-1hk0ird"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1 flex-shrink-0")},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function _f(l){let e,t="Document";return{c(){e=z("div"),e.textContent=t,this.h()},l(n){e=N(n,"DIV",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-o57xc2"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1 flex-shrink-0")},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function pf(l){let e,t="Legacy";return{c(){e=z("div"),e.textContent=t,this.h()},l(n){e=N(n,"DIV",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-1dukunw"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1 flex-shrink-0")},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function zs(l){var k,I;let e,t,n,o,s,i=((k=l[19])==null?void 0:k.name)+"",r,a,c,u=((I=l[19])==null?void 0:I.description)+"",f,h,d,_;function b(V,T){var L,O,H;return V[19].legacy?pf:(O=(L=V[19])==null?void 0:L.meta)!=null&&O.document?_f:((H=V[19])==null?void 0:H.type)==="file"?gf:mf}let v=b(l),g=v(l);function w(){return l[13](l[19])}function y(){return l[14](l[21])}return{c(){e=z("button"),t=z("div"),n=z("div"),g.c(),o=x(),s=z("div"),r=Ce(i),a=x(),c=z("div"),f=Ce(u),this.h()},l(V){e=N(V,"BUTTON",{class:!0,type:!0});var T=C(e);t=N(T,"DIV",{});var L=C(t);n=N(L,"DIV",{class:!0});var O=C(n);g.l(O),o=$(O),s=N(O,"DIV",{class:!0});var H=C(s);r=De(H,i),H.forEach(p),O.forEach(p),a=$(L),c=N(L,"DIV",{class:!0});var F=C(c);f=De(F,u),F.forEach(p),L.forEach(p),T.forEach(p),this.h()},h(){m(s,"class","line-clamp-1"),m(n,"class","font-medium text-black dark:text-gray-100 flex items-center gap-1"),m(c,"class","text-xs text-gray-600 dark:text-gray-100 line-clamp-1"),m(e,"class",h="px-3 py-1.5 rounded-xl w-full text-left flex justify-between items-center "+(l[21]===l[1]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":"")),m(e,"type","button")},m(V,T){B(V,e,T),E(e,t),E(t,n),g.m(n,null),E(n,o),E(n,s),E(s,r),E(t,a),E(t,c),E(c,f),d||(_=[ke(e,"click",w),ke(e,"mousemove",y)],d=!0)},p(V,T){var L,O;l=V,v!==(v=b(l))&&(g.d(1),g=v(l),g&&(g.c(),g.m(n,o))),T&4&&i!==(i=((L=l[19])==null?void 0:L.name)+"")&&Ne(r,i),T&4&&u!==(u=((O=l[19])==null?void 0:O.description)+"")&&Ne(f,u),T&2&&h!==(h="px-3 py-1.5 rounded-xl w-full text-left flex justify-between items-center "+(l[21]===l[1]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":""))&&m(e,"class",h)},d(V){V&&p(e),g.d(),d=!1,en(_)}}}function bf(l){var f,h;let e,t,n=((h=(f=l[0].split(" "))==null?void 0:f.at(0))==null?void 0:h.substring(1))+"",o,s,i,r=l[3].t("Web")+"",a,c,u;return{c(){e=z("button"),t=z("div"),o=Ce(n),s=x(),i=z("div"),a=Ce(r),this.h()},l(d){e=N(d,"BUTTON",{class:!0,type:!0});var _=C(e);t=N(_,"DIV",{class:!0});var b=C(t);o=De(b,n),b.forEach(p),s=$(_),i=N(_,"DIV",{class:!0});var v=C(i);a=De(v,r),v.forEach(p),_.forEach(p),this.h()},h(){m(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),m(i,"class","text-xs text-gray-600 line-clamp-1"),m(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button"),m(e,"type","button")},m(d,_){B(d,e,_),E(e,t),E(t,o),E(e,s),E(e,i),E(i,a),c||(u=ke(e,"click",l[16]),c=!0)},p(d,_){var b,v;_&1&&n!==(n=((v=(b=d[0].split(" "))==null?void 0:b.at(0))==null?void 0:v.substring(1))+"")&&Ne(o,n),_&8&&r!==(r=d[3].t("Web")+"")&&Ne(a,r)},d(d){d&&p(e),c=!1,u()}}}function vf(l){var f,h;let e,t,n=((h=(f=l[0].split(" "))==null?void 0:f.at(0))==null?void 0:h.substring(1))+"",o,s,i,r=l[3].t("Youtube")+"",a,c,u;return{c(){e=z("button"),t=z("div"),o=Ce(n),s=x(),i=z("div"),a=Ce(r),this.h()},l(d){e=N(d,"BUTTON",{class:!0,type:!0});var _=C(e);t=N(_,"DIV",{class:!0});var b=C(t);o=De(b,n),b.forEach(p),s=$(_),i=N(_,"DIV",{class:!0});var v=C(i);a=De(v,r),v.forEach(p),_.forEach(p),this.h()},h(){m(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),m(i,"class","text-xs text-gray-600 line-clamp-1"),m(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button"),m(e,"type","button")},m(d,_){B(d,e,_),E(e,t),E(t,o),E(e,s),E(e,i),E(i,a),c||(u=ke(e,"click",l[15]),c=!0)},p(d,_){var b,v;_&1&&n!==(n=((v=(b=d[0].split(" "))==null?void 0:b.at(0))==null?void 0:v.substring(1))+"")&&Ne(o,n),_&8&&r!==(r=d[3].t("Youtube")+"")&&Ne(a,r)},d(d){d&&p(e),c=!1,u()}}}function wf(l){var o,s;let e=l[2].length>0||((s=(o=l[0].split(" "))==null?void 0:o.at(0))==null?void 0:s.substring(1).startsWith("http")),t,n=e&&Vs(l);return{c(){n&&n.c(),t=Ue()},l(i){n&&n.l(i),t=Ue()},m(i,r){n&&n.m(i,r),B(i,t,r)},p(i,[r]){var a,c;r&5&&(e=i[2].length>0||((c=(a=i[0].split(" "))==null?void 0:a.at(0))==null?void 0:c.substring(1).startsWith("http"))),e?n?n.p(i,r):(n=Vs(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:we,o:we,d(i){i&&p(t),n&&n.d(i)}}}const yf=l=>l.substring(1).startsWith("https://www.youtube.com")||l.substring(1).startsWith("https://youtu.be");function kf(l,e,t){let n,o;ce(l,Hi,V=>t(17,n=V)),Bc.extend(Ac);const s=Lt("i18n");ce(l,s,V=>t(3,o=V));let{prompt:i=""}=e,{command:r=""}=e;const a=tn();let c=0,u=[],f=null,h=[];const d=()=>{t(1,c=Math.max(0,c-1))},_=()=>{t(1,c=Math.min(c+1,h.length-1))},b=async V=>{a("select",V),t(0,i=$l(i,r));const T=document.getElementById("chat-input");await Qe(),T==null||T.focus(),await Qe()},v=async V=>{a("url",V),t(0,i=$l(i,r));const T=document.getElementById("chat-input");await Qe(),T==null||T.focus(),await Qe()},g=async V=>{a("youtube",V),t(0,i=$l(i,r));const T=document.getElementById("chat-input");await Qe(),T==null||T.focus(),await Qe()};gn(()=>{let V=n.filter(H=>{var F;return(F=H==null?void 0:H.meta)==null?void 0:F.document}).map(H=>({...H,type:"file"})),T=V.length>0?[{name:"All Documents",legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",title:o.t("All Documents"),collection_names:V.map(H=>H.id)},...V.reduce((H,F)=>{var Y;return[...new Set([...H,...(((Y=F==null?void 0:F.meta)==null?void 0:Y.tags)??[]).map(G=>G.name)])]},[]).map(H=>({name:H,legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",collection_names:V.filter(F=>{var Y;return(((Y=F==null?void 0:F.meta)==null?void 0:Y.tags)??[]).map(G=>G.name).includes(H)}).map(F=>F.id)}))]:[],L=n.filter(H=>{var F;return!((F=H==null?void 0:H.meta)!=null&&F.document)}).map(H=>({...H,type:"collection"})),O=n.length>0?[...n.reduce((H,F)=>[...new Set([...H,...((F==null?void 0:F.files)??[]).map(Y=>({...Y,collection:{name:F.name,description:F.description}}))])],[]).map(H=>{var F,Y,G;return{...H,name:(F=H==null?void 0:H.meta)==null?void 0:F.name,description:`${(Y=H==null?void 0:H.collection)==null?void 0:Y.name} - ${(G=H==null?void 0:H.collection)==null?void 0:G.description}`,type:"file"}})]:[];t(11,u=[...L,...O,...T,...V].map(H=>{var F,Y;return{...H,...H!=null&&H.legacy||(F=H==null?void 0:H.meta)!=null&&F.legacy||(Y=H==null?void 0:H.meta)!=null&&Y.document?{legacy:!0}:{}}})),t(12,f=new Ui(u,{keys:["name","description"]}))});const w=V=>{console.log(V),b(V)},y=V=>{t(1,c=V)},k=()=>{var T,L;const V=(L=(T=i.split(" "))==null?void 0:T.at(0))==null?void 0:L.substring(1);is(V)?g(V):nt.error(o.t("Oops! Looks like the URL is invalid. Please double-check and try again."))},I=()=>{var T,L;const V=(L=(T=i.split(" "))==null?void 0:T.at(0))==null?void 0:L.substring(1);is(V)?v(V):nt.error(o.t("Oops! Looks like the URL is invalid. Please double-check and try again."))};return l.$$set=V=>{"prompt"in V&&t(0,i=V.prompt),"command"in V&&t(8,r=V.command)},l.$$.update=()=>{l.$$.dirty&6400&&f&&t(2,h=r.slice(1)?f.search(r).map(V=>V.item):u),l.$$.dirty&256&&r&&t(1,c=0)},[i,c,h,o,s,b,v,g,r,d,_,u,f,w,y,k,I]}class Ef extends Ae{constructor(e){super(),Le(this,e,kf,wf,We,{prompt:0,command:8,selectUp:9,selectDown:10})}get selectUp(){return this.$$.ctx[9]}get selectDown(){return this.$$.ctx[10]}}function Ns(l,e,t){const n=l.slice();return n[12]=e[t],n[14]=t,n}function Ps(l){let e,t,n,o,s=wt(l[1]),i=[];for(let r=0;r<s.length;r+=1)i[r]=Os(Ns(l,s,r));return{c(){e=z("div"),t=z("div"),n=z("div"),o=z("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=N(r,"DIV",{id:!0,class:!0});var a=C(e);t=N(a,"DIV",{class:!0});var c=C(t);n=N(c,"DIV",{class:!0});var u=C(n);o=N(u,"DIV",{class:!0});var f=C(o);for(let h=0;h<i.length;h+=1)i[h].l(f);f.forEach(p),u.forEach(p),c.forEach(p),a.forEach(p),this.h()},h(){m(o,"class","m-1 overflow-y-auto p-1 rounded-r-lg space-y-0.5 scrollbar-hidden"),m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-50 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(r,a){B(r,e,a),E(e,t),E(t,n),E(n,o);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(o,null)},p(r,a){if(a&7){s=wt(r[1]);let c;for(c=0;c<s.length;c+=1){const u=Ns(r,s,c);i[c]?i[c].p(u,a):(i[c]=Os(u),i[c].c(),i[c].m(o,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}},d(r){r&&p(e),Sn(i,r)}}}function Os(l){let e,t,n,o,s,i,r=l[12].name+"",a,c,u,f,h;function d(){return l[7](l[12])}function _(){return l[8](l[14])}return{c(){e=z("button"),t=z("div"),n=z("img"),i=x(),a=Ce(r),c=x(),this.h()},l(b){e=N(b,"BUTTON",{class:!0,type:!0});var v=C(e);t=N(v,"DIV",{class:!0});var g=C(t);n=N(g,"IMG",{src:!0,alt:!0,class:!0}),i=$(g),a=De(g,r),g.forEach(p),c=$(v),v.forEach(p),this.h()},h(){var b,v,g,w;Xn(n.src,o=((g=(v=(b=l[12])==null?void 0:b.info)==null?void 0:v.meta)==null?void 0:g.profile_image_url)??"/static/favicon.png")||m(n,"src",o),m(n,"alt",s=((w=l[12])==null?void 0:w.name)??l[12].id),m(n,"class","rounded-full size-6 items-center mr-2"),m(t,"class","flex font-medium text-black dark:text-gray-100 line-clamp-1"),m(e,"class",u="px-3 py-1.5 rounded-xl w-full text-left "+(l[14]===l[0]?"bg-gray-50 dark:bg-gray-850 selected-command-option-button":"")),m(e,"type","button")},m(b,v){B(b,e,v),E(e,t),E(t,n),E(t,i),E(t,a),E(e,c),f||(h=[ke(e,"click",d),ke(e,"mousemove",_),ke(e,"focus",Sf)],f=!0)},p(b,v){var g,w,y,k;l=b,v&2&&!Xn(n.src,o=((y=(w=(g=l[12])==null?void 0:g.info)==null?void 0:w.meta)==null?void 0:y.profile_image_url)??"/static/favicon.png")&&m(n,"src",o),v&2&&s!==(s=((k=l[12])==null?void 0:k.name)??l[12].id)&&m(n,"alt",s),v&2&&r!==(r=l[12].name+"")&&Ne(a,r),v&1&&u!==(u="px-3 py-1.5 rounded-xl w-full text-left "+(l[14]===l[0]?"bg-gray-50 dark:bg-gray-850 selected-command-option-button":""))&&m(e,"class",u)},d(b){b&&p(e),f=!1,en(h)}}}function If(l){let e,t=l[1].length>0&&Ps(l);return{c(){t&&t.c(),e=Ue()},l(n){t&&t.l(n),e=Ue()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,[o]){n[1].length>0?t?t.p(n,o):(t=Ps(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:we,o:we,d(n){n&&p(e),t&&t.d(n)}}}const Sf=()=>{};function Cf(l,e,t){let n;ce(l,cl,_=>t(6,n=_)),Lt("i18n");const o=tn();let{command:s=""}=e,i=0,r=[],a=new Ui(n.filter(_=>{var b,v;return!((v=(b=_==null?void 0:_.info)==null?void 0:b.meta)!=null&&v.hidden)}).map(_=>{var v,g,w,y,k;return{..._,modelName:_==null?void 0:_.name,tags:(w=(g=(v=_==null?void 0:_.info)==null?void 0:v.meta)==null?void 0:g.tags)==null?void 0:w.map(I=>I.name).join(" "),desc:(k=(y=_==null?void 0:_.info)==null?void 0:y.meta)==null?void 0:k.description}}),{keys:["value","tags","modelName"],threshold:.3});const c=()=>{t(0,i=Math.max(0,i-1))},u=()=>{t(0,i=Math.min(i+1,r.length-1))},f=async _=>{t(3,s=""),o("select",_)};gn(async()=>{await Qe();const _=document.getElementById("chat-input");await Qe(),_==null||_.focus(),await Qe()});const h=_=>{f(_)},d=_=>{t(0,i=_)};return l.$$set=_=>{"command"in _&&t(3,s=_.command)},l.$$.update=()=>{l.$$.dirty&72&&t(1,r=s.slice(1)?a.search(s).map(_=>_.item):n.filter(_=>{var b,v;return!((v=(b=_==null?void 0:_.info)==null?void 0:b.meta)!=null&&v.hidden)})),l.$$.dirty&8&&s&&t(0,i=0)},[i,r,f,s,c,u,n,h,d]}class Df extends Ae{constructor(e){super(),Le(this,e,Cf,If,We,{command:3,selectUp:4,selectDown:5})}get selectUp(){return this.$$.ctx[4]}get selectDown(){return this.$$.ctx[5]}}function Hs(l){let e,t,n,o;const s=[Tf,Mf],i=[];function r(a,c){return a[4]?1:0}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ue()},l(a){t.l(a),n=Ue()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(Oe(),P(i[u],1,1,()=>{i[u]=null}),He(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){P(t),o=!1},d(a){a&&p(n),i[e].d(a)}}}function Mf(l){let e,t,n,o,s;return o=new Go({}),{c(){e=z("div"),t=z("div"),n=z("div"),ee(o.$$.fragment),this.h()},l(i){e=N(i,"DIV",{id:!0,class:!0});var r=C(e);t=N(r,"DIV",{class:!0});var a=C(t);n=N(a,"DIV",{class:!0});var c=C(n);oe(o.$$.fragment,c),c.forEach(p),a.forEach(p),r.forEach(p),this.h()},h(){m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-50 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(i,r){B(i,e,r),E(e,t),E(t,n),te(o,n,null),s=!0},p:we,i(i){s||(S(o.$$.fragment,i),s=!0)},o(i){P(o.$$.fragment,i),s=!1},d(i){i&&p(e),ne(o)}}}function Tf(l){let e,t,n,o,s,i,r;const a=[Nf,zf,Vf],c=[];function u(f,h){var d,_,b;return h&4&&(e=null),h&4&&(t=null),h&4&&(n=null),e==null&&(e=((d=f[2])==null?void 0:d.charAt(0))==="/"),e?0:(t==null&&(t=!!(((_=f[2])==null?void 0:_.charAt(0))==="#"&&f[2].startsWith("#")&&!f[2].includes("# ")||f[2].slice(0,2)==="\\#"&&f[2].startsWith("#")&&!f[2].includes("# "))),t?1:(n==null&&(n=((b=f[2])==null?void 0:b.charAt(0))==="@"),n?2:-1))}return~(o=u(l,-1))&&(s=c[o]=a[o](l)),{c(){s&&s.c(),i=Ue()},l(f){s&&s.l(f),i=Ue()},m(f,h){~o&&c[o].m(f,h),B(f,i,h),r=!0},p(f,h){let d=o;o=u(f,h),o===d?~o&&c[o].p(f,h):(s&&(Oe(),P(c[d],1,1,()=>{c[d]=null}),He()),~o?(s=c[o],s?s.p(f,h):(s=c[o]=a[o](f),s.c()),S(s,1),s.m(i.parentNode,i)):s=null)},i(f){r||(S(s),r=!0)},o(f){P(s),r=!1},d(f){f&&p(i),~o&&c[o].d(f)}}}function Vf(l){let e,t,n={command:l[2]};return e=new Df({props:n}),l[17](e),e.$on("select",l[18]),{c(){ee(e.$$.fragment)},l(o){oe(e.$$.fragment,o)},m(o,s){te(e,o,s),t=!0},p(o,s){const i={};s&4&&(i.command=o[2]),e.$set(i)},i(o){t||(S(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){l[17](null),ne(e,o)}}}function zf(l){let e,t,n;function o(i){l[13](i)}let s={command:l[2].includes("\\#")?l[2].slice(2):l[2]};return l[0]!==void 0&&(s.prompt=l[0]),e=new Ef({props:s}),l[12](e),je.push(()=>qe(e,"prompt",o)),e.$on("youtube",l[14]),e.$on("url",l[15]),e.$on("select",l[16]),{c(){ee(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){te(e,i,r),n=!0},p(i,r){const a={};r&4&&(a.command=i[2].includes("\\#")?i[2].slice(2):i[2]),!t&&r&1&&(t=!0,a.prompt=i[0],Ge(()=>t=!1)),e.$set(a)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){P(e.$$.fragment,i),n=!1},d(i){l[12](null),ne(e,i)}}}function Nf(l){let e,t,n,o;function s(a){l[10](a)}function i(a){l[11](a)}let r={command:l[2]};return l[0]!==void 0&&(r.prompt=l[0]),l[1]!==void 0&&(r.files=l[1]),e=new hf({props:r}),l[9](e),je.push(()=>qe(e,"prompt",s)),je.push(()=>qe(e,"files",i)),{c(){ee(e.$$.fragment)},l(a){oe(e.$$.fragment,a)},m(a,c){te(e,a,c),o=!0},p(a,c){const u={};c&4&&(u.command=a[2]),!t&&c&1&&(t=!0,u.prompt=a[0],Ge(()=>t=!1)),!n&&c&2&&(n=!0,u.files=a[1],Ge(()=>n=!1)),e.$set(u)},i(a){o||(S(e.$$.fragment,a),o=!0)},o(a){P(e.$$.fragment,a),o=!1},d(a){l[9](null),ne(e,a)}}}function Pf(l){let e,t,n=l[3]&&Hs(l);return{c(){n&&n.c(),e=Ue()},l(o){n&&n.l(o),e=Ue()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,[s]){o[3]?n?(n.p(o,s),s&8&&S(n,1)):(n=Hs(o),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(Oe(),P(n,1,1,()=>{n=null}),He())},i(o){t||(S(n),t=!0)},o(o){P(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function Of(l,e,t){const n=tn();let{prompt:o=""}=e,{files:s=[]}=e,i=!1,r=null;const a=()=>{r==null||r.selectUp()},c=()=>{r==null||r.selectDown()};let u="",f=!1;const h=async()=>{t(4,i=!0),await Promise.all([(async()=>{Oi.set(await Oc(localStorage.token))})(),(async()=>{Hi.set(await Hc(localStorage.token))})()]),t(4,i=!1)};function d(T){je[T?"unshift":"push"](()=>{r=T,t(5,r)})}function _(T){o=T,t(0,o)}function b(T){s=T,t(1,s)}function v(T){je[T?"unshift":"push"](()=>{r=T,t(5,r)})}function g(T){o=T,t(0,o)}const w=T=>{console.log(T),n("upload",{type:"youtube",data:T.detail})},y=T=>{console.log(T),n("upload",{type:"web",data:T.detail})},k=T=>{console.log(T),!s.find(L=>L.id===T.detail.id)&&(t(1,s=[...s,{...T.detail,status:"processed"}]),n("select"))};function I(T){je[T?"unshift":"push"](()=>{r=T,t(5,r)})}const V=T=>{t(0,o=$l(o,u)),n("select",{type:"model",data:T.detail})};return l.$$set=T=>{"prompt"in T&&t(0,o=T.prompt),"files"in T&&t(1,s=T.files)},l.$$.update=()=>{var T,L;l.$$.dirty&1&&t(2,u=((L=(T=o==null?void 0:o.split(`
`).pop())==null?void 0:T.split(" "))==null?void 0:L.pop())??""),l.$$.dirty&4&&t(3,f=["/","#","@"].includes(u==null?void 0:u.charAt(0))||u.slice(0,2)==="\\#"),l.$$.dirty&8&&f&&h()},[o,s,u,f,i,r,n,a,c,d,_,b,v,g,w,y,k,I,V]}class Hf extends Ae{constructor(e){super(),Le(this,e,Of,Pf,We,{prompt:0,files:1,selectUp:7,selectDown:8})}get selectUp(){return this.$$.ctx[7]}get selectDown(){return this.$$.ctx[8]}}function Bs(l,e,t){const n=l.slice();return n[82]=e[t],n[84]=t,n}function As(l,e,t){const n=l.slice();return n[85]=e[t],n[87]=t,n}function Ls(l){var W;let e,t,n,o,s,i,r,a,c,u,f,h,d,_,b,v,g,w,y,k,I,V,T,L,O=l[6]===!1&&((W=l[11])==null?void 0:W.currentId)&&Rs(l),H=(l[0]!==void 0||l[3].length>0||l[5]||l[4])&&Us(l);function F(j){l[40](j)}function Y(j){l[41](j)}let G={};l[1]!==void 0&&(G.prompt=l[1]),l[2]!==void 0&&(G.files=l[2]),a=new Hf({props:G}),l[39](a),je.push(()=>qe(a,"prompt",F)),je.push(()=>qe(a,"files",Y)),a.$on("upload",l[42]),a.$on("select",l[43]);const D=[Lf,Af],K=[];function M(j,Z){return j[16]?0:1}return w=M(l),y=K[w]=D[w](l),{c(){e=z("div"),t=z("div"),n=z("div"),o=z("div"),O&&O.c(),s=x(),i=z("div"),H&&H.c(),r=x(),ee(a.$$.fragment),h=x(),d=z("div"),_=z("div"),b=z("div"),v=z("input"),g=x(),y.c(),this.h()},l(j){e=N(j,"DIV",{class:!0});var Z=C(e);t=N(Z,"DIV",{class:!0});var A=C(t);n=N(A,"DIV",{class:!0});var X=C(n);o=N(X,"DIV",{class:!0});var q=C(o);O&&O.l(q),q.forEach(p),s=$(X),i=N(X,"DIV",{class:!0});var se=C(i);H&&H.l(se),r=$(se),oe(a.$$.fragment,se),se.forEach(p),X.forEach(p),A.forEach(p),h=$(Z),d=N(Z,"DIV",{class:!0});var J=C(d);_=N(J,"DIV",{class:!0});var me=C(_);b=N(me,"DIV",{class:!0});var _e=C(b);v=N(_e,"INPUT",{type:!0}),g=$(_e),y.l(_e),_e.forEach(p),me.forEach(p),J.forEach(p),Z.forEach(p),this.h()},h(){var j,Z;m(o,"class","relative"),m(i,"class","w-full relative"),m(n,"class",f="flex flex-col px-3 "+(((j=l[23])==null?void 0:j.widescreenMode)??null?"max-w-full":"max-w-6xl")+" w-full"),m(t,"class","mx-auto inset-x-0 bg-transparent flex justify-center"),m(v,"type","file"),v.hidden=!0,v.multiple=!0,m(b,"class",""),m(_,"class",k=(((Z=l[23])==null?void 0:Z.widescreenMode)??null?"max-w-full":"max-w-6xl")+" px-2.5 mx-auto inset-x-0"),m(d,"class",I=l[7]?"bg-transparent":"bg-white dark:bg-gray-900"),m(e,"class","w-full font-primary")},m(j,Z){B(j,e,Z),E(e,t),E(t,n),E(n,o),O&&O.m(o,null),E(n,s),E(n,i),H&&H.m(i,null),E(i,r),te(a,i,null),E(e,h),E(e,d),E(d,_),E(_,b),E(b,v),l[44](v),E(b,g),K[w].m(b,null),V=!0,T||(L=[ke(v,"change",l[45]),ke(v,"change",l[46])],T=!0)},p(j,Z){var q,se,J;j[6]===!1&&((q=j[11])!=null&&q.currentId)?O?O.p(j,Z):(O=Rs(j),O.c(),O.m(o,null)):O&&(O.d(1),O=null),j[0]!==void 0||j[3].length>0||j[5]||j[4]?H?(H.p(j,Z),Z[0]&57&&S(H,1)):(H=Us(j),H.c(),S(H,1),H.m(i,r)):H&&(Oe(),P(H,1,1,()=>{H=null}),He());const A={};!c&&Z[0]&2&&(c=!0,A.prompt=j[1],Ge(()=>c=!1)),!u&&Z[0]&4&&(u=!0,A.files=j[2],Ge(()=>u=!1)),a.$set(A),(!V||Z[0]&8388608&&f!==(f="flex flex-col px-3 "+(((se=j[23])==null?void 0:se.widescreenMode)??null?"max-w-full":"max-w-6xl")+" w-full"))&&m(n,"class",f);let X=w;w=M(j),w===X?K[w].p(j,Z):(Oe(),P(K[X],1,1,()=>{K[X]=null}),He(),y=K[w],y?y.p(j,Z):(y=K[w]=D[w](j),y.c()),S(y,1),y.m(b,null)),(!V||Z[0]&8388608&&k!==(k=(((J=j[23])==null?void 0:J.widescreenMode)??null?"max-w-full":"max-w-6xl")+" px-2.5 mx-auto inset-x-0"))&&m(_,"class",k),(!V||Z[0]&128&&I!==(I=j[7]?"bg-transparent":"bg-white dark:bg-gray-900"))&&m(d,"class",I)},i(j){V||(S(H),S(a.$$.fragment,j),S(y),V=!0)},o(j){P(H),P(a.$$.fragment,j),P(y),V=!1},d(j){j&&p(e),O&&O.d(),H&&H.d(),l[39](null),ne(a),l[44](null),K[w].d(),T=!1,en(L)}}}function Rs(l){let e,t,n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z" clip-rule="evenodd"></path></svg>',o,s;return{c(){e=z("div"),t=z("button"),t.innerHTML=n,this.h()},l(i){e=N(i,"DIV",{class:!0});var r=C(e);t=N(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ft(t)!=="svelte-h8r9o0"&&(t.innerHTML=n),r.forEach(p),this.h()},h(){m(t,"class","bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full pointer-events-auto"),m(e,"class","absolute -top-12 left-0 right-0 flex justify-center z-30 pointer-events-none")},m(i,r){B(i,e,r),E(e,t),o||(s=ke(t,"click",l[35]),o=!0)},p:we,d(i){i&&p(e),o=!1,s()}}}function Us(l){let e,t,n,o,s,i=l[3].length>0&&Ws(l),r=l[4]&&Ys(l),a=l[5]&&Zs(l),c=l[0]!==void 0&&Xs(l);return{c(){e=z("div"),i&&i.c(),t=x(),r&&r.c(),n=x(),a&&a.c(),o=x(),c&&c.c(),this.h()},l(u){e=N(u,"DIV",{class:!0});var f=C(e);i&&i.l(f),t=$(f),r&&r.l(f),n=$(f),a&&a.l(f),o=$(f),c&&c.l(f),f.forEach(p),this.h()},h(){m(e,"class","px-3 pb-0.5 pt-1.5 text-left w-full flex flex-col absolute bottom-0 left-0 right-0 bg-gradient-to-t from-white dark:from-gray-900 z-10")},m(u,f){B(u,e,f),i&&i.m(e,null),E(e,t),r&&r.m(e,null),E(e,n),a&&a.m(e,null),E(e,o),c&&c.m(e,null),s=!0},p(u,f){u[3].length>0?i?(i.p(u,f),f[0]&8&&S(i,1)):(i=Ws(u),i.c(),S(i,1),i.m(e,t)):i&&(Oe(),P(i,1,1,()=>{i=null}),He()),u[4]?r?r.p(u,f):(r=Ys(u),r.c(),r.m(e,n)):r&&(r.d(1),r=null),u[5]?a?a.p(u,f):(a=Zs(u),a.c(),a.m(e,o)):a&&(a.d(1),a=null),u[0]!==void 0?c?(c.p(u,f),f[0]&1&&S(c,1)):(c=Xs(u),c.c(),S(c,1),c.m(e,null)):c&&(Oe(),P(c,1,1,()=>{c=null}),He())},i(u){s||(S(i),S(c),s=!0)},o(u){P(i),P(c),s=!1},d(u){u&&p(e),i&&i.d(),r&&r.d(),a&&a.d(),c&&c.d()}}}function Ws(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-yellow-500"></span></span>',s,i,r=[],a=new Map,c,u=wt(l[3].map(l[36]));const f=h=>h[87];for(let h=0;h<u.length;h+=1){let d=As(l,u,h),_=f(d);a.set(_,r[h]=Fs(_,d))}return{c(){e=z("div"),t=z("div"),n=z("div"),n.innerHTML=o,s=x(),i=z("div");for(let h=0;h<r.length;h+=1)r[h].c();this.h()},l(h){e=N(h,"DIV",{class:!0});var d=C(e);t=N(d,"DIV",{class:!0});var _=C(t);n=N(_,"DIV",{class:!0,"data-svelte-h":!0}),ft(n)!=="svelte-1exsj7u"&&(n.innerHTML=o),s=$(_),i=N(_,"DIV",{class:!0});var b=C(i);for(let v=0;v<r.length;v+=1)r[v].l(b);b.forEach(p),_.forEach(p),d.forEach(p),this.h()},h(){m(n,"class","pl-1"),m(i,"class","text-ellipsis line-clamp-1 flex"),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(h,d){B(h,e,d),E(e,t),E(t,n),E(t,s),E(t,i);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(i,null);c=!0},p(h,d){d[0]&67108872&&(u=wt(h[3].map(h[36])),Oe(),r=ho(r,d,f,1,h,u,a,i,mo,Fs,null,As),He())},i(h){if(!c){for(let d=0;d<u.length;d+=1)S(r[d]);c=!0}},o(h){for(let d=0;d<r.length;d+=1)P(r[d]);c=!1},d(h){h&&p(e);for(let d=0;d<r.length;d+=1)r[d].d()}}}function Bf(l){let e=l[85].name+"",t;return{c(){t=Ce(e)},l(n){t=De(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&67108872&&e!==(e=n[85].name+"")&&Ne(t,e)},d(n){n&&p(t)}}}function js(l){let e,t=", ";return{c(){e=z("span"),e.textContent=t},l(n){e=N(n,"SPAN",{"data-svelte-h":!0}),ft(e)!=="svelte-1okzske"&&(e.textContent=t)},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function Fs(l,e){var a,c;let t,n,o,s,i;n=new Xt({props:{content:((c=(a=e[85])==null?void 0:a.meta)==null?void 0:c.description)??"",className:" "+(e[87]!==0?"pl-0.5":"")+" flex-shrink-0",placement:"top",$$slots:{default:[Bf]},$$scope:{ctx:e}}});let r=e[87]!==e[3].length-1&&js();return{key:l,first:null,c(){t=Ue(),ee(n.$$.fragment),o=x(),r&&r.c(),s=Ue(),this.h()},l(u){t=Ue(),oe(n.$$.fragment,u),o=$(u),r&&r.l(u),s=Ue(),this.h()},h(){this.first=t},m(u,f){B(u,t,f),te(n,u,f),B(u,o,f),r&&r.m(u,f),B(u,s,f),i=!0},p(u,f){var d,_;e=u;const h={};f[0]&67108872&&(h.content=((_=(d=e[85])==null?void 0:d.meta)==null?void 0:_.description)??""),f[0]&67108872&&(h.className=" "+(e[87]!==0?"pl-0.5":"")+" flex-shrink-0"),f[0]&67108872|f[2]&67108864&&(h.$$scope={dirty:f,ctx:e}),n.$set(h),e[87]!==e[3].length-1?r||(r=js(),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},i(u){i||(S(n.$$.fragment,u),i=!0)},o(u){P(n.$$.fragment,u),i=!1},d(u){u&&(p(t),p(o),p(s)),ne(n,u),r&&r.d(u)}}}function Ys(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-green-500"></span></span>',s,i,r=l[24].t("Image generation")+"",a;return{c(){e=z("div"),t=z("div"),n=z("div"),n.innerHTML=o,s=x(),i=z("div"),a=Ce(r),this.h()},l(c){e=N(c,"DIV",{class:!0});var u=C(e);t=N(u,"DIV",{class:!0});var f=C(t);n=N(f,"DIV",{class:!0,"data-svelte-h":!0}),ft(n)!=="svelte-12j611w"&&(n.innerHTML=o),s=$(f),i=N(f,"DIV",{class:!0});var h=C(i);a=De(h,r),h.forEach(p),f.forEach(p),u.forEach(p),this.h()},h(){m(n,"class","pl-1"),m(i,"class",""),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(c,u){B(c,e,u),E(e,t),E(t,n),E(t,s),E(t,i),E(i,a)},p(c,u){u[0]&16777216&&r!==(r=c[24].t("Image generation")+"")&&Ne(a,r)},d(c){c&&p(e)}}}function Zs(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-green-500"></span></span>',s,i,r=l[24].t("Search the web")+"",a;return{c(){e=z("div"),t=z("div"),n=z("div"),n.innerHTML=o,s=x(),i=z("div"),a=Ce(r),this.h()},l(c){e=N(c,"DIV",{class:!0});var u=C(e);t=N(u,"DIV",{class:!0});var f=C(t);n=N(f,"DIV",{class:!0,"data-svelte-h":!0}),ft(n)!=="svelte-12j611w"&&(n.innerHTML=o),s=$(f),i=N(f,"DIV",{class:!0});var h=C(i);a=De(h,r),h.forEach(p),f.forEach(p),u.forEach(p),this.h()},h(){m(n,"class","pl-1"),m(i,"class",""),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(c,u){B(c,e,u),E(e,t),E(t,n),E(t,s),E(t,i),E(i,a)},p(c,u){u[0]&16777216&&r!==(r=c[24].t("Search the web")+"")&&Ne(a,r)},d(c){c&&p(e)}}}function Xs(l){let e,t,n,o,s,i,r,a,c=l[0].name+"",u,f,h,d,_,b,v,g;return _=new bo({}),{c(){e=z("div"),t=z("div"),n=z("img"),s=x(),i=z("div"),r=Ce("Talking to "),a=z("span"),u=Ce(c),f=x(),h=z("div"),d=z("button"),ee(_.$$.fragment),this.h()},l(w){e=N(w,"DIV",{class:!0});var y=C(e);t=N(y,"DIV",{class:!0});var k=C(t);n=N(k,"IMG",{crossorigin:!0,alt:!0,class:!0,src:!0}),s=$(k),i=N(k,"DIV",{class:!0});var I=C(i);r=De(I,"Talking to "),a=N(I,"SPAN",{class:!0});var V=C(a);u=De(V,c),V.forEach(p),I.forEach(p),k.forEach(p),f=$(y),h=N(y,"DIV",{});var T=C(h);d=N(T,"BUTTON",{class:!0});var L=C(d);oe(_.$$.fragment,L),L.forEach(p),T.forEach(p),y.forEach(p),this.h()},h(){var w,y,k;m(n,"crossorigin","anonymous"),m(n,"alt","model profile"),m(n,"class","size-3.5 max-w-[28px] object-cover rounded-full"),Xn(n.src,o=((k=(y=(w=l[13].find(l[37]))==null?void 0:w.info)==null?void 0:y.meta)==null?void 0:k.profile_image_url)??(l[24].language==="dg-DG"?"/doge.png":`${Tl}/static/favicon.png`))||m(n,"src",o),m(a,"class","font-medium"),m(i,"class","translate-y-[0.5px]"),m(t,"class","pl-[1px] flex items-center gap-2 text-sm dark:text-gray-500"),m(d,"class","flex items-center dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(w,y){B(w,e,y),E(e,t),E(t,n),E(t,s),E(t,i),E(i,r),E(i,a),E(a,u),E(e,f),E(e,h),E(h,d),te(_,d,null),b=!0,v||(g=ke(d,"click",l[38]),v=!0)},p(w,y){var k,I,V;(!b||y[0]&16785409&&!Xn(n.src,o=((V=(I=(k=w[13].find(w[37]))==null?void 0:k.info)==null?void 0:I.meta)==null?void 0:V.profile_image_url)??(w[24].language==="dg-DG"?"/doge.png":`${Tl}/static/favicon.png`)))&&m(n,"src",o),(!b||y[0]&1)&&c!==(c=w[0].name+"")&&Ne(u,c)},i(w){b||(S(_.$$.fragment,w),b=!0)},o(w){P(_.$$.fragment,w),b=!1},d(w){w&&p(e),ne(_),v=!1,g()}}}function Af(l){var j,Z;let e,t,n,o,s,i,r,a,c,u,f,h,d,_,b,v,g,w,y,k,I,V=l[2].length>0&&Ks(l);function T(A){l[57](A)}function L(A){l[58](A)}function O(A){l[59](A)}let H={screenCaptureHandler:l[31],uploadFilesHandler:l[54],uploadGoogleDriveHandler:l[55],onClose:l[56],$$slots:{default:[jf]},$$scope:{ctx:l}};l[4]!==void 0&&(H.imageGenerationEnabled=l[4]),l[5]!==void 0&&(H.webSearchEnabled=l[5]),l[3]!==void 0&&(H.selectedToolIds=l[3]),i=new sf({props:H}),je.push(()=>qe(i,"imageGenerationEnabled",T)),je.push(()=>qe(i,"webSearchEnabled",L)),je.push(()=>qe(i,"selectedToolIds",O));const F=[Yf,Ff],Y=[];function G(A,X){var q;return((q=A[23])==null?void 0:q.richTextInput)??!0?0:1}f=G(l),h=Y[f]=F[f](l);let D=(!((j=l[11])!=null&&j.currentId)||((Z=l[11].messages[l[11].currentId])==null?void 0:Z.done)==!0)&&Js(l);const K=[Kf,Xf],M=[];function W(A,X){var q;return!A[11].currentId||((q=A[11].messages[A[11].currentId])==null?void 0:q.done)==!0?0:1}return v=W(l),g=M[v]=K[v](l),{c(){e=z("form"),t=z("div"),V&&V.c(),n=x(),o=z("div"),s=z("div"),ee(i.$$.fragment),u=x(),h.c(),d=x(),_=z("div"),D&&D.c(),b=x(),g.c(),this.h()},l(A){e=N(A,"FORM",{class:!0});var X=C(e);t=N(X,"DIV",{class:!0,dir:!0});var q=C(t);V&&V.l(q),n=$(q),o=N(q,"DIV",{class:!0});var se=C(o);s=N(se,"DIV",{class:!0});var J=C(s);oe(i.$$.fragment,J),J.forEach(p),u=$(se),h.l(se),d=$(se),_=N(se,"DIV",{class:!0});var me=C(_);D&&D.l(me),b=$(me),g.l(me),me.forEach(p),se.forEach(p),q.forEach(p),X.forEach(p),this.h()},h(){var A;m(s,"class","ml-1 self-end mb-1.5 flex space-x-1"),m(_,"class","self-end mb-1.5 flex space-x-1 mr-1"),m(o,"class","flex"),m(t,"class","flex-1 flex flex-col relative w-full rounded-3xl px-1 bg-gray-600/5 dark:bg-gray-400/5 dark:text-gray-100"),m(t,"dir",w=((A=l[23])==null?void 0:A.chatDirection)??"LTR"),m(e,"class","w-full flex gap-1.5")},m(A,X){B(A,e,X),E(e,t),V&&V.m(t,null),E(t,n),E(t,o),E(o,s),te(i,s,null),E(o,u),Y[f].m(o,null),E(o,d),E(o,_),D&&D.m(_,null),E(_,b),M[v].m(_,null),y=!0,k||(I=ke(e,"submit",Vi(l[75])),k=!0)},p(A,X){var me,_e,ie;A[2].length>0?V?(V.p(A,X),X[0]&4&&S(V,1)):(V=Ks(A),V.c(),S(V,1),V.m(t,n)):V&&(Oe(),P(V,1,1,()=>{V=null}),He());const q={};X[0]&262144&&(q.uploadFilesHandler=A[54]),X[0]&16777216&&(q.uploadGoogleDriveHandler=A[55]),X[2]&67108864&&(q.$$scope={dirty:X,ctx:A}),!r&&X[0]&16&&(r=!0,q.imageGenerationEnabled=A[4],Ge(()=>r=!1)),!a&&X[0]&32&&(a=!0,q.webSearchEnabled=A[5],Ge(()=>a=!1)),!c&&X[0]&8&&(c=!0,q.selectedToolIds=A[3],Ge(()=>c=!1)),i.$set(q);let se=f;f=G(A),f===se?Y[f].p(A,X):(Oe(),P(Y[se],1,1,()=>{Y[se]=null}),He(),h=Y[f],h?h.p(A,X):(h=Y[f]=F[f](A),h.c()),S(h,1),h.m(o,d)),!((me=A[11])!=null&&me.currentId)||((_e=A[11].messages[A[11].currentId])==null?void 0:_e.done)==!0?D?(D.p(A,X),X[0]&2048&&S(D,1)):(D=Js(A),D.c(),S(D,1),D.m(_,b)):D&&(Oe(),P(D,1,1,()=>{D=null}),He());let J=v;v=W(A),v===J?M[v].p(A,X):(Oe(),P(M[J],1,1,()=>{M[J]=null}),He(),g=M[v],g?g.p(A,X):(g=M[v]=K[v](A),g.c()),S(g,1),g.m(_,null)),(!y||X[0]&8388608&&w!==(w=((ie=A[23])==null?void 0:ie.chatDirection)??"LTR"))&&m(t,"dir",w)},i(A){y||(S(V),S(i.$$.fragment,A),S(h),S(D),S(g),y=!0)},o(A){P(V),P(i.$$.fragment,A),P(h),P(D),P(g),y=!1},d(A){A&&p(e),V&&V.d(),ne(i),Y[f].d(),D&&D.d(),M[v].d(),k=!1,I()}}}function Lf(l){let e,t,n;function o(i){l[47](i)}let s={};return l[16]!==void 0&&(s.recording=l[16]),e=new Nc({props:s}),je.push(()=>qe(e,"recording",o)),e.$on("cancel",l[48]),e.$on("confirm",l[49]),{c(){ee(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){te(e,i,r),n=!0},p(i,r){const a={};!t&&r[0]&65536&&(t=!0,a.recording=i[16],Ge(()=>t=!1)),e.$set(a)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){P(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Ks(l){let e,t,n=wt(l[2]),o=[];for(let i=0;i<n.length;i+=1)o[i]=qs(Bs(l,n,i));const s=i=>P(o[i],1,1,()=>{o[i]=null});return{c(){e=z("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=N(i,"DIV",{class:!0});var r=C(e);for(let a=0;a<o.length;a+=1)o[a].l(r);r.forEach(p),this.h()},h(){m(e,"class","mx-1 mt-2.5 mb-1 flex items-center flex-wrap gap-2")},m(i,r){B(i,e,r);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);t=!0},p(i,r){if(r[0]&20972549){n=wt(i[2]);let a;for(a=0;a<n.length;a+=1){const c=Bs(i,n,a);o[a]?(o[a].p(c,r),S(o[a],1)):(o[a]=qs(c),o[a].c(),S(o[a],1),o[a].m(e,null))}for(Oe(),a=n.length;a<o.length;a+=1)s(a);He()}},i(i){if(!t){for(let r=0;r<n.length;r+=1)S(o[r]);t=!0}},o(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)P(o[r]);t=!1},d(i){i&&p(e),Sn(o,i)}}}function Rf(l){var s;let e,t;function n(){return l[52](l[82],l[84])}function o(){return l[53](l[82])}return e=new Ri({props:{item:l[82],name:l[82].name,type:l[82].type,size:(s=l[82])==null?void 0:s.size,loading:l[82].status==="uploading",dismissible:!0,edit:!0}}),e.$on("dismiss",n),e.$on("click",o),{c(){ee(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){te(e,i,r),t=!0},p(i,r){var c;l=i;const a={};r[0]&4&&(a.item=l[82]),r[0]&4&&(a.name=l[82].name),r[0]&4&&(a.type=l[82].type),r[0]&4&&(a.size=(c=l[82])==null?void 0:c.size),r[0]&4&&(a.loading=l[82].status==="uploading"),e.$set(a)},i(i){t||(S(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){ne(e,i)}}}function Uf(l){let e,t,n,o,s,i,r,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,u,f,h;n=new Lc({props:{src:l[82].url,alt:"input",imageClassName:" size-14 rounded-xl object-cover"}});let d=(l[0]?l[22].length===0:l[10].length!==l[22].length)&&Gs(l);function _(){return l[51](l[84])}return{c(){e=z("div"),t=z("div"),ee(n.$$.fragment),o=x(),d&&d.c(),s=x(),i=z("div"),r=z("button"),r.innerHTML=a,c=x(),this.h()},l(b){e=N(b,"DIV",{class:!0});var v=C(e);t=N(v,"DIV",{class:!0});var g=C(t);oe(n.$$.fragment,g),o=$(g),d&&d.l(g),g.forEach(p),s=$(v),i=N(v,"DIV",{class:!0});var w=C(i);r=N(w,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ft(r)!=="svelte-1lyw8tj"&&(r.innerHTML=a),w.forEach(p),c=$(v),v.forEach(p),this.h()},h(){m(t,"class","relative flex items-center"),m(r,"class","bg-gray-400 text-white border border-white rounded-full group-hover:visible invisible transition"),m(r,"type","button"),m(i,"class","absolute -top-1 -right-1"),m(e,"class","relative group")},m(b,v){B(b,e,v),E(e,t),te(n,t,null),E(t,o),d&&d.m(t,null),E(e,s),E(e,i),E(i,r),E(e,c),u=!0,f||(h=ke(r,"click",_),f=!0)},p(b,v){l=b;const g={};v[0]&4&&(g.src=l[82].url),n.$set(g),(l[0]?l[22].length===0:l[10].length!==l[22].length)?d?(d.p(l,v),v[0]&4195329&&S(d,1)):(d=Gs(l),d.c(),S(d,1),d.m(t,null)):d&&(Oe(),P(d,1,1,()=>{d=null}),He())},i(b){u||(S(n.$$.fragment,b),S(d),u=!0)},o(b){P(n.$$.fragment,b),P(d),u=!1},d(b){b&&p(e),ne(n),d&&d.d(),f=!1,h()}}}function Gs(l){let e,t;return e=new Xt({props:{className:" absolute top-1 left-1",content:l[24].t("{{ models }}",{models:[...l[0]?[l[0]]:l[10]].filter(l[50]).join(", ")}),$$slots:{default:[Wf]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&20972545&&(s.content=n[24].t("{{ models }}",{models:[...n[0]?[n[0]]:n[10]].filter(n[50]).join(", ")})),o[2]&67108864&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Wf(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=C(e);t=ze(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"),m(t,"clip-rule","evenodd"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"class","size-4 fill-yellow-300")},m(n,o){B(n,e,o),E(e,t)},p:we,d(n){n&&p(e)}}}function qs(l){let e,t,n,o;const s=[Uf,Rf],i=[];function r(a,c){return a[82].type==="image"?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ue()},l(a){t.l(a),n=Ue()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(Oe(),P(i[u],1,1,()=>{i[u]=null}),He(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){P(t),o=!1},d(a){a&&p(n),i[e].d(a)}}}function jf(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"></path></svg>';return{c(){e=z("button"),e.innerHTML=t,this.h()},l(n){e=N(n,"BUTTON",{class:!0,type:!0,"aria-label":!0,"data-svelte-h":!0}),ft(e)!=="svelte-1twyzih"&&(e.innerHTML=t),this.h()},h(){m(e,"class","bg-transparent hover:bg-white/80 text-gray-800 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-2 outline-none focus:outline-none"),m(e,"type","button"),m(e,"aria-label","More")},m(n,o){B(n,e,o)},p:we,d(n){n&&p(e)}}}function Ff(l){let e,t,n,o;return{c(){e=z("textarea"),this.h()},l(s){e=N(s,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),C(e).forEach(p),this.h()},h(){m(e,"id","chat-input"),m(e,"class","scrollbar-hidden bg-transparent dark:text-gray-100 outline-none w-full py-3 px-1 rounded-xl resize-none h-[48px]"),m(e,"placeholder",t=l[12]?l[12]:l[24].t("Send a Message")),m(e,"rows","1")},m(s,i){B(s,e,i),l[65](e),In(e,l[1]),n||(o=[ke(e,"input",l[66]),ke(e,"keypress",l[67]),ke(e,"keydown",l[68]),ke(e,"input",l[69]),ke(e,"focus",l[70]),ke(e,"paste",l[71])],n=!0)},p(s,i){i[0]&16781312&&t!==(t=s[12]?s[12]:s[24].t("Send a Message"))&&m(e,"placeholder",t),i[0]&2&&In(e,s[1])},i:we,o:we,d(s){s&&p(e),l[65](null),n=!1,en(o)}}}function Yf(l){var r;let e,t,n,o;function s(a){l[62](a)}let i={id:"chat-input",messageInput:!0,shiftEnter:!l[27]||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),placeholder:l[12]?l[12]:l[24].t("Send a Message"),largeTextAsFile:((r=l[23])==null?void 0:r.largeTextAsFile)??!1,autocomplete:!0,generateAutoCompletion:l[60]};return l[1]!==void 0&&(i.value=l[1]),t=new Pc({props:i}),l[61](t),je.push(()=>qe(t,"value",s)),t.$on("keydown",l[63]),t.$on("paste",l[64]),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(a){e=N(a,"DIV",{class:!0});var c=C(e);oe(t.$$.fragment,c),c.forEach(p),this.h()},h(){m(e,"class","scrollbar-hidden text-left bg-transparent dark:text-gray-100 outline-none w-full py-2.5 px-1 rounded-xl resize-none h-fit max-h-80 overflow-auto")},m(a,c){B(a,e,c),te(t,e,null),o=!0},p(a,c){var f;const u={};c[0]&134217728&&(u.shiftEnter=!a[27]||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)),c[0]&16781312&&(u.placeholder=a[12]?a[12]:a[24].t("Send a Message")),c[0]&8388608&&(u.largeTextAsFile=((f=a[23])==null?void 0:f.largeTextAsFile)??!1),c[0]&16795648&&(u.generateAutoCompletion=a[60]),!n&&c[0]&2&&(n=!0,u.value=a[1],Ge(()=>n=!1)),t.$set(u)},i(a){o||(S(t.$$.fragment,a),o=!0)},o(a){P(t.$$.fragment,a),o=!1},d(a){a&&p(e),l[61](null),ne(t)}}}function Js(l){let e,t;return e=new Xt({props:{content:l[24].t("Record voice"),$$slots:{default:[Zf]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&16777216&&(s.content=n[24].t("Record voice")),o[0]&16842752|o[2]&67108864&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Zf(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 translate-y-[0.5px]"><path d="M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z"></path><path d="M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z"></path></svg>',n,o;return{c(){e=z("button"),e.innerHTML=t,this.h()},l(s){e=N(s,"BUTTON",{id:!0,class:!0,type:!0,"aria-label":!0,"data-svelte-h":!0}),ft(e)!=="svelte-4nqm9k"&&(e.innerHTML=t),this.h()},h(){m(e,"id","voice-input-button"),m(e,"class","text-gray-600 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-200 transition rounded-full p-1.5 mr-0.5 self-center"),m(e,"type","button"),m(e,"aria-label","Voice Input")},m(s,i){B(s,e,i),n||(o=ke(e,"click",l[72]),n=!0)},p:we,d(s){s&&p(e),n=!1,o()}}}function Xf(l){let e,t,n;return t=new Xt({props:{content:l[24].t("Stop"),$$slots:{default:[Gf]},$$scope:{ctx:l}}}),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);oe(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","flex items-center")},m(o,s){B(o,e,s),te(t,e,null),n=!0},p(o,s){const i={};s[0]&16777216&&(i.content=o[24].t("Stop")),s[0]&512|s[2]&67108864&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){o&&p(e),ne(t)}}}function Kf(l){let e,t,n,o;const s=[Jf,qf],i=[];function r(a,c){return a[1]===""?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ue()},l(a){t.l(a),n=Ue()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(Oe(),P(i[u],1,1,()=>{i[u]=null}),He(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){P(t),o=!1},d(a){a&&p(n),i[e].d(a)}}}function Gf(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 01-1.313-1.313V9.564z" clip-rule="evenodd"></path></svg>',n,o;return{c(){e=z("button"),e.innerHTML=t,this.h()},l(s){e=N(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-1tvpiky"&&(e.innerHTML=t),this.h()},h(){m(e,"class","bg-white hover:bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5")},m(s,i){B(s,e,i),n||(o=ke(e,"click",l[74]),n=!0)},p:we,d(s){s&&p(e),n=!1,o()}}}function qf(l){let e,t,n;return t=new Xt({props:{content:l[24].t("Send message"),$$slots:{default:[Qf]},$$scope:{ctx:l}}}),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);oe(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","flex items-center")},m(o,s){B(o,e,s),te(t,e,null),n=!0},p(o,s){const i={};s[0]&16777216&&(i.content=o[24].t("Send message")),s[0]&2|s[2]&67108864&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){o&&p(e),ne(t)}}}function Jf(l){let e,t,n;return t=new Xt({props:{content:l[24].t("Call"),$$slots:{default:[xf]},$$scope:{ctx:l}}}),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);oe(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","flex items-center")},m(o,s){B(o,e,s),te(t,e,null),n=!0},p(o,s){const i={};s[0]&16777216&&(i.content=o[24].t("Call")),s[0]&50332672|s[2]&67108864&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){o&&p(e),ne(t)}}}function Qf(l){let e,t,n,o,s;return{c(){e=z("button"),t=Ve("svg"),n=Ve("path"),this.h()},l(i){e=N(i,"BUTTON",{id:!0,class:!0,type:!0});var r=C(e);t=ze(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=C(t);n=ze(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(n).forEach(p),a.forEach(p),r.forEach(p),this.h()},h(){m(n,"fill-rule","evenodd"),m(n,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),m(n,"clip-rule","evenodd"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 16 16"),m(t,"fill","currentColor"),m(t,"class","size-6"),m(e,"id","send-message-button"),m(e,"class",o=(l[1]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 self-center"),m(e,"type","submit"),e.disabled=s=l[1]===""},m(i,r){B(i,e,r),E(e,t),E(t,n)},p(i,r){r[0]&2&&o!==(o=(i[1]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 self-center")&&m(e,"class",o),r[0]&2&&s!==(s=i[1]==="")&&(e.disabled=s)},d(i){i&&p(e)}}}function xf(l){let e,t,n,o,s;return t=new cf({props:{className:"size-5"}}),{c(){e=z("button"),ee(t.$$.fragment),this.h()},l(i){e=N(i,"BUTTON",{class:!0,type:!0,"aria-label":!0});var r=C(e);oe(t.$$.fragment,r),r.forEach(p),this.h()},h(){m(e,"class","bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full p-2 self-center"),m(e,"type","button"),m(e,"aria-label","Call")},m(i,r){B(i,e,r),te(t,e,null),n=!0,o||(s=ke(e,"click",l[73]),o=!0)},p:we,i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){i&&p(e),ne(t),o=!1,s()}}}function $f(l){let e,t,n,o;e=new Aa({props:{show:l[21]}});let s=l[15]&&Ls(l);return{c(){ee(e.$$.fragment),t=x(),s&&s.c(),n=Ue()},l(i){oe(e.$$.fragment,i),t=$(i),s&&s.l(i),n=Ue()},m(i,r){te(e,i,r),B(i,t,r),s&&s.m(i,r),B(i,n,r),o=!0},p(i,r){const a={};r[0]&2097152&&(a.show=i[21]),e.$set(a),i[15]?s?(s.p(i,r),r[0]&32768&&S(s,1)):(s=Ls(i),s.c(),S(s,1),s.m(n.parentNode,n)):s&&(Oe(),P(s,1,1,()=>{s=null}),He())},i(i){o||(S(e.$$.fragment,i),S(s),o=!0)},o(i){P(e.$$.fragment,i),P(s),o=!1},d(i){i&&(p(t),p(n)),ne(e,i),s&&s.d(i)}}}function ed(l,e,t){let n,o,s,i,r,a,c;ce(l,jn,U=>t(23,n=U)),ce(l,Al,U=>t(25,s=U)),ce(l,Kn,U=>t(76,i=U)),ce(l,cl,U=>t(13,r=U)),ce(l,il,U=>t(26,a=U)),ce(l,Ll,U=>t(27,c=U));const u=tn(),f=Lt("i18n");ce(l,f,U=>t(24,o=U));let{transparentBackground:h=!1}=e,{onChange:d=()=>{}}=e,{createMessagePair:_}=e,{stopResponse:b}=e,{autoScroll:v=!1}=e,{atSelectedModel:g=void 0}=e,{selectedModels:w}=e,y=[],{history:k}=e,{prompt:I=""}=e,{files:V=[]}=e,{selectedToolIds:T=[]}=e,{imageGenerationEnabled:L=!1}=e,{webSearchEnabled:O=!1}=e,H=!1,F=!1,Y,G,D,K,M=!1,{placeholder:W=""}=e,j=[];const Z=()=>{const U=document.getElementById("messages-container");U.scrollTo({top:U.scrollHeight,behavior:"smooth"})},A=async()=>{try{const U=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"never"},audio:!1}),Se=document.createElement("video");Se.srcObject=U,await Se.play();const Ze=document.createElement("canvas");Ze.width=Se.videoWidth,Ze.height=Se.videoHeight,Ze.getContext("2d").drawImage(Se,0,0,Ze.width,Ze.height),U.getTracks().forEach(at=>at.stop()),window.focus();const Ye=Ze.toDataURL("image/png");t(2,V=[...V,{type:"image",url:Ye}]),Se.srcObject=null}catch(U){console.error("Error capturing screen:",U)}},X=async(U,Se=!1)=>{var Ye,at,rn,ln;if((i==null?void 0:i.role)!=="admin"&&!(((at=(Ye=i==null?void 0:i.permissions)==null?void 0:Ye.chat)==null?void 0:at.file_upload)??!0))return nt.error(o.t("You do not have permission to upload files.")),null;const Ze=Jn(),$e={type:"file",file:"",id:null,url:"",name:U.name,collection_name:"",status:"uploading",size:U.size,error:"",itemId:Ze,...Se?{context:"full"}:{}};if($e.size==0)return nt.error(o.t("You cannot upload an empty file.")),null;if(t(2,V=[...V,$e]),["audio/mpeg","audio/wav","audio/ogg","audio/x-m4a"].includes(U.type)){const gt=await Li(localStorage.token,U).catch(Ut=>(nt.error(`${Ut}`),null));if(gt){console.log(gt);const Ut=new Blob([gt.text],{type:"text/plain"});U=Ai(Ut,`${U.name}.txt`),$e.name=U.name,$e.size=U.size}}try{const gt=await Tc(localStorage.token,U);gt?(console.log("File upload completed:",{id:gt.id,name:$e.name,collection:(rn=gt==null?void 0:gt.meta)==null?void 0:rn.collection_name}),gt.error&&(console.warn("File upload warning:",gt.error),nt.warning(gt.error)),$e.status="uploaded",$e.file=gt,$e.id=gt.id,$e.collection_name=((ln=gt==null?void 0:gt.meta)==null?void 0:ln.collection_name)||(gt==null?void 0:gt.collection_name),$e.url=`${Wa}/files/${gt.id}`,t(2,V)):t(2,V=V.filter(Ut=>(Ut==null?void 0:Ut.itemId)!==Ze))}catch(gt){nt.error(gt),t(2,V=V.filter(Ut=>(Ut==null?void 0:Ut.itemId)!==Ze))}},q=async U=>{console.log("Input files handler called with:",U),U.forEach(Se=>{var Ze,$e,Ye,at;if(console.log("Processing file:",{name:Se.name,type:Se.type,size:Se.size,extension:Se.name.split(".").at(-1)}),(((Ze=s==null?void 0:s.file)==null?void 0:Ze.max_size)??null)!==null&&Se.size>((($e=s==null?void 0:s.file)==null?void 0:$e.max_size)??0)*1024*1024){console.log("File exceeds max size limit:",{fileSize:Se.size,maxSize:(((Ye=s==null?void 0:s.file)==null?void 0:Ye.max_size)??0)*1024*1024}),nt.error(o.t("File size should not exceed {{maxSize}} MB.",{maxSize:(at=s==null?void 0:s.file)==null?void 0:at.max_size}));return}if(["image/gif","image/webp","image/jpeg","image/png"].includes(Se.type)){if(j.length===0){nt.error(o.t("Selected model(s) do not support image inputs"));return}let rn=new FileReader;rn.onload=async ln=>{var Ut,an;let gt=ln.target.result;if((n==null?void 0:n.imageCompression)??!1){const _n=((Ut=n==null?void 0:n.imageCompressionSize)==null?void 0:Ut.width)??null,kn=((an=n==null?void 0:n.imageCompressionSize)==null?void 0:an.height)??null;(_n||kn)&&(gt=await $a(gt,_n,kn))}t(2,V=[...V,{type:"image",url:`${gt}`}])},rn.readAsDataURL(Se)}else X(Se)})},se=U=>{U.key==="Escape"&&(console.log("Escape"),t(21,M=!1))},J=U=>{var Se,Ze;U.preventDefault(),(Ze=(Se=U.dataTransfer)==null?void 0:Se.types)!=null&&Ze.includes("Files")?t(21,M=!0):t(21,M=!1)},me=()=>{t(21,M=!1)},_e=async U=>{var Se,Ze;if(U.preventDefault(),console.log(U),(Se=U.dataTransfer)!=null&&Se.files){const $e=Array.from((Ze=U.dataTransfer)==null?void 0:Ze.files);$e&&$e.length>0&&(console.log($e),q($e))}t(21,M=!1)};gn(async()=>{t(15,H=!0),window.setTimeout(()=>{const Se=document.getElementById("chat-input");Se==null||Se.focus()},0),window.addEventListener("keydown",se),await Qe();const U=document.getElementById("chat-container");U==null||U.addEventListener("dragover",J),U==null||U.addEventListener("drop",_e),U==null||U.addEventListener("dragleave",me)}),$n(()=>{console.log("destroy"),window.removeEventListener("keydown",se);const U=document.getElementById("chat-container");U&&(U==null||U.removeEventListener("dragover",J),U==null||U.removeEventListener("drop",_e),U==null||U.removeEventListener("dragleave",me))});const ie=()=>{t(6,v=!0),Z()},le=U=>a?a.find(Se=>Se.id===U):{id:U,name:U},Pe=U=>U.id===g.id,ae=()=>{t(0,g=void 0)};function Re(U){je[U?"unshift":"push"](()=>{D=U,t(19,D)})}function Ie(U){I=U,t(1,I)}function Je(U){V=U,t(2,V)}const he=U=>{u("upload",U.detail)},rt=U=>{const Se=U.detail;(Se==null?void 0:Se.type)==="model"&&t(0,g=Se.data);const Ze=document.getElementById("chat-input");Ze==null||Ze.focus()};function it(U){je[U?"unshift":"push"](()=>{G=U,t(18,G)})}function Rt(){K=this.files,t(20,K)}const Mt=async()=>{if(K&&K.length>0){const U=Array.from(K);q(U)}else nt.error(o.t("File not found."));t(18,G.value="",G)};function bt(U){F=U,t(16,F)}const pe=async()=>{var U;t(16,F=!1),await Qe(),(U=document.getElementById("chat-input"))==null||U.focus()},Xe=async U=>{var $e;const{text:Se,filename:Ze}=U.detail;t(1,I=`${I}${Se} `),t(16,F=!1),await Qe(),($e=document.getElementById("chat-input"))==null||$e.focus(),((n==null?void 0:n.speechAutoSend)??!1)&&u("submit",I)},lt=U=>!j.includes(U),ht=U=>{V.splice(U,1),t(2,V)},pt=async(U,Se)=>{U.type!=="collection"&&!(U!=null&&U.collection)&&U.id&&await Vc(localStorage.token,U.id),V.splice(Se,1),t(2,V)},fe=U=>{console.log(U)},Et=()=>{G.click()},mt=async()=>{try{const U=await ju();if(U){const Se=new File([U.blob],U.name,{type:U.blob.type});await X(Se)}else console.log("No file was selected from Google Drive")}catch(U){console.error("Google Drive Error:",U),nt.error(o.t("Error accessing Google Drive: {{error}}",{error:U.message}))}},vt=async()=>{await Qe();const U=document.getElementById("chat-input");U==null||U.focus()};function Me(U){L=U,t(4,L)}function Vt(U){O=U,t(5,O)}function ue(U){T=U,t(3,T)}const Te=async U=>{(y.length===0||!y.at(0))&&nt.error(o.t("Please select a model first."));const Se=await vc(localStorage.token,y.at(0),U,k!=null&&k.currentId?lo(k,k.currentId):null).catch(Ze=>(console.log(Ze),null));return console.log(Se),Se};function Be(U){je[U?"unshift":"push"](()=>{Y=U,t(17,Y)})}function Ke(U){I=U,t(1,I)}const yt=async U=>{var $e;U=U.detail.event;const Se=U.ctrlKey||U.metaKey,Ze=document.getElementById("commands-container");if(U.key==="Escape"&&b(),Se&&U.key==="Enter"&&U.shiftKey&&(U.preventDefault(),_(I)),I===""&&Se&&U.key.toLowerCase()==="r"){U.preventDefault(),console.log("regenerate");const Ye=[...document.getElementsByClassName("regenerate-response-button")].at(-1);Ye==null||Ye.click()}if(I===""&&U.key=="ArrowUp"){U.preventDefault();const Ye=[...document.getElementsByClassName("user-message")].at(-1);if(Ye){Ye.scrollIntoView({block:"center"});const at=[...document.getElementsByClassName("edit-user-message-button")].at(-1);at==null||at.click()}}if(Ze){if(Ze&&U.key==="ArrowUp"&&(U.preventDefault(),D.selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ze&&U.key==="ArrowDown"&&(U.preventDefault(),D.selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ze&&U.key==="Tab"){U.preventDefault();const Ye=[...document.getElementsByClassName("selected-command-option-button")].at(-1);Ye==null||Ye.click()}if(Ze&&U.key==="Enter"){U.preventDefault();const Ye=[...document.getElementsByClassName("selected-command-option-button")].at(-1);Ye?Ye==null||Ye.click():($e=document.getElementById("send-message-button"))==null||$e.click()}}else(!c||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))&&(U.keyCode===13&&!U.shiftKey&&U.preventDefault(),I!==""&&U.keyCode===13&&!U.shiftKey&&u("submit",I));U.key==="Escape"&&(console.log("Escape"),t(0,g=void 0),t(3,T=[]),t(5,O=!1),t(4,L=!1))},It=async U=>{U=U.detail.event,console.log(U);const Se=U.clipboardData||window.clipboardData;if(Se&&Se.items){for(const Ze of Se.items)if(Ze.type.indexOf("image")!==-1){const $e=Ze.getAsFile(),Ye=new FileReader;Ye.onload=function(at){t(2,V=[...V,{type:"image",url:`${at.target.result}`}])},Ye.readAsDataURL($e)}else if(Ze.type==="text/plain"&&((n==null?void 0:n.largeTextAsFile)??!1)){const $e=Se.getData("text/plain");if($e.length>ss){U.preventDefault();const Ye=new Blob([$e],{type:"text/plain"}),at=new File([Ye],`Pasted_Text_${Date.now()}.txt`,{type:"text/plain"});await X(at,!0)}}}};function St(U){je[U?"unshift":"push"](()=>{Y=U,t(17,Y)})}function zt(){I=this.value,t(1,I)}const Bt=U=>{(!c||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))&&(U.key==="Enter"&&!U.shiftKey&&U.preventDefault(),I!==""&&U.key==="Enter"&&!U.shiftKey&&u("submit",I))},Nt=async U=>{var $e;const Se=U.ctrlKey||U.metaKey,Ze=document.getElementById("commands-container");if(U.key==="Escape"&&b(),Se&&U.key==="Enter"&&U.shiftKey&&(U.preventDefault(),_(I)),I===""&&Se&&U.key.toLowerCase()==="r"){U.preventDefault(),console.log("regenerate");const Ye=[...document.getElementsByClassName("regenerate-response-button")].at(-1);Ye==null||Ye.click()}if(I===""&&U.key=="ArrowUp"){U.preventDefault();const Ye=[...document.getElementsByClassName("user-message")].at(-1),at=[...document.getElementsByClassName("edit-user-message-button")].at(-1);console.log(Ye),Ye.scrollIntoView({block:"center"}),at==null||at.click()}if(Ze&&U.key==="ArrowUp"&&(U.preventDefault(),D.selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ze&&U.key==="ArrowDown"&&(U.preventDefault(),D.selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ze&&U.key==="Enter"){U.preventDefault();const Ye=[...document.getElementsByClassName("selected-command-option-button")].at(-1);U.shiftKey?t(1,I=`${I}
`):Ye?Ye==null||Ye.click():($e=document.getElementById("send-message-button"))==null||$e.click()}if(Ze&&U.key==="Tab"){U.preventDefault();const Ye=[...document.getElementsByClassName("selected-command-option-button")].at(-1);Ye==null||Ye.click()}else if(U.key==="Tab"){const Ye=ec(I);if(Ye.length>0){const at=Ye.at(0),rn=I;t(1,I=I.substring(0,(at==null?void 0:at.endIndex)+1)),await Qe(),U.target.scrollTop=U.target.scrollHeight,t(1,I=rn),await Qe(),U.preventDefault(),U.target.setSelectionRange(at==null?void 0:at.startIndex,at.endIndex+1)}U.target.style.height="",U.target.style.height=Math.min(U.target.scrollHeight,320)+"px"}U.key==="Escape"&&(console.log("Escape"),t(0,g=void 0),t(3,T=[]),t(5,O=!1),t(4,L=!1))},Ft=async U=>{U.target.style.height="",U.target.style.height=Math.min(U.target.scrollHeight,320)+"px"},Pt=async U=>{U.target.style.height="",U.target.style.height=Math.min(U.target.scrollHeight,320)+"px"},nn=async U=>{const Se=U.clipboardData||window.clipboardData;if(Se&&Se.items){for(const Ze of Se.items)if(Ze.type.indexOf("image")!==-1){const $e=Ze.getAsFile(),Ye=new FileReader;Ye.onload=function(at){t(2,V=[...V,{type:"image",url:`${at.target.result}`}])},Ye.readAsDataURL($e)}else if(Ze.type==="text/plain"&&((n==null?void 0:n.largeTextAsFile)??!1)){const $e=Se.getData("text/plain");if($e.length>ss){U.preventDefault();const Ye=new Blob([$e],{type:"text/plain"}),at=new File([Ye],`Pasted_Text_${Date.now()}.txt`,{type:"text/plain"});await X(at,!0)}}}},fn=async()=>{try{let U=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(Se){return nt.error(o.t("Permission denied when accessing microphone: {{error}}",{error:Se})),null});U&&(t(16,F=!0),U.getTracks().forEach(Ze=>Ze.stop())),U=null}catch{nt.error(o.t("Permission denied when accessing microphone"))}},sn=async()=>{if(w.length>1){nt.error(o.t("Select only one model to call"));return}if(s.audio.stt.engine==="web"){nt.error(o.t("Call feature is not supported when using Web STT engine"));return}try{let U=await navigator.mediaDevices.getUserMedia({audio:!0});U&&U.getTracks().forEach(Ze=>Ze.stop()),U=null,wn.set(!0),At.set(!0)}catch{nt.error(o.t("Permission denied when accessing media devices"))}},dn=()=>{b()},yn=()=>{u("submit",I)};return l.$$set=U=>{"transparentBackground"in U&&t(7,h=U.transparentBackground),"onChange"in U&&t(34,d=U.onChange),"createMessagePair"in U&&t(8,_=U.createMessagePair),"stopResponse"in U&&t(9,b=U.stopResponse),"autoScroll"in U&&t(6,v=U.autoScroll),"atSelectedModel"in U&&t(0,g=U.atSelectedModel),"selectedModels"in U&&t(10,w=U.selectedModels),"history"in U&&t(11,k=U.history),"prompt"in U&&t(1,I=U.prompt),"files"in U&&t(2,V=U.files),"selectedToolIds"in U&&t(3,T=U.selectedToolIds),"imageGenerationEnabled"in U&&t(4,L=U.imageGenerationEnabled),"webSearchEnabled"in U&&t(5,O=U.webSearchEnabled),"placeholder"in U&&t(12,W=U.placeholder)},l.$$.update=()=>{l.$$.dirty[0]&1025&&t(14,y=g!==void 0?[g.id]:w),l.$$.dirty[0]&62|l.$$.dirty[1]&8&&d({prompt:I,files:V,selectedToolIds:T,imageGenerationEnabled:L,webSearchEnabled:O}),l.$$.dirty[0]&9217&&t(22,j=[...g?[g]:w].filter(U=>{var Se,Ze,$e,Ye;return((Ye=($e=(Ze=(Se=r.find(at=>at.id===U))==null?void 0:Se.info)==null?void 0:Ze.meta)==null?void 0:$e.capabilities)==null?void 0:Ye.vision)??!0}))},[g,I,V,T,L,O,v,h,_,b,w,k,W,r,y,H,F,Y,G,D,K,M,j,n,o,s,a,c,u,f,Z,A,X,q,d,ie,le,Pe,ae,Re,Ie,Je,he,rt,it,Rt,Mt,bt,pe,Xe,lt,ht,pt,fe,Et,mt,vt,Me,Vt,ue,Te,Be,Ke,yt,It,St,zt,Bt,Nt,Ft,Pt,nn,fn,sn,dn,yn]}class Xi extends Ae{constructor(e){super(),Le(this,e,ed,$f,We,{transparentBackground:7,onChange:34,createMessagePair:8,stopResponse:9,autoScroll:6,atSelectedModel:0,selectedModels:10,history:11,prompt:1,files:2,selectedToolIds:3,imageGenerationEnabled:4,webSearchEnabled:5,placeholder:12},null,[-1,-1,-1])}}function Qs(l,e,t){const n=l.slice();return n[12]=e[t],n[13]=e,n[14]=t,n}function td(l){let e,t,n;return t=new Xt({props:{content:l[4].t("Remove Model"),$$slots:{default:[ld]},$$scope:{ctx:l}}}),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);oe(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","self-center mx-1 disabled:text-gray-600 disabled:hover:text-gray-600 -translate-y-[0.5px]")},m(o,s){B(o,e,s),te(t,e,null),n=!0},p(o,s){const i={};s&16&&(i.content=o[4].t("Remove Model")),s&32771&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){o&&p(e),ne(t)}}}function nd(l){let e,t,n;return t=new Xt({props:{content:l[4].t("Add Model"),$$slots:{default:[od]},$$scope:{ctx:l}}}),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);oe(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","self-center mx-1 disabled:text-gray-600 disabled:hover:text-gray-600 -translate-y-[0.5px]")},m(o,s){B(o,e,s),te(t,e,null),n=!0},p(o,s){const i={};s&16&&(i.content=o[4].t("Add Model")),s&32771&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){o&&p(e),ne(t)}}}function ld(l){let e,t,n,o,s;function i(){return l[10](l[14])}return{c(){e=z("button"),t=Ve("svg"),n=Ve("path"),this.h()},l(r){e=N(r,"BUTTON",{"aria-label":!0});var a=C(e);t=ze(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var c=C(t);n=ze(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(n).forEach(p),c.forEach(p),a.forEach(p),this.h()},h(){m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M19.5 12h-15"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"fill","none"),m(t,"viewBox","0 0 24 24"),m(t,"stroke-width","2"),m(t,"stroke","currentColor"),m(t,"class","size-3"),e.disabled=l[1],m(e,"aria-label","Remove Model")},m(r,a){B(r,e,a),E(e,t),E(t,n),o||(s=ke(e,"click",i),o=!0)},p(r,a){l=r,a&2&&(e.disabled=l[1])},d(r){r&&p(e),o=!1,s()}}}function od(l){let e,t,n,o,s;return{c(){e=z("button"),t=Ve("svg"),n=Ve("path"),this.h()},l(i){e=N(i,"BUTTON",{class:!0,"aria-label":!0});var r=C(e);t=ze(r,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=C(t);n=ze(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(n).forEach(p),a.forEach(p),r.forEach(p),this.h()},h(){m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M12 6v12m6-6H6"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"fill","none"),m(t,"viewBox","0 0 24 24"),m(t,"stroke-width","2"),m(t,"stroke","currentColor"),m(t,"class","size-3.5"),m(e,"class",""),e.disabled=l[1],m(e,"aria-label","Add Model")},m(i,r){B(i,e,r),E(e,t),E(t,n),o||(s=ke(e,"click",l[9]),o=!0)},p(i,r){r&2&&(e.disabled=i[1])},d(i){i&&p(e),o=!1,s()}}}function xs(l){var v,g,w;let e,t,n,o,s,i,r,a,c,u;function f(y){l[8](y,l[12],l[13],l[14])}let h={id:`${l[14]}`,placeholder:l[4].t("Select a model"),items:l[3].map(er),showTemporaryChatControl:l[5].role==="user"?((w=(g=(v=l[5])==null?void 0:v.permissions)==null?void 0:g.chat)==null?void 0:w.temporary)??!0:!0};l[12]!==void 0&&(h.value=l[12]),o=new Zc({props:h}),je.push(()=>qe(o,"value",f));const d=[nd,td],_=[];function b(y,k){return y[14]===0?0:1}return r=b(l),a=_[r]=d[r](l),{c(){e=z("div"),t=z("div"),n=z("div"),ee(o.$$.fragment),i=x(),a.c(),c=x(),this.h()},l(y){e=N(y,"DIV",{class:!0});var k=C(e);t=N(k,"DIV",{class:!0});var I=C(t);n=N(I,"DIV",{class:!0});var V=C(n);oe(o.$$.fragment,V),V.forEach(p),I.forEach(p),i=$(k),a.l(k),c=$(k),k.forEach(p),this.h()},h(){m(n,"class","mr-1 max-w-full"),m(t,"class","overflow-hidden w-full"),m(e,"class","flex w-full max-w-fit")},m(y,k){B(y,e,k),E(e,t),E(t,n),te(o,n,null),E(e,i),_[r].m(e,null),E(e,c),u=!0},p(y,k){var V,T,L;l=y;const I={};k&16&&(I.placeholder=l[4].t("Select a model")),k&8&&(I.items=l[3].map(er)),k&32&&(I.showTemporaryChatControl=l[5].role==="user"?((L=(T=(V=l[5])==null?void 0:V.permissions)==null?void 0:T.chat)==null?void 0:L.temporary)??!0:!0),!s&&k&1&&(s=!0,I.value=l[12],Ge(()=>s=!1)),o.$set(I),a.p(l,k)},i(y){u||(S(o.$$.fragment,y),S(a),u=!0)},o(y){P(o.$$.fragment,y),P(a),u=!1},d(y){y&&p(e),ne(o),_[r].d()}}}function $s(l){let e,t,n=l[4].t("Set as default")+"",o,s,i;return{c(){e=z("div"),t=z("button"),o=Ce(n),this.h()},l(r){e=N(r,"DIV",{class:!0});var a=C(e);t=N(a,"BUTTON",{});var c=C(t);o=De(c,n),c.forEach(p),a.forEach(p),this.h()},h(){m(e,"class","absolute text-left mt-[1px] ml-1 text-[0.7rem] text-gray-500 font-primary")},m(r,a){B(r,e,a),E(e,t),E(t,o),s||(i=ke(t,"click",l[7]),s=!0)},p(r,a){a&16&&n!==(n=r[4].t("Set as default")+"")&&Ne(o,n)},d(r){r&&p(e),s=!1,i()}}}function sd(l){let e,t,n,o,s=wt(l[0]),i=[];for(let c=0;c<s.length;c+=1)i[c]=xs(Qs(l,s,c));const r=c=>P(i[c],1,1,()=>{i[c]=null});let a=l[2]&&$s(l);return{c(){e=z("div");for(let c=0;c<i.length;c+=1)i[c].c();t=x(),a&&a.c(),n=Ue(),this.h()},l(c){e=N(c,"DIV",{class:!0});var u=C(e);for(let f=0;f<i.length;f+=1)i[f].l(u);u.forEach(p),t=$(c),a&&a.l(c),n=Ue(),this.h()},h(){m(e,"class","flex flex-col w-full items-start")},m(c,u){B(c,e,u);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);B(c,t,u),a&&a.m(c,u),B(c,n,u),o=!0},p(c,[u]){if(u&59){s=wt(c[0]);let f;for(f=0;f<s.length;f+=1){const h=Qs(c,s,f);i[f]?(i[f].p(h,u),S(i[f],1)):(i[f]=xs(h),i[f].c(),S(i[f],1),i[f].m(e,null))}for(Oe(),f=s.length;f<i.length;f+=1)r(f);He()}c[2]?a?a.p(c,u):(a=$s(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i(c){if(!o){for(let u=0;u<s.length;u+=1)S(i[u]);o=!0}},o(c){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)P(i[u]);o=!1},d(c){c&&(p(e),p(t),p(n)),Sn(i,c),a&&a.d(c)}}}const er=l=>({value:l.id,label:l.name,model:l});function rd(l,e,t){let n,o,s,i;ce(l,cl,b=>t(3,n=b)),ce(l,jn,b=>t(11,s=b)),ce(l,Kn,b=>t(5,i=b));const r=Lt("i18n");ce(l,r,b=>t(4,o=b));let{selectedModels:a=[""]}=e,{disabled:c=!1}=e,{showSetDefault:u=!0}=e;const f=async()=>{if(a.filter(v=>v==="").length){nt.error(o.t("Choose a model before saving..."));return}jn.set({...s,models:a}),await pc(localStorage.token,{ui:s}),nt.success(o.t("Default model updated"))};function h(b,v,g,w){g[w]=b,t(0,a),t(3,n)}const d=()=>{t(0,a=[...a,""])},_=b=>{a.splice(b,1),t(0,a),t(3,n)};return l.$$set=b=>{"selectedModels"in b&&t(0,a=b.selectedModels),"disabled"in b&&t(1,c=b.disabled),"showSetDefault"in b&&t(2,u=b.showSetDefault)},l.$$.update=()=>{l.$$.dirty&9&&a.length>0&&n.length>0&&t(0,a=a.map(b=>n.map(v=>v.id).includes(b)?b:""))},[a,c,u,n,o,i,r,f,h,d,_]}class id extends Ae{constructor(e){super(),Le(this,e,rd,sd,We,{selectedModels:0,disabled:1,showSetDefault:2})}}function ad(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=C(e);t=ze(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:we,o:we,d(n){n&&p(e)}}}function cd(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}let ud=class extends Ae{constructor(e){super(),Le(this,e,cd,ad,We,{className:0,strokeWidth:1})}};function fd(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0,stroke:!0,fill:!0,class:!0,"stroke-width":!0});var o=C(e);t=ze(o,"path",{d:!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"d","M18.75 12.75h1.5a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM12 6a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 6ZM12 18a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 18ZM3.75 6.75h1.5a.75.75 0 1 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM5.25 18.75h-1.5a.75.75 0 0 1 0-1.5h1.5a.75.75 0 0 1 0 1.5ZM3 12a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 3 12ZM9 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM12.75 12a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0ZM9 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"stroke","currentColor"),m(e,"fill","currentColor"),m(e,"class",l[0]),m(e,"stroke-width",l[1])},m(n,o){B(n,e,o),E(e,t)},p(n,[o]){o&1&&m(e,"class",n[0]),o&2&&m(e,"stroke-width",n[1])},i:we,o:we,d(n){n&&p(e)}}}function dd(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class Jo extends Ae{constructor(e){super(),Le(this,e,dd,fd,We,{className:0,strokeWidth:1})}}function hd(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=C(e);t=ze(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:we,o:we,d(n){n&&p(e)}}}function md(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class gd extends Ae{constructor(e){super(),Le(this,e,md,hd,We,{className:0,strokeWidth:1})}}function _d(l){let e;const t=l[13].default,n=Kt(t,l,l[23],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&8388608)&&Gt(n,t,o,o[23],e?Jt(t,o[23],s,null):qt(o[23]),null)},i(o){e||(S(n,o),e=!0)},o(o){P(n,o),e=!1},d(o){n&&n.d(o)}}}function tr(l){let e,t;return e=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-controls-button",$$slots:{default:[pd]},$$scope:{ctx:l}}}),e.$on("click",l[14]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&8388640&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function pd(l){let e,t,n,o=l[5].t("Controls")+"",s,i;return e=new Jo({props:{className:" size-4",strokeWidth:"0.5"}}),{c(){ee(e.$$.fragment),t=x(),n=z("div"),s=Ce(o),this.h()},l(r){oe(e.$$.fragment,r),t=$(r),n=N(r,"DIV",{class:!0});var a=C(n);s=De(a,o),a.forEach(p),this.h()},h(){m(n,"class","flex items-center")},m(r,a){te(e,r,a),B(r,t,a),B(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&32)&&o!==(o=r[5].t("Controls")+"")&&Ne(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){r&&(p(t),p(n)),ne(e,r)}}}function nr(l){let e,t;return e=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[bd]},$$scope:{ctx:l}}}),e.$on("click",l[15]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&8388640&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function bd(l){let e,t,n,o,s=l[5].t("Share")+"",i;return{c(){e=Ve("svg"),t=Ve("path"),n=x(),o=z("div"),i=Ce(s),this.h()},l(r){e=ze(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=C(e);t=ze(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(p),a.forEach(p),n=$(r),o=N(r,"DIV",{class:!0});var c=C(o);i=De(c,s),c.forEach(p),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z"),m(t,"clip-rule","evenodd"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"class","size-4"),m(o,"class","flex items-center")},m(r,a){B(r,e,a),E(e,t),B(r,n,a),B(r,o,a),E(o,i)},p(r,a){a&32&&s!==(s=r[5].t("Share")+"")&&Ne(i,s)},d(r){r&&(p(e),p(n),p(o))}}}function vd(l){let e,t,n,o=l[5].t("Overview")+"",s,i;return e=new ud({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){ee(e.$$.fragment),t=x(),n=z("div"),s=Ce(o),this.h()},l(r){oe(e.$$.fragment,r),t=$(r),n=N(r,"DIV",{class:!0});var a=C(n);s=De(a,o),a.forEach(p),this.h()},h(){m(n,"class","flex items-center")},m(r,a){te(e,r,a),B(r,t,a),B(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&32)&&o!==(o=r[5].t("Overview")+"")&&Ne(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){r&&(p(t),p(n)),ne(e,r)}}}function wd(l){let e,t,n,o=l[5].t("Artifacts")+"",s,i;return e=new gd({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){ee(e.$$.fragment),t=x(),n=z("div"),s=Ce(o),this.h()},l(r){oe(e.$$.fragment,r),t=$(r),n=N(r,"DIV",{class:!0});var a=C(n);s=De(a,o),a.forEach(p),this.h()},h(){m(n,"class","flex items-center")},m(r,a){te(e,r,a),B(r,t,a),B(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&32)&&o!==(o=r[5].t("Artifacts")+"")&&Ne(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){r&&(p(t),p(n)),ne(e,r)}}}function yd(l){let e,t,n,o,s=l[5].t("Download")+"",i;return{c(){e=Ve("svg"),t=Ve("path"),n=x(),o=z("div"),i=Ce(s),this.h()},l(r){e=ze(r,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=C(e);t=ze(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(t).forEach(p),a.forEach(p),n=$(r),o=N(r,"DIV",{class:!0});var c=C(o);i=De(c,s),c.forEach(p),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","size-4"),m(o,"class","flex items-center")},m(r,a){B(r,e,a),E(e,t),B(r,n,a),B(r,o,a),E(o,i)},p(r,a){a&32&&s!==(s=r[5].t("Download")+"")&&Ne(i,s)},d(r){r&&(p(e),p(n),p(o))}}}function kd(l){let e,t=l[5].t("Export chat (.json)")+"",n;return{c(){e=z("div"),n=Ce(t),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);n=De(s,t),s.forEach(p),this.h()},h(){m(e,"class","flex items-center line-clamp-1")},m(o,s){B(o,e,s),E(e,n)},p(o,s){s&32&&t!==(t=o[5].t("Export chat (.json)")+"")&&Ne(n,t)},d(o){o&&p(e)}}}function Ed(l){let e,t=l[5].t("Plain text (.txt)")+"",n;return{c(){e=z("div"),n=Ce(t),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);n=De(s,t),s.forEach(p),this.h()},h(){m(e,"class","flex items-center line-clamp-1")},m(o,s){B(o,e,s),E(e,n)},p(o,s){s&32&&t!==(t=o[5].t("Plain text (.txt)")+"")&&Ne(n,t)},d(o){o&&p(e)}}}function Id(l){let e,t=l[5].t("PDF document (.pdf)")+"",n;return{c(){e=z("div"),n=Ce(t),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);n=De(s,t),s.forEach(p),this.h()},h(){m(e,"class","flex items-center line-clamp-1")},m(o,s){B(o,e,s),E(e,n)},p(o,s){s&32&&t!==(t=o[5].t("PDF document (.pdf)")+"")&&Ne(n,t)},d(o){o&&p(e)}}}function Sd(l){let e,t,n,o,s,i;return e=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[kd]},$$scope:{ctx:l}}}),e.$on("click",l[18]),n=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Ed]},$$scope:{ctx:l}}}),n.$on("click",l[19]),s=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Id]},$$scope:{ctx:l}}}),s.$on("click",l[20]),{c(){ee(e.$$.fragment),t=x(),ee(n.$$.fragment),o=x(),ee(s.$$.fragment)},l(r){oe(e.$$.fragment,r),t=$(r),oe(n.$$.fragment,r),o=$(r),oe(s.$$.fragment,r)},m(r,a){te(e,r,a),B(r,t,a),te(n,r,a),B(r,o,a),te(s,r,a),i=!0},p(r,a){const c={};a&8388640&&(c.$$scope={dirty:a,ctx:r}),e.$set(c);const u={};a&8388640&&(u.$$scope={dirty:a,ctx:r}),n.$set(u);const f={};a&8388640&&(f.$$scope={dirty:a,ctx:r}),s.$set(f)},i(r){i||(S(e.$$.fragment,r),S(n.$$.fragment,r),S(s.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),P(n.$$.fragment,r),P(s.$$.fragment,r),i=!1},d(r){r&&(p(t),p(o)),ne(e,r),ne(n,r),ne(s,r)}}}function Cd(l){let e,t,n,o;return e=new fc({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[yd]},$$scope:{ctx:l}}}),n=new dc({props:{class:"w-full rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",transition:Rl,sideOffset:8,$$slots:{default:[Sd]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment),t=x(),ee(n.$$.fragment)},l(s){oe(e.$$.fragment,s),t=$(s),oe(n.$$.fragment,s)},m(s,i){te(e,s,i),B(s,t,i),te(n,s,i),o=!0},p(s,i){const r={};i&8388640&&(r.$$scope={dirty:i,ctx:s}),e.$set(r);const a={};i&8388640&&(a.$$scope={dirty:i,ctx:s}),n.$set(a)},i(s){o||(S(e.$$.fragment,s),S(n.$$.fragment,s),o=!0)},o(s){P(e.$$.fragment,s),P(n.$$.fragment,s),o=!1},d(s){s&&p(t),ne(e,s),ne(n,s)}}}function Dd(l){let e,t,n,o=l[5].t("Copy")+"",s,i;return e=new Rc({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){ee(e.$$.fragment),t=x(),n=z("div"),s=Ce(o),this.h()},l(r){oe(e.$$.fragment,r),t=$(r),n=N(r,"DIV",{class:!0});var a=C(n);s=De(a,o),a.forEach(p),this.h()},h(){m(n,"class","flex items-center")},m(r,a){te(e,r,a),B(r,t,a),B(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&32)&&o!==(o=r[5].t("Copy")+"")&&Ne(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){r&&(p(t),p(n)),ne(e,r)}}}function lr(l){let e,t,n,o,s;return o=new hc({props:{chatId:l[1].id}}),{c(){e=z("hr"),t=x(),n=z("div"),ee(o.$$.fragment),this.h()},l(i){e=N(i,"HR",{class:!0}),t=$(i),n=N(i,"DIV",{class:!0});var r=C(n);oe(o.$$.fragment,r),r.forEach(p),this.h()},h(){m(e,"class","border-gray-50 dark:border-gray-850 my-0.5"),m(n,"class","flex p-1")},m(i,r){B(i,e,r),B(i,t,r),B(i,n,r),te(o,n,null),s=!0},p(i,r){const a={};r&2&&(a.chatId=i[1].id),o.$set(a)},i(i){s||(S(o.$$.fragment,i),s=!0)},o(i){P(o.$$.fragment,i),s=!1},d(i){i&&(p(e),p(t),p(n)),ne(o)}}}function Md(l){let e,t,n,o,s,i,r,a,c,u,f,h,d=l[4]&&tr(l),_=!l[3]&&nr(l);n=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-overview-button",$$slots:{default:[vd]},$$scope:{ctx:l}}}),n.$on("click",l[16]),s=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-overview-button",$$slots:{default:[wd]},$$scope:{ctx:l}}}),s.$on("click",l[17]),r=new uc({props:{$$slots:{default:[Cd]},$$scope:{ctx:l}}}),c=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-copy-button",$$slots:{default:[Dd]},$$scope:{ctx:l}}}),c.$on("click",l[21]);let b=!l[3]&&lr(l);return{c(){d&&d.c(),e=x(),_&&_.c(),t=x(),ee(n.$$.fragment),o=x(),ee(s.$$.fragment),i=x(),ee(r.$$.fragment),a=x(),ee(c.$$.fragment),u=x(),b&&b.c(),f=Ue()},l(v){d&&d.l(v),e=$(v),_&&_.l(v),t=$(v),oe(n.$$.fragment,v),o=$(v),oe(s.$$.fragment,v),i=$(v),oe(r.$$.fragment,v),a=$(v),oe(c.$$.fragment,v),u=$(v),b&&b.l(v),f=Ue()},m(v,g){d&&d.m(v,g),B(v,e,g),_&&_.m(v,g),B(v,t,g),te(n,v,g),B(v,o,g),te(s,v,g),B(v,i,g),te(r,v,g),B(v,a,g),te(c,v,g),B(v,u,g),b&&b.m(v,g),B(v,f,g),h=!0},p(v,g){v[4]?d?(d.p(v,g),g&16&&S(d,1)):(d=tr(v),d.c(),S(d,1),d.m(e.parentNode,e)):d&&(Oe(),P(d,1,1,()=>{d=null}),He()),v[3]?_&&(Oe(),P(_,1,1,()=>{_=null}),He()):_?(_.p(v,g),g&8&&S(_,1)):(_=nr(v),_.c(),S(_,1),_.m(t.parentNode,t));const w={};g&8388640&&(w.$$scope={dirty:g,ctx:v}),n.$set(w);const y={};g&8388640&&(y.$$scope={dirty:g,ctx:v}),s.$set(y);const k={};g&8388640&&(k.$$scope={dirty:g,ctx:v}),r.$set(k);const I={};g&8388640&&(I.$$scope={dirty:g,ctx:v}),c.$set(I),v[3]?b&&(Oe(),P(b,1,1,()=>{b=null}),He()):b?(b.p(v,g),g&8&&S(b,1)):(b=lr(v),b.c(),S(b,1),b.m(f.parentNode,f))},i(v){h||(S(d),S(_),S(n.$$.fragment,v),S(s.$$.fragment,v),S(r.$$.fragment,v),S(c.$$.fragment,v),S(b),h=!0)},o(v){P(d),P(_),P(n.$$.fragment,v),P(s.$$.fragment,v),P(r.$$.fragment,v),P(c.$$.fragment,v),P(b),h=!1},d(v){v&&(p(e),p(t),p(o),p(i),p(a),p(u),p(f)),d&&d.d(v),_&&_.d(v),ne(n,v),ne(s,v),ne(r,v),ne(c,v),b&&b.d(v)}}}function Td(l){let e,t,n;return t=new po({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5  z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"end",transition:Rl,$$slots:{default:[Md]},$$scope:{ctx:l}}}),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(o){e=N(o,"DIV",{slot:!0});var s=C(e);oe(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"slot","content")},m(o,s){B(o,e,s),te(t,e,null),n=!0},p(o,s){const i={};s&8388667&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){o&&p(e),ne(t)}}}function Vd(l){let e,t;return e=new _o({props:{$$slots:{content:[Td],default:[_d]},$$scope:{ctx:l}}}),e.$on("change",l[22]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,[o]){const s={};o&8388667&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function zd(l,e,t){let n,o,s;ce(l,go,Y=>t(3,n=Y)),ce(l,Ll,Y=>t(4,o=Y));let{$$slots:i={},$$scope:r}=e;const{saveAs:a}=Xc,c=Lt("i18n");ce(l,c,Y=>t(5,s=Y));let{shareEnabled:u=!1}=e,{shareHandler:f}=e,{downloadHandler:h}=e,{chat:d}=e,{onClose:_=()=>{}}=e;const b=async()=>{const Y=d.chat.history;return lo(Y,Y.currentId).reduce((K,M,W,j)=>`${K}### ${M.role.toUpperCase()}
${M.content}

`,"").trim()},v=async()=>{const Y=await b();let G=new Blob([Y],{type:"text/plain"});a(G,`chat-${d.chat.title}.txt`)},g=async()=>{const Y=d.chat.history,G=lo(Y,Y.currentId),D=await Kc(d.chat.title,G),K=window.URL.createObjectURL(D),M=document.createElement("a");M.href=K,M.download=`chat-${d.chat.title}.pdf`,document.body.appendChild(M),M.click(),document.body.removeChild(M),window.URL.revokeObjectURL(K)},w=async()=>{if(d.id){let Y=null;d.id==="local"||n?Y=d:Y=await Ro(localStorage.token,d.id);let G=new Blob([JSON.stringify([Y])],{type:"application/json"});a(G,`chat-export-${Date.now()}.json`)}},y=async()=>{await At.set(!0),await Fn.set(!1),await Rn.set(!1)},k=()=>{f()},I=async()=>{await At.set(!0),await Fn.set(!0),await Rn.set(!1)},V=async()=>{await At.set(!0),await Rn.set(!0),await Fn.set(!1)},T=()=>{w()},L=()=>{v()},O=()=>{g()},H=async()=>{await Zo(await b()).catch(G=>{console.error(G)})&&nt.success(s.t("Copied to clipboard"))},F=Y=>{Y.detail===!1&&_()};return l.$$set=Y=>{"shareEnabled"in Y&&t(11,u=Y.shareEnabled),"shareHandler"in Y&&t(0,f=Y.shareHandler),"downloadHandler"in Y&&t(12,h=Y.downloadHandler),"chat"in Y&&t(1,d=Y.chat),"onClose"in Y&&t(2,_=Y.onClose),"$$scope"in Y&&t(23,r=Y.$$scope)},[f,d,_,n,o,s,c,b,v,g,w,u,h,i,y,k,I,V,T,L,O,H,F,r]}class Nd extends Ae{constructor(e){super(),Le(this,e,zd,Vd,We,{shareEnabled:11,shareHandler:0,downloadHandler:12,chat:1,onClose:2})}}function or(l){let e,t,n;function o(i){l[18](i)}let s={showSetDefault:!l[2]};return l[0]!==void 0&&(s.selectedModels=l[0]),e=new id({props:s}),je.push(()=>qe(e,"selectedModels",o)),{c(){ee(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){te(e,i,r),n=!0},p(i,r){const a={};r&4&&(a.showSetDefault=!i[2]),!t&&r&1&&(t=!0,a.selectedModels=i[0],Ge(()=>t=!1)),e.$set(a)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){P(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Pd(l){let e,t;return e=new Xt({props:{content:l[12].t("Controls"),$$slots:{default:[Hd]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&4096&&(s.content=n[12].t("Controls")),o&67117056&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Od(l){let e,t;return e=new Nd({props:{chat:l[3],shareEnabled:l[2],shareHandler:l[19],downloadHandler:l[20],$$slots:{default:[Bd]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&8&&(s.chat=n[3]),o&4&&(s.shareEnabled=n[2]),o&32&&(s.shareHandler=n[19]),o&64&&(s.downloadHandler=n[20]),o&67108864&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Hd(l){let e,t,n,o,s,i;return n=new Jo({props:{className:" size-5",strokeWidth:"0.5"}}),{c(){e=z("button"),t=z("div"),ee(n.$$.fragment),this.h()},l(r){e=N(r,"BUTTON",{class:!0,"aria-label":!0});var a=C(e);t=N(a,"DIV",{class:!0});var c=C(t);oe(n.$$.fragment,c),c.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","m-auto self-center"),m(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","Controls")},m(r,a){B(r,e,a),E(e,t),te(n,t,null),o=!0,s||(i=ke(e,"click",l[21]),s=!0)},p:we,i(r){o||(S(n.$$.fragment,r),o=!0)},o(r){P(n.$$.fragment,r),o=!1},d(r){r&&p(e),ne(n),s=!1,i()}}}function Bd(l){let e,t='<div class="m-auto self-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"></path></svg></div>';return{c(){e=z("button"),e.innerHTML=t,this.h()},l(n){e=N(n,"BUTTON",{class:!0,id:!0,"data-svelte-h":!0}),ft(e)!=="svelte-xd5mtd"&&(e.innerHTML=t),this.h()},h(){m(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"id","chat-context-menu-button")},m(n,o){B(n,e,o)},p:we,d(n){n&&p(e)}}}function sr(l){let e,t;return e=new Xt({props:{content:l[12].t("Controls"),$$slots:{default:[Ad]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&4096&&(s.content=n[12].t("Controls")),o&67117056&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Ad(l){let e,t,n,o,s,i;return n=new Jo({props:{className:" size-5",strokeWidth:"0.5"}}),{c(){e=z("button"),t=z("div"),ee(n.$$.fragment),this.h()},l(r){e=N(r,"BUTTON",{class:!0,"aria-label":!0});var a=C(e);t=N(a,"DIV",{class:!0});var c=C(t);oe(n.$$.fragment,c),c.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","m-auto self-center"),m(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","Controls")},m(r,a){B(r,e,a),E(e,t),te(n,t,null),o=!0,s||(i=ke(e,"click",l[22]),s=!0)},p:we,i(r){o||(S(n.$$.fragment,r),o=!0)},o(r){P(n.$$.fragment,r),o=!1},d(r){r&&p(e),ne(n),s=!1,i()}}}function Ld(l){let e,t,n,o,s,i,r;return n=new gc({props:{className:" size-5",strokeWidth:"2"}}),{c(){e=z("button"),t=z("div"),ee(n.$$.fragment),this.h()},l(a){e=N(a,"BUTTON",{id:!0,class:!0,"aria-label":!0});var c=C(e);t=N(c,"DIV",{class:!0});var u=C(t);oe(n.$$.fragment,u),u.forEach(p),c.forEach(p),this.h()},h(){m(t,"class","m-auto self-center"),m(e,"id","new-chat-button"),m(e,"class",o="flex "+(l[8]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","New Chat")},m(a,c){B(a,e,c),E(e,t),te(n,t,null),s=!0,i||(r=ke(e,"click",l[23]),i=!0)},p(a,c){(!s||c&256&&o!==(o="flex "+(a[8]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition"))&&m(e,"class",o)},i(a){s||(S(n.$$.fragment,a),s=!0)},o(a){P(n.$$.fragment,a),s=!1},d(a){a&&p(e),ne(n),i=!1,r()}}}function rr(l){let e,t;return e=new Gc({props:{className:"max-w-[200px]",role:l[11].role,$$slots:{default:[Rd]},$$scope:{ctx:l}}}),e.$on("show",l[24]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&2048&&(s.role=n[11].role),o&67110912&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Rd(l){let e,t,n,o;return{c(){e=z("button"),t=z("div"),n=z("img"),this.h()},l(s){e=N(s,"BUTTON",{class:!0,"aria-label":!0});var i=C(e);t=N(i,"DIV",{class:!0});var r=C(t);n=N(r,"IMG",{src:!0,class:!0,alt:!0,draggable:!0}),r.forEach(p),i.forEach(p),this.h()},h(){Xn(n.src,o=l[11].profile_image_url)||m(n,"src",o),m(n,"class","size-6 object-cover rounded-full"),m(n,"alt","User profile"),m(n,"draggable","false"),m(t,"class","self-center"),m(e,"class","select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","User Menu")},m(s,i){B(s,e,i),E(e,t),E(t,n)},p(s,i){i&2048&&!Xn(n.src,o=s[11].profile_image_url)&&m(n,"src",o)},d(s){s&&p(e)}}}function Ud(l){var A,X;let e,t,n,o,s,i,r,a,c,u,f,h,d,_,b,v,g,w,y,k,I,V,T,L,O,H,F;function Y(q){l[16](q)}let G={chatId:l[7]};l[5]!==void 0&&(G.show=l[5]),e=new mc({props:G}),je.push(()=>qe(e,"show",Y)),h=new qc({});let D=l[4]&&or(l);const K=[Od,Pd],M=[];function W(q,se){var J,me;return q[2]&&q[3]&&(q[3].id||q[9])?0:q[10]&&(q[11].role==="admin"||(me=(J=q[11])==null?void 0:J.permissions.chat)!=null&&me.controls)?1:-1}~(y=W(l))&&(k=M[y]=K[y](l));let j=!l[10]&&(l[11].role==="admin"||((X=(A=l[11])==null?void 0:A.permissions.chat)==null?void 0:X.controls))&&sr(l);T=new Xt({props:{content:l[12].t("New Chat"),$$slots:{default:[Ld]},$$scope:{ctx:l}}});let Z=l[11]!==void 0&&rr(l);return{c(){ee(e.$$.fragment),n=x(),o=z("nav"),s=z("div"),i=x(),r=z("div"),a=z("div"),c=z("div"),u=z("button"),f=z("div"),ee(h.$$.fragment),_=x(),b=z("div"),D&&D.c(),g=x(),w=z("div"),k&&k.c(),I=x(),j&&j.c(),V=x(),ee(T.$$.fragment),L=x(),Z&&Z.c(),this.h()},l(q){oe(e.$$.fragment,q),n=$(q),o=N(q,"NAV",{class:!0});var se=C(o);s=N(se,"DIV",{class:!0}),C(s).forEach(p),i=$(se),r=N(se,"DIV",{class:!0});var J=C(r);a=N(J,"DIV",{class:!0});var me=C(a);c=N(me,"DIV",{class:!0});var _e=C(c);u=N(_e,"BUTTON",{id:!0,class:!0,"aria-label":!0});var ie=C(u);f=N(ie,"DIV",{class:!0});var le=C(f);oe(h.$$.fragment,le),le.forEach(p),ie.forEach(p),_e.forEach(p),_=$(me),b=N(me,"DIV",{class:!0});var Pe=C(b);D&&D.l(Pe),Pe.forEach(p),g=$(me),w=N(me,"DIV",{class:!0});var ae=C(w);k&&k.l(ae),I=$(ae),j&&j.l(ae),V=$(ae),oe(T.$$.fragment,ae),L=$(ae),Z&&Z.l(ae),ae.forEach(p),me.forEach(p),J.forEach(p),se.forEach(p),this.h()},h(){m(s,"class","bg-gradient-to-b via-50% from-white via-white to-transparent dark:from-gray-900 dark:via-gray-900 dark:to-transparent pointer-events-none absolute inset-0 -bottom-7 z-[-1] blur"),m(f,"class","m-auto self-center"),m(u,"id","sidebar-toggle-button"),m(u,"class","cursor-pointer px-2 py-2 flex rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(u,"aria-label","Toggle Sidebar"),m(c,"class",d=(l[8]?"md:hidden":"")+" mr-1 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),m(b,"class",v="flex-1 overflow-hidden max-w-full py-0.5 "+(l[8]?"ml-1":"")),m(w,"class","self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),m(a,"class","flex items-center w-full max-w-full"),m(r,"class","flex max-w-full w-full mx-auto px-1 pt-0.5 bg-transparent"),m(o,"class","sticky top-0 z-30 w-full px-1.5 py-1.5 -mb-8 flex items-center drag-region")},m(q,se){te(e,q,se),B(q,n,se),B(q,o,se),E(o,s),E(o,i),E(o,r),E(r,a),E(a,c),E(c,u),E(u,f),te(h,f,null),E(a,_),E(a,b),D&&D.m(b,null),E(a,g),E(a,w),~y&&M[y].m(w,null),E(w,I),j&&j.m(w,null),E(w,V),te(T,w,null),E(w,L),Z&&Z.m(w,null),O=!0,H||(F=ke(u,"click",l[17]),H=!0)},p(q,[se]){var ie,le;const J={};se&128&&(J.chatId=q[7]),!t&&se&32&&(t=!0,J.show=q[5],Ge(()=>t=!1)),e.$set(J),(!O||se&256&&d!==(d=(q[8]?"md:hidden":"")+" mr-1 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"))&&m(c,"class",d),q[4]?D?(D.p(q,se),se&16&&S(D,1)):(D=or(q),D.c(),S(D,1),D.m(b,null)):D&&(Oe(),P(D,1,1,()=>{D=null}),He()),(!O||se&256&&v!==(v="flex-1 overflow-hidden max-w-full py-0.5 "+(q[8]?"ml-1":"")))&&m(b,"class",v);let me=y;y=W(q),y===me?~y&&M[y].p(q,se):(k&&(Oe(),P(M[me],1,1,()=>{M[me]=null}),He()),~y?(k=M[y],k?k.p(q,se):(k=M[y]=K[y](q),k.c()),S(k,1),k.m(w,I)):k=null),!q[10]&&(q[11].role==="admin"||(le=(ie=q[11])==null?void 0:ie.permissions.chat)!=null&&le.controls)?j?(j.p(q,se),se&3072&&S(j,1)):(j=sr(q),j.c(),S(j,1),j.m(w,V)):j&&(Oe(),P(j,1,1,()=>{j=null}),He());const _e={};se&4096&&(_e.content=q[12].t("New Chat")),se&67109122&&(_e.$$scope={dirty:se,ctx:q}),T.$set(_e),q[11]!==void 0?Z?(Z.p(q,se),se&2048&&S(Z,1)):(Z=rr(q),Z.c(),S(Z,1),Z.m(w,null)):Z&&(Oe(),P(Z,1,1,()=>{Z=null}),He())},i(q){O||(S(e.$$.fragment,q),S(h.$$.fragment,q),S(D),S(k),S(j),S(T.$$.fragment,q),S(Z),O=!0)},o(q){P(e.$$.fragment,q),P(h.$$.fragment,q),P(D),P(k),P(j),P(T.$$.fragment,q),P(Z),O=!1},d(q){q&&(p(n),p(o)),ne(e,q),ne(h),D&&D.d(),~y&&M[y].d(),j&&j.d(),ne(T),Z&&Z.d(),H=!1,F()}}}function Wd(l,e,t){let n,o,s,i,r,a,c,u;ce(l,Bi,G=>t(25,n=G)),ce(l,rl,G=>t(7,o=G)),ce(l,Lo,G=>t(8,s=G)),ce(l,go,G=>t(9,i=G)),ce(l,Ll,G=>t(10,r=G)),ce(l,Kn,G=>t(11,a=G)),ce(l,At,G=>t(13,u=G));const f=Lt("i18n");ce(l,f,G=>t(12,c=G));let{initNewChat:h}=e,{title:d=n}=e,{shareEnabled:_=!1}=e,{chat:b}=e,{selectedModels:v}=e,{showModelSelector:g=!0}=e,w=!1,y=!1;function k(G){w=G,t(5,w)}const I=()=>{Lo.set(!s)};function V(G){v=G,t(0,v)}const T=()=>{t(5,w=!w)},L=()=>{t(6,y=!y)},O=async()=>{await At.set(!u)},H=async()=>{await At.set(!u)},F=()=>{h()},Y=G=>{G.detail==="archived-chat"&&ja.set(!0)};return l.$$set=G=>{"initNewChat"in G&&t(1,h=G.initNewChat),"title"in G&&t(15,d=G.title),"shareEnabled"in G&&t(2,_=G.shareEnabled),"chat"in G&&t(3,b=G.chat),"selectedModels"in G&&t(0,v=G.selectedModels),"showModelSelector"in G&&t(4,g=G.showModelSelector)},[v,h,_,b,g,w,y,o,s,i,r,a,c,u,f,d,k,I,V,T,L,O,H,F,Y]}class jd extends Ae{constructor(e){super(),Le(this,e,Wd,Ud,We,{initNewChat:1,title:15,shareEnabled:2,chat:3,selectedModels:0,showModelSelector:4})}}function Ht(l){if(typeof l=="string"||typeof l=="number")return""+l;let e="";if(Array.isArray(l))for(let t=0,n;t<l.length;t++)(n=Ht(l[t]))!==""&&(e+=(e&&" ")+n);else for(let t in l)l[t]&&(e+=(e&&" ")+t);return e}const Ul={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:l=>`Node type "${l}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:l=>`The old edge with id=${l} does not exist.`,error009:l=>`Marker type "${l}" doesn't exist.`,error008:(l,{id:e,sourceHandle:t,targetHandle:n})=>`Couldn't create edge for ${l} handle id: "${l==="source"?t:n}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:l=>`Edge type "${l}" not found. Using fallback type "default".`,error012:l=>`Node with id "${l}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(l="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${l}/dist/style.css' or base.css to make sure everything is working properly.`},so=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var al;(function(l){l.Strict="strict",l.Loose="loose"})(al||(al={}));var Un;(function(l){l.Free="free",l.Vertical="vertical",l.Horizontal="horizontal"})(Un||(Un={}));var ro;(function(l){l.Partial="partial",l.Full="full"})(ro||(ro={}));const Wo={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var vl;(function(l){l.Bezier="default",l.Straight="straight",l.Step="step",l.SmoothStep="smoothstep",l.SimpleBezier="simplebezier"})(vl||(vl={}));var io;(function(l){l.Arrow="arrow",l.ArrowClosed="arrowclosed"})(io||(io={}));var st;(function(l){l.Left="left",l.Top="top",l.Right="right",l.Bottom="bottom"})(st||(st={}));const ir={[st.Left]:st.Right,[st.Right]:st.Left,[st.Top]:st.Bottom,[st.Bottom]:st.Top};function Fd(l,e){if(!l&&!e)return!0;if(!l||!e||l.size!==e.size)return!1;if(!l.size&&!e.size)return!0;for(const t of l.keys())if(!e.has(t))return!1;return!0}function ar(l,e,t){if(!t)return;const n=[];l.forEach((o,s)=>{e!=null&&e.has(s)||n.push(o)}),n.length&&t(n)}function cr(l){return l===null?null:l?"valid":"invalid"}const Yd=l=>"id"in l&&"source"in l&&"target"in l,Zd=l=>"id"in l&&"position"in l&&!("source"in l)&&!("target"in l),Qo=l=>"id"in l&&"internals"in l&&!("source"in l)&&!("target"in l),vo=(l,e=[0,0])=>{const{width:t,height:n}=Cl(l),o=l.origin??e,s=t*o[0],i=n*o[1];return{x:l.position.x-s,y:l.position.y-i}},Xd=(l,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(l.length===0)return{x:0,y:0,width:0,height:0};const t=l.reduce((n,o)=>{const s=typeof o=="string";let i=!e.nodeLookup&&!s?o:void 0;e.nodeLookup&&(i=s?e.nodeLookup.get(o):Qo(o)?o:e.nodeLookup.get(o.id));const r=i?ao(i,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return yo(n,r)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ko(t)},wo=(l,e={})=>{if(l.size===0)return{x:0,y:0,width:0,height:0};let t={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return l.forEach(n=>{if(e.filter===void 0||e.filter(n)){const o=ao(n);t=yo(t,o)}}),ko(t)},Ki=(l,e,[t,n,o]=[0,0,1],s=!1,i=!1)=>{const r={...Wl(e,[t,n,o]),width:e.width/o,height:e.height/o},a=[];for(const c of l.values()){const{measured:u,selectable:f=!0,hidden:h=!1}=c;if(i&&!f||h)continue;const d=u.width??c.width??c.initialWidth??null,_=u.height??c.height??c.initialHeight??null,b=Ol(r,Il(c)),v=(d??0)*(_??0),g=s&&b>0;(!c.internals.handleBounds||g||b>=v||c.dragging)&&a.push(c)}return a},jo=(l,e)=>{const t=new Set;return l.forEach(n=>{t.add(n.id)}),e.filter(n=>t.has(n.source)||t.has(n.target))};function ur(l,e){const t=new Map,n=e!=null&&e.nodes?new Set(e.nodes.map(o=>o.id)):null;return l.forEach(o=>{o.measured.width&&o.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!o.hidden)&&(!n||n.has(o.id))&&t.set(o.id,o)}),t}async function fr({nodes:l,width:e,height:t,panZoom:n,minZoom:o,maxZoom:s},i){if(l.size===0)return Promise.resolve(!1);const r=wo(l),a=$o(r,e,t,(i==null?void 0:i.minZoom)??o,(i==null?void 0:i.maxZoom)??s,(i==null?void 0:i.padding)??.1);return await n.setViewport(a,{duration:i==null?void 0:i.duration}),Promise.resolve(!0)}function Kd({nodeId:l,nextPosition:e,nodeLookup:t,nodeOrigin:n=[0,0],nodeExtent:o,onError:s}){const i=t.get(l),r=i.parentId?t.get(i.parentId):void 0,{x:a,y:c}=r?r.internals.positionAbsolute:{x:0,y:0},u=i.origin??n;let f=o;if(i.extent==="parent"&&!i.expandParent)if(!r)s==null||s("005",Ul.error005());else{const d=r.measured.width,_=r.measured.height;d&&_&&(f=[[a,c],[a+d,c+_]])}else r&&Hl(i.extent)&&(f=[[i.extent[0][0]+a,i.extent[0][1]+c],[i.extent[1][0]+a,i.extent[1][1]+c]]);const h=Hl(f)?El(e,f,i.measured):e;return{position:{x:h.x-a+i.measured.width*u[0],y:h.y-c+i.measured.height*u[1]},positionAbsolute:h}}async function Gi({nodesToRemove:l=[],edgesToRemove:e=[],nodes:t,edges:n,onBeforeDelete:o}){const s=new Set(l.map(h=>h.id)),i=[];for(const h of t){if(h.deletable===!1)continue;const d=s.has(h.id),_=!d&&h.parentId&&i.find(b=>b.id===h.parentId);(d||_)&&i.push(h)}const r=new Set(e.map(h=>h.id)),a=n.filter(h=>h.deletable!==!1),u=jo(i,a);for(const h of a)r.has(h.id)&&!u.find(_=>_.id===h.id)&&u.push(h);if(!o)return{edges:u,nodes:i};const f=await o({nodes:i,edges:u});return typeof f=="boolean"?f?{edges:u,nodes:i}:{edges:[],nodes:[]}:f}const kl=(l,e=0,t=1)=>Math.min(Math.max(l,e),t),El=(l={x:0,y:0},e,t)=>({x:kl(l.x,e[0][0],e[1][0]-((t==null?void 0:t.width)??0)),y:kl(l.y,e[0][1],e[1][1]-((t==null?void 0:t.height)??0))});function qi(l,e,t){const{width:n,height:o}=Cl(t),{x:s,y:i}=t.internals.positionAbsolute;return El(l,[[s,i],[s+n,i+o]],e)}const dr=(l,e,t)=>l<e?kl(Math.abs(l-e),1,e)/e:l>t?-kl(Math.abs(l-t),1,e)/e:0,Ji=(l,e,t=15,n=40)=>{const o=dr(l.x,n,e.width-n)*t,s=dr(l.y,n,e.height-n)*t;return[o,s]},yo=(l,e)=>({x:Math.min(l.x,e.x),y:Math.min(l.y,e.y),x2:Math.max(l.x2,e.x2),y2:Math.max(l.y2,e.y2)}),Fo=({x:l,y:e,width:t,height:n})=>({x:l,y:e,x2:l+t,y2:e+n}),ko=({x:l,y:e,x2:t,y2:n})=>({x:l,y:e,width:t-l,height:n-e}),Il=(l,e=[0,0])=>{var o,s;const{x:t,y:n}=Qo(l)?l.internals.positionAbsolute:vo(l,e);return{x:t,y:n,width:((o=l.measured)==null?void 0:o.width)??l.width??l.initialWidth??0,height:((s=l.measured)==null?void 0:s.height)??l.height??l.initialHeight??0}},ao=(l,e=[0,0])=>{var o,s;const{x:t,y:n}=Qo(l)?l.internals.positionAbsolute:vo(l,e);return{x:t,y:n,x2:t+(((o=l.measured)==null?void 0:o.width)??l.width??l.initialWidth??0),y2:n+(((s=l.measured)==null?void 0:s.height)??l.height??l.initialHeight??0)}},Gd=(l,e)=>ko(yo(Fo(l),Fo(e))),Ol=(l,e)=>{const t=Math.max(0,Math.min(l.x+l.width,e.x+e.width)-Math.max(l.x,e.x)),n=Math.max(0,Math.min(l.y+l.height,e.y+e.height)-Math.max(l.y,e.y));return Math.ceil(t*n)},hr=l=>Nn(l.width)&&Nn(l.height)&&Nn(l.x)&&Nn(l.y),Nn=l=>!isNaN(l)&&isFinite(l),qd=(l,e)=>{},xo=(l,e=[1,1])=>({x:e[0]*Math.round(l.x/e[0]),y:e[1]*Math.round(l.y/e[1])}),Wl=({x:l,y:e},[t,n,o],s=!1,i=[1,1])=>{const r={x:(l-t)/o,y:(e-n)/o};return s?xo(r,i):r},Qi=({x:l,y:e},[t,n,o])=>({x:l*o+t,y:e*o+n}),$o=(l,e,t,n,o,s)=>{const i=e/(l.width*(1+s)),r=t/(l.height*(1+s)),a=Math.min(i,r),c=kl(a,n,o),u=l.x+l.width/2,f=l.y+l.height/2,h=e/2-u*c,d=t/2-f*c;return{x:h,y:d,zoom:c}},co=()=>{var l;return typeof navigator<"u"&&((l=navigator==null?void 0:navigator.userAgent)==null?void 0:l.indexOf("Mac"))>=0};function Hl(l){return l!==void 0&&l!=="parent"}function Cl(l){var e,t;return{width:((e=l.measured)==null?void 0:e.width)??l.width??l.initialWidth??0,height:((t=l.measured)==null?void 0:t.height)??l.height??l.initialHeight??0}}function mr(l){var e,t;return(((e=l.measured)==null?void 0:e.width)??l.width??l.initialWidth)!==void 0&&(((t=l.measured)==null?void 0:t.height)??l.height??l.initialHeight)!==void 0}function Jd(l,e={width:0,height:0},t,n,o){let s=t;const i={...l};for(;s;){const r=n.get(s);if(s=r==null?void 0:r.parentId,r){const a=r.origin||o;i.x+=r.internals.positionAbsolute.x-(e.width??0)*a[0],i.y+=r.internals.positionAbsolute.y-(e.height??0)*a[1]}}return i}function Po(l,{snapGrid:e=[0,0],snapToGrid:t=!1,transform:n}){const{x:o,y:s}=Yn(l),i=Wl({x:o,y:s},n),{x:r,y:a}=t?xo(i,e):i;return{xSnapped:r,ySnapped:a,...i}}const xi=l=>({width:l.offsetWidth,height:l.offsetHeight}),Qd=l=>{var e;return((e=l.getRootNode)==null?void 0:e.call(l))||(window==null?void 0:window.document)},xd=["INPUT","SELECT","TEXTAREA"];function $d(l){var n,o;const e=((o=(n=l.composedPath)==null?void 0:n.call(l))==null?void 0:o[0])||l.target;return xd.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const $i=l=>"clientX"in l,Yn=(l,e)=>{var s,i;const t=$i(l),n=t?l.clientX:(s=l.touches)==null?void 0:s[0].clientX,o=t?l.clientY:(i=l.touches)==null?void 0:i[0].clientY;return{x:n-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},gr=(l,e,t,n,o)=>{const s=e.querySelectorAll(`.${l}`);return!s||!s.length?null:Array.from(s).map(i=>{const r=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:l,nodeId:o,position:i.getAttribute("data-handlepos"),x:(r.left-t.left)/n,y:(r.top-t.top)/n,...xi(i)}})};function eh({sourceX:l,sourceY:e,targetX:t,targetY:n,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:r}){const a=l*.125+o*.375+i*.375+t*.125,c=e*.125+s*.375+r*.375+n*.125,u=Math.abs(a-l),f=Math.abs(c-e);return[a,c,u,f]}function Ql(l,e){return l>=0?.5*l:e*25*Math.sqrt(-l)}function _r({pos:l,x1:e,y1:t,x2:n,y2:o,c:s}){switch(l){case st.Left:return[e-Ql(e-n,s),t];case st.Right:return[e+Ql(n-e,s),t];case st.Top:return[e,t-Ql(t-o,s)];case st.Bottom:return[e,t+Ql(o-t,s)]}}function ea({sourceX:l,sourceY:e,sourcePosition:t=st.Bottom,targetX:n,targetY:o,targetPosition:s=st.Top,curvature:i=.25}){const[r,a]=_r({pos:t,x1:l,y1:e,x2:n,y2:o,c:i}),[c,u]=_r({pos:s,x1:n,y1:o,x2:l,y2:e,c:i}),[f,h,d,_]=eh({sourceX:l,sourceY:e,targetX:n,targetY:o,sourceControlX:r,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${l},${e} C${r},${a} ${c},${u} ${n},${o}`,f,h,d,_]}function ta({sourceX:l,sourceY:e,targetX:t,targetY:n}){const o=Math.abs(t-l)/2,s=t<l?t+o:t-o,i=Math.abs(n-e)/2,r=n<e?n+i:n-i;return[s,r,o,i]}function th({sourceNode:l,targetNode:e,selected:t=!1,zIndex:n=0,elevateOnSelect:o=!1}){if(!o)return n;const s=t||e.selected||l.selected,i=Math.max(l.internals.z||0,e.internals.z||0,1e3);return n+(s?i:0)}function nh({sourceNode:l,targetNode:e,width:t,height:n,transform:o}){const s=yo(ao(l),ao(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const i={x:-o[0]/o[2],y:-o[1]/o[2],width:t/o[2],height:n/o[2]};return Ol(i,ko(s))>0}const lh=({source:l,sourceHandle:e,target:t,targetHandle:n})=>`xy-edge__${l}${e||""}-${t}${n||""}`,oh=(l,e)=>e.some(t=>t.source===l.source&&t.target===l.target&&(t.sourceHandle===l.sourceHandle||!t.sourceHandle&&!l.sourceHandle)&&(t.targetHandle===l.targetHandle||!t.targetHandle&&!l.targetHandle)),sh=(l,e)=>{if(!l.source||!l.target)return e;let t;return Yd(l)?t={...l}:t={...l,id:lh(l)},oh(t,e)?e:(t.sourceHandle===null&&delete t.sourceHandle,t.targetHandle===null&&delete t.targetHandle,e.concat(t))};function na({sourceX:l,sourceY:e,targetX:t,targetY:n}){const[o,s,i,r]=ta({sourceX:l,sourceY:e,targetX:t,targetY:n});return[`M ${l},${e}L ${t},${n}`,o,s,i,r]}const pr={[st.Left]:{x:-1,y:0},[st.Right]:{x:1,y:0},[st.Top]:{x:0,y:-1},[st.Bottom]:{x:0,y:1}},rh=({source:l,sourcePosition:e=st.Bottom,target:t})=>e===st.Left||e===st.Right?l.x<t.x?{x:1,y:0}:{x:-1,y:0}:l.y<t.y?{x:0,y:1}:{x:0,y:-1},br=(l,e)=>Math.sqrt(Math.pow(e.x-l.x,2)+Math.pow(e.y-l.y,2));function ih({source:l,sourcePosition:e=st.Bottom,target:t,targetPosition:n=st.Top,center:o,offset:s}){const i=pr[e],r=pr[n],a={x:l.x+i.x*s,y:l.y+i.y*s},c={x:t.x+r.x*s,y:t.y+r.y*s},u=rh({source:a,sourcePosition:e,target:c}),f=u.x!==0?"x":"y",h=u[f];let d=[],_,b;const v={x:0,y:0},g={x:0,y:0},[w,y,k,I]=ta({sourceX:l.x,sourceY:l.y,targetX:t.x,targetY:t.y});if(i[f]*r[f]===-1){_=o.x??w,b=o.y??y;const T=[{x:_,y:a.y},{x:_,y:c.y}],L=[{x:a.x,y:b},{x:c.x,y:b}];i[f]===h?d=f==="x"?T:L:d=f==="x"?L:T}else{const T=[{x:a.x,y:c.y}],L=[{x:c.x,y:a.y}];if(f==="x"?d=i.x===h?L:T:d=i.y===h?T:L,e===n){const G=Math.abs(l[f]-t[f]);if(G<=s){const D=Math.min(s-1,s-G);i[f]===h?v[f]=(a[f]>l[f]?-1:1)*D:g[f]=(c[f]>t[f]?-1:1)*D}}if(e!==n){const G=f==="x"?"y":"x",D=i[f]===r[G],K=a[G]>c[G],M=a[G]<c[G];(i[f]===1&&(!D&&K||D&&M)||i[f]!==1&&(!D&&M||D&&K))&&(d=f==="x"?T:L)}const O={x:a.x+v.x,y:a.y+v.y},H={x:c.x+g.x,y:c.y+g.y},F=Math.max(Math.abs(O.x-d[0].x),Math.abs(H.x-d[0].x)),Y=Math.max(Math.abs(O.y-d[0].y),Math.abs(H.y-d[0].y));F>=Y?(_=(O.x+H.x)/2,b=d[0].y):(_=d[0].x,b=(O.y+H.y)/2)}return[[l,{x:a.x+v.x,y:a.y+v.y},...d,{x:c.x+g.x,y:c.y+g.y},t],_,b,k,I]}function ah(l,e,t,n){const o=Math.min(br(l,e)/2,br(e,t)/2,n),{x:s,y:i}=e;if(l.x===s&&s===t.x||l.y===i&&i===t.y)return`L${s} ${i}`;if(l.y===i){const c=l.x<t.x?-1:1,u=l.y<t.y?1:-1;return`L ${s+o*c},${i}Q ${s},${i} ${s},${i+o*u}`}const r=l.x<t.x?1:-1,a=l.y<t.y?-1:1;return`L ${s},${i+o*a}Q ${s},${i} ${s+o*r},${i}`}function uo({sourceX:l,sourceY:e,sourcePosition:t=st.Bottom,targetX:n,targetY:o,targetPosition:s=st.Top,borderRadius:i=5,centerX:r,centerY:a,offset:c=20}){const[u,f,h,d,_]=ih({source:{x:l,y:e},sourcePosition:t,target:{x:n,y:o},targetPosition:s,center:{x:r,y:a},offset:c});return[u.reduce((v,g,w)=>{let y="";return w>0&&w<u.length-1?y=ah(u[w-1],g,u[w+1],i):y=`${w===0?"M":"L"}${g.x} ${g.y}`,v+=y,v},""),f,h,d,_]}function vr(l){var e;return l&&!!(l.internals.handleBounds||(e=l.handles)!=null&&e.length)&&!!(l.measured.width||l.width||l.initialWidth)}function ch(l){var f;const{sourceNode:e,targetNode:t}=l;if(!vr(e)||!vr(t))return null;const n=e.internals.handleBounds||wr(e.handles),o=t.internals.handleBounds||wr(t.handles),s=yr((n==null?void 0:n.source)??[],l.sourceHandle),i=yr(l.connectionMode===al.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),l.targetHandle);if(!s||!i)return(f=l.onError)==null||f.call(l,"008",Ul.error008(s?"target":"source",{id:l.id,sourceHandle:l.sourceHandle,targetHandle:l.targetHandle})),null;const r=(s==null?void 0:s.position)||st.Bottom,a=(i==null?void 0:i.position)||st.Top,c=Bl(e,s,r),u=Bl(t,i,a);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:r,targetPosition:a}}function wr(l){if(!l)return null;const e=[],t=[];for(const n of l)n.width=n.width??1,n.height=n.height??1,n.type==="source"?e.push(n):n.type==="target"&&t.push(n);return{source:e,target:t}}function Bl(l,e,t=st.Left,n=!1){const o=((e==null?void 0:e.x)??0)+l.internals.positionAbsolute.x,s=((e==null?void 0:e.y)??0)+l.internals.positionAbsolute.y,{width:i,height:r}=e??Cl(l);if(n)return{x:o+i/2,y:s+r/2};switch((e==null?void 0:e.position)??t){case st.Top:return{x:o+i/2,y:s};case st.Right:return{x:o+i,y:s+r/2};case st.Bottom:return{x:o+i/2,y:s+r};case st.Left:return{x:o,y:s+r/2}}}function yr(l,e){return l&&(e?l.find(t=>t.id===e):l[0])||null}function Yo(l,e){return l?typeof l=="string"?l:`${e?`${e}__`:""}${Object.keys(l).sort().map(n=>`${n}=${l[n]}`).join("&")}`:""}function uh(l,{id:e,defaultColor:t,defaultMarkerStart:n,defaultMarkerEnd:o}){const s=new Set;return l.reduce((i,r)=>([r.markerStart||n,r.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const c=Yo(a,e);s.has(c)||(i.push({id:c,color:a.color||t,...a}),s.add(c))}}),i),[]).sort((i,r)=>i.id.localeCompare(r.id))}const la={nodeOrigin:[0,0],nodeExtent:so,elevateNodesOnSelect:!0,defaults:{}},fh={...la,checkEquality:!0};function oa(l,e){const t={...l};for(const n in e)e[n]!==void 0&&(t[n]=e[n]);return t}function sa(l,e,t,n){var r,a;const o=oa(fh,n),s=new Map(e),i=o!=null&&o.elevateNodesOnSelect?1e3:0;e.clear(),t.clear();for(const c of l){let u=s.get(c.id);if(o.checkEquality&&c===(u==null?void 0:u.internals.userNode))e.set(c.id,u);else{const f=vo(c,o.nodeOrigin),h=Hl(c.extent)?c.extent:o.nodeExtent,d=El(f,h,Cl(c));u={...o.defaults,...c,measured:{width:(r=c.measured)==null?void 0:r.width,height:(a=c.measured)==null?void 0:a.height},internals:{positionAbsolute:d,handleBounds:c.measured?u==null?void 0:u.internals.handleBounds:void 0,z:ia(c,i),userNode:c}},e.set(c.id,u)}c.parentId&&ra(u,e,t,n)}}function dh(l,e){if(!l.parentId)return;const t=e.get(l.parentId);t?t.set(l.id,l):e.set(l.parentId,new Map([[l.id,l]]))}function ra(l,e,t,n){const{elevateNodesOnSelect:o,nodeOrigin:s,nodeExtent:i}=oa(la,n),r=l.parentId,a=e.get(r);if(!a){console.warn(`Parent node ${r} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}dh(l,t);const c=o?1e3:0,{x:u,y:f,z:h}=hh(l,a,s,i,c),{positionAbsolute:d}=l.internals,_=u!==d.x||f!==d.y;(_||h!==l.internals.z)&&(l.internals={...l.internals,positionAbsolute:_?{x:u,y:f}:d,z:h})}function ia(l,e){return(Nn(l.zIndex)?l.zIndex:0)+(l.selected?e:0)}function hh(l,e,t,n,o){const{x:s,y:i}=e.internals.positionAbsolute,r=Cl(l),a=vo(l,t),c=Hl(l.extent)?El(a,l.extent,r):a;let u=El({x:s+c.x,y:i+c.y},n,r);l.extent==="parent"&&(u=qi(u,r,e));const f=ia(l,o),h=e.internals.z??0;return{x:u.x,y:u.y,z:h>f?h:f}}function mh(l,e,t,n=[0,0]){var i;const o=[],s=new Map;for(const r of l){const a=e.get(r.parentId);if(!a)continue;const c=((i=s.get(r.parentId))==null?void 0:i.expandedRect)??Il(a),u=Gd(c,r.rect);s.set(r.parentId,{expandedRect:u,parent:a})}return s.size>0&&s.forEach(({expandedRect:r,parent:a},c)=>{var y;const u=a.internals.positionAbsolute,f=Cl(a),h=a.origin??n,d=r.x<u.x?Math.round(Math.abs(u.x-r.x)):0,_=r.y<u.y?Math.round(Math.abs(u.y-r.y)):0,b=Math.max(f.width,Math.round(r.width)),v=Math.max(f.height,Math.round(r.height)),g=(b-f.width)*h[0],w=(v-f.height)*h[1];(d>0||_>0||g||w)&&(o.push({id:c,type:"position",position:{x:a.position.x-d+g,y:a.position.y-_+w}}),(y=t.get(c))==null||y.forEach(k=>{l.some(I=>I.id===k.id)||o.push({id:k.id,type:"position",position:{x:k.position.x+d,y:k.position.y+_}})})),(f.width<r.width||f.height<r.height||d||_)&&o.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:b+(d?h[0]*d-g:0),height:v+(_?h[1]*_-w:0)}})}),o}function gh(l,e,t,n,o,s){const i=n==null?void 0:n.querySelector(".xyflow__viewport");let r=!1;if(!i)return{changes:[],updatedInternals:r};const a=[],c=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(c.transform),f=[];for(const h of l.values()){const d=e.get(h.id);if(d)if(d.hidden)d.internals={...d.internals,handleBounds:void 0},r=!0;else{const _=xi(h.nodeElement),b=d.measured.width!==_.width||d.measured.height!==_.height;if(!!(_.width&&_.height&&(b||!d.internals.handleBounds||h.force))){const g=h.nodeElement.getBoundingClientRect(),w=Hl(d.extent)?d.extent:s;let{positionAbsolute:y}=d.internals;d.parentId&&d.extent==="parent"?y=qi(y,_,e.get(d.parentId)):w&&(y=El(y,w,_)),d.measured=_,d.internals={...d.internals,positionAbsolute:y,handleBounds:{source:gr("source",h.nodeElement,g,u,d.id),target:gr("target",h.nodeElement,g,u,d.id)}},d.parentId&&ra(d,e,t,{nodeOrigin:o}),r=!0,b&&(a.push({id:d.id,type:"dimensions",dimensions:_}),d.expandParent&&d.parentId&&f.push({id:d.id,parentId:d.parentId,rect:Il(d,o)}))}}}if(f.length>0){const h=mh(f,e,t,o);a.push(...h)}return{changes:a,updatedInternals:r}}async function _h({delta:l,panZoom:e,transform:t,translateExtent:n,width:o,height:s}){if(!e||!l.x&&!l.y)return Promise.resolve(!1);const i=await e.setViewportConstrained({x:t[0]+l.x,y:t[1]+l.y,zoom:t[2]},[[0,0],[o,s]],n),r=!!i&&(i.x!==t[0]||i.y!==t[1]||i.k!==t[2]);return Promise.resolve(r)}function aa(l,e,t){l.clear(),e.clear();for(const n of t){const{source:o,target:s,sourceHandle:i=null,targetHandle:r=null}=n,a=`${o}-source-${i}`,c=`${s}-target-${r}`,u=l.get(a)||new Map,f=l.get(c)||new Map,h={edgeId:n.id,source:o,target:s,sourceHandle:i,targetHandle:r};e.set(n.id,n),l.set(a,u.set(`${s}-${r}`,h)),l.set(c,f.set(`${o}-${i}`,h))}}function ca(l,e){if(!l.parentId)return!1;const t=e.get(l.parentId);return t?t.selected?!0:ca(t,e):!1}function kr(l,e,t){let n=l;do{if(n!=null&&n.matches(e))return!0;if(n===t)return!1;n=n.parentElement}while(n);return!1}function ph(l,e,t,n){const o=new Map;for(const[s,i]of l)if((i.selected||i.id===n)&&(!i.parentId||!ca(i,l))&&(i.draggable||e&&typeof i.draggable>"u")){const r=l.get(s);r&&o.set(s,{id:s,position:r.position||{x:0,y:0},distance:{x:t.x-r.internals.positionAbsolute.x,y:t.y-r.internals.positionAbsolute.y},extent:r.extent,parentId:r.parentId,origin:r.origin,expandParent:r.expandParent,internals:{positionAbsolute:r.internals.positionAbsolute||{x:0,y:0}},measured:{width:r.measured.width??0,height:r.measured.height??0}})}return o}function Oo({nodeId:l,dragItems:e,nodeLookup:t,dragging:n=!0}){var i,r;const o=[];for(const[a,c]of e){const u=(i=t.get(a))==null?void 0:i.internals.userNode;u&&o.push({...u,position:c.position,dragging:n})}if(!l)return[o[0],o];const s=t.get(l).internals.userNode;return[{...s,position:((r=e.get(l))==null?void 0:r.position)||s.position,dragging:n},o]}function bh({onNodeMouseDown:l,getStoreItems:e,onDragStart:t,onDrag:n,onDragStop:o}){let s={x:null,y:null},i=0,r=new Map,a=!1,c={x:0,y:0},u=null,f=!1,h=null,d=!1;function _({noDragClassName:v,handleSelector:g,domNode:w,isSelectable:y,nodeId:k,nodeClickDistance:I=0}){h=zn(w);function V({x:H,y:F},Y){const{nodeLookup:G,nodeExtent:D,snapGrid:K,snapToGrid:M,nodeOrigin:W,onNodeDrag:j,onSelectionDrag:Z,onError:A,updateNodePositions:X}=e();s={x:H,y:F};let q=!1,se={x:0,y:0,x2:0,y2:0};if(r.size>1&&D){const J=wo(r);se=Fo(J)}for(const[J,me]of r){let _e={x:H-me.distance.x,y:F-me.distance.y};M&&(_e=xo(_e,K));let ie=[[D[0][0],D[0][1]],[D[1][0],D[1][1]]];if(r.size>1&&D&&!me.extent){const{positionAbsolute:ae}=me.internals,Re=ae.x-se.x+D[0][0],Ie=ae.x+me.measured.width-se.x2+D[1][0],Je=ae.y-se.y+D[0][1],he=ae.y+me.measured.height-se.y2+D[1][1];ie=[[Re,Je],[Ie,he]]}const{position:le,positionAbsolute:Pe}=Kd({nodeId:J,nextPosition:_e,nodeLookup:G,nodeExtent:ie,nodeOrigin:W,onError:A});q=q||me.position.x!==le.x||me.position.y!==le.y,me.position=le,me.internals.positionAbsolute=Pe}if(q&&(X(r,!0),Y&&(n||j||!k&&Z))){const[J,me]=Oo({nodeId:k,dragItems:r,nodeLookup:G});n==null||n(Y,r,J,me),j==null||j(Y,J,me),k||Z==null||Z(Y,me)}}async function T(){if(!u)return;const{transform:H,panBy:F,autoPanSpeed:Y}=e(),[G,D]=Ji(c,u,Y);(G!==0||D!==0)&&(s.x=(s.x??0)-G/H[2],s.y=(s.y??0)-D/H[2],await F({x:G,y:D})&&V(s,null)),i=requestAnimationFrame(T)}function L(H){var q;const{nodeLookup:F,multiSelectionActive:Y,nodesDraggable:G,transform:D,snapGrid:K,snapToGrid:M,selectNodesOnDrag:W,onNodeDragStart:j,onSelectionDragStart:Z,unselectNodesAndEdges:A}=e();f=!0,(!W||!y)&&!Y&&k&&((q=F.get(k))!=null&&q.selected||A()),y&&W&&k&&(l==null||l(k));const X=Po(H.sourceEvent,{transform:D,snapGrid:K,snapToGrid:M});if(s=X,r=ph(F,G,X,k),r.size>0&&(t||j||!k&&Z)){const[se,J]=Oo({nodeId:k,dragItems:r,nodeLookup:F});t==null||t(H.sourceEvent,r,se,J),j==null||j(H.sourceEvent,se,J),k||Z==null||Z(H.sourceEvent,J)}}const O=hu().clickDistance(I).on("start",H=>{const{domNode:F,nodeDragThreshold:Y,transform:G,snapGrid:D,snapToGrid:K}=e();d=!1,Y===0&&L(H),s=Po(H.sourceEvent,{transform:G,snapGrid:D,snapToGrid:K}),u=(F==null?void 0:F.getBoundingClientRect())||null,c=Yn(H.sourceEvent,u)}).on("drag",H=>{const{autoPanOnNodeDrag:F,transform:Y,snapGrid:G,snapToGrid:D,nodeDragThreshold:K}=e(),M=Po(H.sourceEvent,{transform:Y,snapGrid:G,snapToGrid:D});if(H.sourceEvent.type==="touchmove"&&H.sourceEvent.touches.length>1&&(d=!0),!d){if(!a&&F&&f&&(a=!0,T()),!f){const W=M.xSnapped-(s.x??0),j=M.ySnapped-(s.y??0);Math.sqrt(W*W+j*j)>K&&L(H)}(s.x!==M.xSnapped||s.y!==M.ySnapped)&&r&&f&&(c=Yn(H.sourceEvent,u),V(M,H.sourceEvent))}}).on("end",H=>{if(!(!f||d)&&(a=!1,f=!1,cancelAnimationFrame(i),r.size>0)){const{nodeLookup:F,updateNodePositions:Y,onNodeDragStop:G,onSelectionDragStop:D}=e();if(Y(r,!1),o||G||!k&&D){const[K,M]=Oo({nodeId:k,dragItems:r,nodeLookup:F,dragging:!1});o==null||o(H.sourceEvent,r,K,M),G==null||G(H.sourceEvent,K,M),k||D==null||D(H.sourceEvent,M)}}}).filter(H=>{const F=H.target;return!H.button&&(!v||!kr(F,`.${v}`,w))&&(!g||kr(F,g,w))});h.call(O)}function b(){h==null||h.on(".drag",null)}return{update:_,destroy:b}}function vh(l,e,t){const n=[],o={x:l.x-t,y:l.y-t,width:t*2,height:t*2};for(const s of e.values())Ol(o,Il(s))>0&&n.push(s);return n}const wh=250;function yh(l,e,t,n){var r,a;let o=[],s=1/0;const i=vh(l,t,e+wh);for(const c of i){const u=[...((r=c.internals.handleBounds)==null?void 0:r.source)??[],...((a=c.internals.handleBounds)==null?void 0:a.target)??[]];for(const f of u){if(n.nodeId===f.nodeId&&n.type===f.type&&n.id===f.id)continue;const{x:h,y:d}=Bl(c,f,f.position,!0),_=Math.sqrt(Math.pow(h-l.x,2)+Math.pow(d-l.y,2));_>e||(_<s?(o=[{...f,x:h,y:d}],s=_):_===s&&o.push({...f,x:h,y:d}))}}if(!o.length)return null;if(o.length>1){const c=n.type==="source"?"target":"source";return o.find(u=>u.type===c)??o[0]}return o[0]}function ua(l,e,t,n,o,s=!1){var c,u,f;const i=n.get(l);if(!i)return null;const r=o==="strict"?(c=i.internals.handleBounds)==null?void 0:c[e]:[...((u=i.internals.handleBounds)==null?void 0:u.source)??[],...((f=i.internals.handleBounds)==null?void 0:f.target)??[]],a=(t?r==null?void 0:r.find(h=>h.id===t):r==null?void 0:r[0])??null;return a&&s?{...a,...Bl(i,a,a.position,!0)}:a}function fa(l,e){return l||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function kh(l,e){let t=null;return e?t=!0:l&&!e&&(t=!1),t}const da=()=>!0;function Eh(l,{connectionMode:e,connectionRadius:t,handleId:n,nodeId:o,edgeUpdaterType:s,isTarget:i,domNode:r,nodeLookup:a,lib:c,autoPanOnConnect:u,flowId:f,panBy:h,cancelConnection:d,onConnectStart:_,onConnect:b,onConnectEnd:v,isValidConnection:g=da,onReconnectEnd:w,updateConnection:y,getTransform:k,getFromHandle:I,autoPanSpeed:V}){const T=Qd(l.target);let L=0,O;const{x:H,y:F}=Yn(l),Y=T==null?void 0:T.elementFromPoint(H,F),G=fa(s,Y),D=r==null?void 0:r.getBoundingClientRect();if(!D||!G)return;const K=ua(o,G,n,a,e);if(!K)return;let M=Yn(l,D),W=!1,j=null,Z=!1,A=null;function X(){if(!u||!D)return;const[Pe,ae]=Ji(M,D,V);h({x:Pe,y:ae}),L=requestAnimationFrame(X)}const q={...K,nodeId:o,type:G,position:K.position},se=a.get(o),me={inProgress:!0,isValid:null,from:Bl(se,q,st.Left,!0),fromHandle:q,fromPosition:q.position,fromNode:se,to:M,toHandle:null,toPosition:ir[q.position],toNode:null};y(me);let _e=me;_==null||_(l,{nodeId:o,handleId:n,handleType:G});function ie(Pe){if(!I()||!q){le(Pe);return}const ae=k();M=Yn(Pe,D),O=yh(Wl(M,ae,!1,[1,1]),t,a,q),W||(X(),W=!0);const Re=ha(Pe,{handle:O,connectionMode:e,fromNodeId:o,fromHandleId:n,fromType:i?"target":"source",isValidConnection:g,doc:T,lib:c,flowId:f,nodeLookup:a});A=Re.handleDomNode,j=Re.connection,Z=kh(!!O,Re.isValid);const Ie={..._e,isValid:Z,to:O&&Z?Qi({x:O.x,y:O.y},ae):M,toHandle:Re.toHandle,toPosition:Z&&Re.toHandle?Re.toHandle.position:ir[q.position],toNode:Re.toHandle?a.get(Re.toHandle.nodeId):null};Z&&O&&_e.toHandle&&Ie.toHandle&&_e.toHandle.type===Ie.toHandle.type&&_e.toHandle.nodeId===Ie.toHandle.nodeId&&_e.toHandle.id===Ie.toHandle.id&&_e.to.x===Ie.to.x&&_e.to.y===Ie.to.y||(y(Ie),_e=Ie)}function le(Pe){(O||A)&&j&&Z&&(b==null||b(j));const{inProgress:ae,...Re}=_e,Ie={...Re,toPosition:_e.toHandle?_e.toPosition:null};v==null||v(Pe,Ie),s&&(w==null||w(Pe,Ie)),d(),cancelAnimationFrame(L),W=!1,Z=!1,j=null,A=null,T.removeEventListener("mousemove",ie),T.removeEventListener("mouseup",le),T.removeEventListener("touchmove",ie),T.removeEventListener("touchend",le)}T.addEventListener("mousemove",ie),T.addEventListener("mouseup",le),T.addEventListener("touchmove",ie),T.addEventListener("touchend",le)}function ha(l,{handle:e,connectionMode:t,fromNodeId:n,fromHandleId:o,fromType:s,doc:i,lib:r,flowId:a,isValidConnection:c=da,nodeLookup:u}){const f=s==="target",h=e?i.querySelector(`.${r}-flow__handle[data-id="${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:d,y:_}=Yn(l),b=i.elementFromPoint(d,_),v=b!=null&&b.classList.contains(`${r}-flow__handle`)?b:h,g={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const w=fa(void 0,v),y=v.getAttribute("data-nodeid"),k=v.getAttribute("data-handleid"),I=v.classList.contains("connectable"),V=v.classList.contains("connectableend");if(!y||!w)return g;const T={source:f?y:n,sourceHandle:f?k:o,target:f?n:y,targetHandle:f?o:k};g.connection=T;const O=I&&V&&(t===al.Strict?f&&w==="source"||!f&&w==="target":y!==n||k!==o);g.isValid=O&&c(T),g.toHandle=ua(y,w,k,u,t,!1)}return g}const Ih={onPointerDown:Eh,isValid:ha},Sh=(l,e)=>l.x!==e.x||l.y!==e.y||l.zoom!==e.k,Eo=l=>({x:l.x,y:l.y,zoom:l.k}),Ho=({x:l,y:e,zoom:t})=>qo.translate(l,e).scale(t),_l=(l,e)=>l.target.closest(`.${e}`),ma=(l,e)=>e===2&&Array.isArray(l)&&l.includes(2),Bo=(l,e=0,t=()=>{})=>{const n=typeof e=="number"&&e>0;return n||t(),n?l.transition().duration(e).on("end",t):l},ga=l=>{const e=l.ctrlKey&&co()?10:1;return-l.deltaY*(l.deltaMode===1?.05:l.deltaMode?1:.002)*e};function Ch({zoomPanValues:l,noWheelClassName:e,d3Selection:t,d3Zoom:n,panOnScrollMode:o,panOnScrollSpeed:s,zoomOnPinch:i,onPanZoomStart:r,onPanZoom:a,onPanZoomEnd:c}){return u=>{if(_l(u,e))return!1;u.preventDefault(),u.stopImmediatePropagation();const f=t.property("__zoom").k||1;if(u.ctrlKey&&i){const v=Ln(u),g=ga(u),w=f*Math.pow(2,g);n.scaleTo(t,w,v,u);return}const h=u.deltaMode===1?20:1;let d=o===Un.Vertical?0:u.deltaX*h,_=o===Un.Horizontal?0:u.deltaY*h;!co()&&u.shiftKey&&o!==Un.Vertical&&(d=u.deltaY*h,_=0),n.translateBy(t,-(d/f)*s,-(_/f)*s,{internal:!0});const b=Eo(t.property("__zoom"));clearTimeout(l.panScrollTimeout),l.isPanScrolling||(l.isPanScrolling=!0,r==null||r(u,b)),l.isPanScrolling&&(a==null||a(u,b),l.panScrollTimeout=setTimeout(()=>{c==null||c(u,b),l.isPanScrolling=!1},150))}}function Dh({noWheelClassName:l,preventScrolling:e,d3ZoomHandler:t}){return function(n,o){if(!e&&n.type==="wheel"&&!n.ctrlKey||_l(n,l))return null;n.preventDefault(),t.call(this,n,o)}}function Mh({zoomPanValues:l,onDraggingChange:e,onPanZoomStart:t}){return n=>{var s,i,r;if((s=n.sourceEvent)!=null&&s.internal)return;const o=Eo(n.transform);l.mouseButton=((i=n.sourceEvent)==null?void 0:i.button)||0,l.isZoomingOrPanning=!0,l.prevViewport=o,((r=n.sourceEvent)==null?void 0:r.type)==="mousedown"&&e(!0),t&&(t==null||t(n.sourceEvent,o))}}function Th({zoomPanValues:l,panOnDrag:e,onPaneContextMenu:t,onTransformChange:n,onPanZoom:o}){return s=>{var i,r;l.usedRightMouseButton=!!(t&&ma(e,l.mouseButton??0)),(i=s.sourceEvent)!=null&&i.sync||n([s.transform.x,s.transform.y,s.transform.k]),o&&!((r=s.sourceEvent)!=null&&r.internal)&&(o==null||o(s.sourceEvent,Eo(s.transform)))}}function Vh({zoomPanValues:l,panOnDrag:e,panOnScroll:t,onDraggingChange:n,onPanZoomEnd:o,onPaneContextMenu:s}){return i=>{var r;if(!((r=i.sourceEvent)!=null&&r.internal)&&(l.isZoomingOrPanning=!1,s&&ma(e,l.mouseButton??0)&&!l.usedRightMouseButton&&i.sourceEvent&&s(i.sourceEvent),l.usedRightMouseButton=!1,n(!1),o&&Sh(l.prevViewport,i.transform))){const a=Eo(i.transform);l.prevViewport=a,clearTimeout(l.timerId),l.timerId=setTimeout(()=>{o==null||o(i.sourceEvent,a)},t?150:0)}}}function zh({zoomActivationKeyPressed:l,zoomOnScroll:e,zoomOnPinch:t,panOnDrag:n,panOnScroll:o,zoomOnDoubleClick:s,userSelectionActive:i,noWheelClassName:r,noPanClassName:a,lib:c}){return u=>{var _;const f=l||e,h=t&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(_l(u,`${c}-flow__node`)||_l(u,`${c}-flow__edge`)))return!0;if(!n&&!f&&!o&&!s&&!t||i||_l(u,r)&&u.type==="wheel"||_l(u,a)&&(u.type!=="wheel"||o&&u.type==="wheel"&&!l)||!t&&u.ctrlKey&&u.type==="wheel")return!1;if(!t&&u.type==="touchstart"&&((_=u.touches)==null?void 0:_.length)>1)return u.preventDefault(),!1;if(!f&&!o&&!h&&u.type==="wheel"||!n&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(n)&&!n.includes(u.button)&&u.type==="mousedown")return!1;const d=Array.isArray(n)&&n.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&d}}function Nh({domNode:l,minZoom:e,maxZoom:t,paneClickDistance:n,translateExtent:o,viewport:s,onPanZoom:i,onPanZoomStart:r,onPanZoomEnd:a,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=l.getBoundingClientRect(),h=Iu().clickDistance(!Nn(n)||n<0?0:n).scaleExtent([e,t]).translateExtent(o),d=zn(l).call(h);y({x:s.x,y:s.y,zoom:kl(s.zoom,e,t)},[[0,0],[f.width,f.height]],o);const _=d.on("wheel.zoom"),b=d.on("dblclick.zoom");h.wheelDelta(ga);function v(Y,G){return d?new Promise(D=>{h==null||h.transform(Bo(d,G==null?void 0:G.duration,()=>D(!0)),Y)}):Promise.resolve(!1)}function g({noWheelClassName:Y,noPanClassName:G,onPaneContextMenu:D,userSelectionActive:K,panOnScroll:M,panOnDrag:W,panOnScrollMode:j,panOnScrollSpeed:Z,preventScrolling:A,zoomOnPinch:X,zoomOnScroll:q,zoomOnDoubleClick:se,zoomActivationKeyPressed:J,lib:me,onTransformChange:_e}){K&&!u.isZoomingOrPanning&&w();const le=M&&!J&&!K?Ch({zoomPanValues:u,noWheelClassName:Y,d3Selection:d,d3Zoom:h,panOnScrollMode:j,panOnScrollSpeed:Z,zoomOnPinch:X,onPanZoomStart:r,onPanZoom:i,onPanZoomEnd:a}):Dh({noWheelClassName:Y,preventScrolling:A,d3ZoomHandler:_});if(d.on("wheel.zoom",le,{passive:!1}),!K){const ae=Mh({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:r});h.on("start",ae);const Re=Th({zoomPanValues:u,panOnDrag:W,onPaneContextMenu:!!D,onPanZoom:i,onTransformChange:_e});h.on("zoom",Re);const Ie=Vh({zoomPanValues:u,panOnDrag:W,panOnScroll:M,onPaneContextMenu:D,onPanZoomEnd:a,onDraggingChange:c});h.on("end",Ie)}const Pe=zh({zoomActivationKeyPressed:J,panOnDrag:W,zoomOnScroll:q,panOnScroll:M,zoomOnDoubleClick:se,zoomOnPinch:X,userSelectionActive:K,noPanClassName:G,noWheelClassName:Y,lib:me});h.filter(Pe),se?d.on("dblclick.zoom",b):d.on("dblclick.zoom",null)}function w(){h.on("zoom",null)}async function y(Y,G,D){const K=Ho(Y),M=h==null?void 0:h.constrain()(K,G,D);return M&&await v(M),new Promise(W=>W(M))}async function k(Y,G){const D=Ho(Y);return await v(D,G),new Promise(K=>K(D))}function I(Y){if(d){const G=Ho(Y),D=d.property("__zoom");(D.k!==Y.zoom||D.x!==Y.x||D.y!==Y.y)&&(h==null||h.transform(d,G,null,{sync:!0}))}}function V(){const Y=d?Uc(d.node()):{x:0,y:0,k:1};return{x:Y.x,y:Y.y,zoom:Y.k}}function T(Y,G){return d?new Promise(D=>{h==null||h.scaleTo(Bo(d,G==null?void 0:G.duration,()=>D(!0)),Y)}):Promise.resolve(!1)}function L(Y,G){return d?new Promise(D=>{h==null||h.scaleBy(Bo(d,G==null?void 0:G.duration,()=>D(!0)),Y)}):Promise.resolve(!1)}function O(Y){h==null||h.scaleExtent(Y)}function H(Y){h==null||h.translateExtent(Y)}function F(Y){const G=!Nn(Y)||Y<0?0:Y;h==null||h.clickDistance(G)}return{update:g,destroy:w,setViewport:k,setViewportConstrained:y,getViewport:V,scaleTo:T,scaleBy:L,setScaleExtent:O,setTranslateExtent:H,syncViewport:I,setClickDistance:F}}var Er;(function(l){l.Line="line",l.Handle="handle"})(Er||(Er={}));function Ph(l){let e,t,n,o,s,i;const r=l[45].default,a=Kt(r,l,l[44],null);return{c(){e=z("div"),a&&a.c(),this.h()},l(c){e=N(c,"DIV",{"data-handleid":!0,"data-nodeid":!0,"data-handlepos":!0,"data-id":!0,class:!0,style:!0,role:!0,tabindex:!0});var u=C(e);a&&a.l(u),u.forEach(p),this.h()},h(){m(e,"data-handleid",l[6]),m(e,"data-nodeid",l[14]),m(e,"data-handlepos",l[2]),m(e,"data-id",t=l[13]+"-"+l[14]+"-"+(l[0]||null)+"-"+l[1]),m(e,"class",n=Ht(["svelte-flow__handle",`svelte-flow__handle-${l[2]}`,"nodrag","nopan",l[2],l[4]])),m(e,"style",l[3]),m(e,"role","button"),m(e,"tabindex","-1"),ot(e,"valid",l[7]),ot(e,"connectingto",l[5]),ot(e,"connectingfrom",l[9]),ot(e,"source",!l[11]),ot(e,"target",l[11]),ot(e,"connectablestart",l[12]),ot(e,"connectableend",l[12]),ot(e,"connectable",l[12]),ot(e,"connectionindicator",l[12]&&(!l[10]||l[8]))},m(c,u){B(c,e,u),a&&a.m(e,null),o=!0,s||(i=[ke(e,"mousedown",l[32]),ke(e,"touchstart",l[32])],s=!0)},p(c,u){a&&a.p&&(!o||u[1]&8192)&&Gt(a,r,c,c[44],o?Jt(r,c[44],u,null):qt(c[44]),null),(!o||u[0]&64)&&m(e,"data-handleid",c[6]),(!o||u[0]&4)&&m(e,"data-handlepos",c[2]),(!o||u[0]&8195&&t!==(t=c[13]+"-"+c[14]+"-"+(c[0]||null)+"-"+c[1]))&&m(e,"data-id",t),(!o||u[0]&20&&n!==(n=Ht(["svelte-flow__handle",`svelte-flow__handle-${c[2]}`,"nodrag","nopan",c[2],c[4]])))&&m(e,"class",n),(!o||u[0]&8)&&m(e,"style",c[3]),(!o||u[0]&148)&&ot(e,"valid",c[7]),(!o||u[0]&52)&&ot(e,"connectingto",c[5]),(!o||u[0]&532)&&ot(e,"connectingfrom",c[9]),(!o||u[0]&2068)&&ot(e,"source",!c[11]),(!o||u[0]&2068)&&ot(e,"target",c[11]),(!o||u[0]&4116)&&ot(e,"connectablestart",c[12]),(!o||u[0]&4116)&&ot(e,"connectableend",c[12]),(!o||u[0]&4116)&&ot(e,"connectable",c[12]),(!o||u[0]&5396)&&ot(e,"connectionindicator",c[12]&&(!c[10]||c[8]))},i(c){o||(S(a,c),o=!0)},o(c){P(a,c),o=!1},d(c){c&&p(e),a&&a.d(c),s=!1,en(i)}}}function Oh(l,e,t){let n,o,s,i,r,a,c,u,f,h,d,_,b,v,g,w,y,k,I,V,T,L,O,H,F,{$$slots:Y={},$$scope:G}=e,{id:D=void 0}=e,{type:K="source"}=e,{position:M=st.Top}=e,{style:W=void 0}=e,{isValidConnection:j=void 0}=e,{onconnect:Z=void 0}=e,{ondisconnect:A=void 0}=e,{isConnectable:X=void 0}=e,{class:q=void 0}=e;const se=Lt("svelteflow__node_id"),J=Lt("svelteflow__node_connectable");ce(l,J,Me=>t(43,F=Me));const me=jt(),{connectionMode:_e,domNode:ie,nodeLookup:le,connectionRadius:Pe,viewport:ae,isValidConnection:Re,lib:Ie,addEdge:Je,onedgecreate:he,panBy:rt,cancelConnection:it,updateConnection:Rt,autoPanOnConnect:Mt,edges:bt,connectionLookup:pe,onconnect:Xe,onconnectstart:lt,onconnectend:ht,flowId:pt,connection:fe}=me;ce(l,_e,Me=>t(40,h=Me)),ce(l,ie,Me=>t(55,O=Me)),ce(l,le,Me=>t(54,L=Me)),ce(l,Pe,Me=>t(56,H=Me)),ce(l,ae,Me=>t(46,b=Me)),ce(l,Re,Me=>t(51,k=Me)),ce(l,Ie,Me=>t(53,T=Me)),ce(l,he,Me=>t(50,y=Me)),ce(l,Mt,Me=>t(52,V=Me)),ce(l,bt,Me=>t(42,_=Me)),ce(l,pe,Me=>t(41,d=Me)),ce(l,Xe,Me=>t(49,w=Me)),ce(l,lt,Me=>t(48,g=Me)),ce(l,ht,Me=>t(47,v=Me)),ce(l,pt,Me=>t(13,I=Me)),ce(l,fe,Me=>t(39,f=Me));function Et(Me){const Vt=$i(Me);(Vt&&Me.button===0||!Vt)&&Ih.onPointerDown(Me,{handleId:s,nodeId:se,isTarget:n,connectionRadius:H,domNode:O,nodeLookup:L,connectionMode:h,lib:T,autoPanOnConnect:V,flowId:I,isValidConnection:j??k,updateConnection:Rt,cancelConnection:it,panBy:rt,onConnect:ue=>{const Te=y?y(ue):ue;Te&&(Je(Te),w==null||w(ue))},onConnectStart:(ue,Te)=>{g==null||g(ue,{nodeId:Te.nodeId,handleId:Te.handleId,handleType:Te.handleType})},onConnectEnd:(ue,Te)=>{v==null||v(ue,Te)},getTransform:()=>[b.x,b.y,b.zoom],getFromHandle:()=>f.fromHandle})}let mt=null,vt;return l.$$set=Me=>{"id"in Me&&t(0,D=Me.id),"type"in Me&&t(1,K=Me.type),"position"in Me&&t(2,M=Me.position),"style"in Me&&t(3,W=Me.style),"isValidConnection"in Me&&t(33,j=Me.isValidConnection),"onconnect"in Me&&t(34,Z=Me.onconnect),"ondisconnect"in Me&&t(35,A=Me.ondisconnect),"isConnectable"in Me&&t(36,X=Me.isConnectable),"class"in Me&&t(4,q=Me.class),"$$scope"in Me&&t(44,G=Me.$$scope)},l.$$.update=()=>{var Me,Vt,ue,Te,Be,Ke,yt,It,St;if(l.$$.dirty[0]&2&&t(11,n=K==="target"),l.$$.dirty[1]&4128&&t(12,o=X!==void 0?X:F),l.$$.dirty[0]&1&&t(6,s=D||null),l.$$.dirty[0]&3|l.$$.dirty[1]&3096&&(Z||A)&&t(38,vt=d.get(`${se}-${K}-${D||null}`)),l.$$.dirty[1]&216){if(mt&&!Fd(vt,mt)){const zt=vt??new Map;ar(mt,zt,A),ar(zt,mt,Z)}t(37,mt=vt??new Map)}l.$$.dirty[1]&256&&t(10,i=!!f.fromHandle),l.$$.dirty[0]&66|l.$$.dirty[1]&256&&t(9,r=((Me=f.fromHandle)==null?void 0:Me.nodeId)===se&&((Vt=f.fromHandle)==null?void 0:Vt.type)===K&&((ue=f.fromHandle)==null?void 0:ue.id)===s),l.$$.dirty[0]&66|l.$$.dirty[1]&256&&t(5,a=((Te=f.toHandle)==null?void 0:Te.nodeId)===se&&((Be=f.toHandle)==null?void 0:Be.type)===K&&((Ke=f.toHandle)==null?void 0:Ke.id)===s),l.$$.dirty[0]&66|l.$$.dirty[1]&768&&t(8,c=h===al.Strict?((yt=f.fromHandle)==null?void 0:yt.type)!==K:se!==((It=f.fromHandle)==null?void 0:It.nodeId)||s!==((St=f.fromHandle)==null?void 0:St.id)),l.$$.dirty[0]&32|l.$$.dirty[1]&256&&t(7,u=a&&f.isValid)},[D,K,M,W,q,a,s,u,c,r,i,n,o,I,se,J,_e,ie,le,Pe,ae,Re,Ie,he,Mt,bt,pe,Xe,lt,ht,pt,fe,Et,j,Z,A,X,mt,vt,f,h,d,_,F,G,Y]}class Sl extends Ae{constructor(e){super(),Le(this,e,Oh,Ph,We,{id:0,type:1,position:2,style:3,isValidConnection:33,onconnect:34,ondisconnect:35,isConnectable:36,class:4},null,[-1,-1])}}function Hh(l){var a;let e,t,n=((a=l[0])==null?void 0:a.label)+"",o,s,i,r;return e=new Sl({props:{type:"target",position:l[1]??st.Top}}),i=new Sl({props:{type:"source",position:l[2]??st.Bottom}}),{c(){ee(e.$$.fragment),t=x(),o=Ce(n),s=x(),ee(i.$$.fragment)},l(c){oe(e.$$.fragment,c),t=$(c),o=De(c,n),s=$(c),oe(i.$$.fragment,c)},m(c,u){te(e,c,u),B(c,t,u),B(c,o,u),B(c,s,u),te(i,c,u),r=!0},p(c,[u]){var d;const f={};u&2&&(f.position=c[1]??st.Top),e.$set(f),(!r||u&1)&&n!==(n=((d=c[0])==null?void 0:d.label)+"")&&Ne(o,n);const h={};u&4&&(h.position=c[2]??st.Bottom),i.$set(h)},i(c){r||(S(e.$$.fragment,c),S(i.$$.fragment,c),r=!0)},o(c){P(e.$$.fragment,c),P(i.$$.fragment,c),r=!1},d(c){c&&(p(t),p(o),p(s)),ne(e,c),ne(i,c)}}}function Bh(l,e,t){const n=["data","targetPosition","sourcePosition"];Wt(e,n);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e,{sourcePosition:i=void 0}=e;return l.$$set=r=>{e=kt(kt({},e),Pn(r)),t(3,Wt(e,n)),"data"in r&&t(0,o=r.data),"targetPosition"in r&&t(1,s=r.targetPosition),"sourcePosition"in r&&t(2,i=r.sourcePosition)},[o,s,i]}class _a extends Ae{constructor(e){super(),Le(this,e,Bh,Hh,We,{data:0,targetPosition:1,sourcePosition:2})}}function Ah(l){var i;let e=((i=l[0])==null?void 0:i.label)+"",t,n,o,s;return o=new Sl({props:{type:"source",position:l[1]??st.Bottom}}),{c(){t=Ce(e),n=x(),ee(o.$$.fragment)},l(r){t=De(r,e),n=$(r),oe(o.$$.fragment,r)},m(r,a){B(r,t,a),B(r,n,a),te(o,r,a),s=!0},p(r,[a]){var u;(!s||a&1)&&e!==(e=((u=r[0])==null?void 0:u.label)+"")&&Ne(t,e);const c={};a&2&&(c.position=r[1]??st.Bottom),o.$set(c)},i(r){s||(S(o.$$.fragment,r),s=!0)},o(r){P(o.$$.fragment,r),s=!1},d(r){r&&(p(t),p(n)),ne(o,r)}}}function Lh(l,e,t){const n=["data","sourcePosition"];Wt(e,n);let{data:o={label:"Node"}}=e,{sourcePosition:s=void 0}=e;return l.$$set=i=>{e=kt(kt({},e),Pn(i)),t(2,Wt(e,n)),"data"in i&&t(0,o=i.data),"sourcePosition"in i&&t(1,s=i.sourcePosition)},[o,s]}class Rh extends Ae{constructor(e){super(),Le(this,e,Lh,Ah,We,{data:0,sourcePosition:1})}}function Uh(l){var i;let e=((i=l[0])==null?void 0:i.label)+"",t,n,o,s;return o=new Sl({props:{type:"target",position:l[1]??st.Top}}),{c(){t=Ce(e),n=x(),ee(o.$$.fragment)},l(r){t=De(r,e),n=$(r),oe(o.$$.fragment,r)},m(r,a){B(r,t,a),B(r,n,a),te(o,r,a),s=!0},p(r,[a]){var u;(!s||a&1)&&e!==(e=((u=r[0])==null?void 0:u.label)+"")&&Ne(t,e);const c={};a&2&&(c.position=r[1]??st.Top),o.$set(c)},i(r){s||(S(o.$$.fragment,r),s=!0)},o(r){P(o.$$.fragment,r),s=!1},d(r){r&&(p(t),p(n)),ne(o,r)}}}function Wh(l,e,t){const n=["data","targetPosition"];Wt(e,n);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e;return l.$$set=i=>{e=kt(kt({},e),Pn(i)),t(2,Wt(e,n)),"data"in i&&t(0,o=i.data),"targetPosition"in i&&t(1,s=i.targetPosition)},[o,s]}class jh extends Ae{constructor(e){super(),Le(this,e,Wh,Uh,We,{data:0,targetPosition:1})}}function Fh(l,e,t){const n=[];return Wt(e,n),l.$$set=o=>{e=kt(kt({},e),Pn(o)),t(0,Wt(e,n))},[]}class Yh extends Ae{constructor(e){super(),Le(this,e,Fh,null,We,{})}}function Ir(l,e,t){if(!e)return;const n=t?e.querySelector(t):e;n&&n.appendChild(l)}function Zh(l,{target:e,domNode:t}){return Ir(l,t,e),{async update({target:n,domNode:o}){Ir(l,o,n)},destroy(){l.parentNode&&l.parentNode.removeChild(l)}}}function Xh(l){let e,t,n,o,s;const i=l[3].default,r=Kt(i,l,l[2],null);return{c(){e=z("div"),r&&r.c()},l(a){e=N(a,"DIV",{});var c=C(e);r&&r.l(c),c.forEach(p)},m(a,c){B(a,e,c),r&&r.m(e,null),n=!0,o||(s=hn(t=Zh.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:l[0]})),o=!0)},p(a,[c]){r&&r.p&&(!n||c&4)&&Gt(r,i,a,a[2],n?Jt(i,a[2],c,null):qt(a[2]),null),t&&$t(t.update)&&c&1&&t.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:a[0]})},i(a){n||(S(r,a),n=!0)},o(a){P(r,a),n=!1},d(a){a&&p(e),r&&r.d(a),o=!1,s()}}}function Kh(l,e,t){let n,{$$slots:o={},$$scope:s}=e;const{domNode:i}=jt();return ce(l,i,r=>t(0,n=r)),l.$$set=r=>{"$$scope"in r&&t(2,s=r.$$scope)},[n,i,s,o]}class Gh extends Ae{constructor(e){super(),Le(this,e,Kh,Xh,We,{})}}function pa(){const{edgeLookup:l,selectionRect:e,selectionRectMode:t,multiselectionKeyPressed:n,addSelectedEdges:o,unselectNodesAndEdges:s,elementsSelectable:i}=jt();return r=>{const a=de(l).get(r);if(!a){console.warn("012",Ul.error012(r));return}(a.selectable||de(i)&&typeof a.selectable>"u")&&(e.set(null),t.set(null),a.selected?a.selected&&de(n)&&s({nodes:[],edges:[a]}):o([r]))}}function qh(l){let e,t,n=`translate(-50%, -50%) translate(${l[1]}px,${l[2]}px)`,o,s,i;const r=l[5].default,a=Kt(r,l,l[7],null);return{c(){e=z("div"),a&&a.c(),this.h()},l(c){e=N(c,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var u=C(e);a&&a.l(u),u.forEach(p),this.h()},h(){m(e,"class","svelte-flow__edge-label"),m(e,"style",t="pointer-events: all;"+l[0]),m(e,"role","button"),m(e,"tabindex","-1"),et(e,"transform",n)},m(c,u){B(c,e,u),a&&a.m(e,null),o=!0,s||(i=[ke(e,"keyup",Qh),ke(e,"click",l[6])],s=!0)},p(c,u){a&&a.p&&(!o||u&128)&&Gt(a,r,c,c[7],o?Jt(r,c[7],u,null):qt(c[7]),null),(!o||u&1&&t!==(t="pointer-events: all;"+c[0]))&&m(e,"style",t);const f=u&1;(u&7&&n!==(n=`translate(-50%, -50%) translate(${c[1]}px,${c[2]}px)`)||f)&&et(e,"transform",n)},i(c){o||(S(a,c),o=!0)},o(c){P(a,c),o=!1},d(c){c&&p(e),a&&a.d(c),s=!1,en(i)}}}function Jh(l){let e,t;return e=new Gh({props:{$$slots:{default:[qh]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,[o]){const s={};o&135&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}const Qh=()=>{};function xh(l,e,t){let{$$slots:n={},$$scope:o}=e,{style:s=void 0}=e,{x:i=void 0}=e,{y:r=void 0}=e;const a=pa(),c=Lt("svelteflow__edge_id"),u=()=>{c&&a(c)};return l.$$set=f=>{"style"in f&&t(0,s=f.style),"x"in f&&t(1,i=f.x),"y"in f&&t(2,r=f.y),"$$scope"in f&&t(7,o=f.$$scope)},[s,i,r,a,c,n,u,o]}class $h extends Ae{constructor(e){super(),Le(this,e,xh,Jh,We,{style:0,x:1,y:2})}}function em(l){let e;return{c(){e=Ve("path"),this.h()},l(t){e=ze(t,"path",{d:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,class:!0}),C(e).forEach(p),this.h()},h(){m(e,"d",l[1]),m(e,"stroke-opacity",0),m(e,"stroke-width",l[10]),m(e,"fill","none"),m(e,"class","svelte-flow__edge-interaction")},m(t,n){B(t,e,n)},p(t,n){n&2&&m(e,"d",t[1])},d(t){t&&p(e)}}}function Sr(l){let e,t;return e=new $h({props:{x:l[3],y:l[4],style:l[5],$$slots:{default:[tm]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&8&&(s.x=n[3]),o&16&&(s.y=n[4]),o&32&&(s.style=n[5]),o&4100&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function tm(l){let e;return{c(){e=Ce(l[2])},l(t){e=De(t,l[2])},m(t,n){B(t,e,n)},p(t,n){n&4&&Ne(e,t[2])},d(t){t&&p(e)}}}function nm(l){let e,t,n,o,s,i,r=l[10]&&em(l),a=l[2]&&Sr(l);return{c(){e=Ve("path"),n=x(),r&&r.c(),o=x(),a&&a.c(),s=Ue(),this.h()},l(c){e=ze(c,"path",{id:!0,d:!0,class:!0,"marker-start":!0,"marker-end":!0,fill:!0,style:!0}),C(e).forEach(p),n=$(c),r&&r.l(c),o=$(c),a&&a.l(c),s=Ue(),this.h()},h(){m(e,"id",l[0]),m(e,"d",l[1]),m(e,"class",t=Ht(["svelte-flow__edge-path",l[9]])),m(e,"marker-start",l[6]),m(e,"marker-end",l[7]),m(e,"fill","none"),m(e,"style",l[8])},m(c,u){B(c,e,u),B(c,n,u),r&&r.m(c,u),B(c,o,u),a&&a.m(c,u),B(c,s,u),i=!0},p(c,[u]){(!i||u&1)&&m(e,"id",c[0]),(!i||u&2)&&m(e,"d",c[1]),(!i||u&512&&t!==(t=Ht(["svelte-flow__edge-path",c[9]])))&&m(e,"class",t),(!i||u&64)&&m(e,"marker-start",c[6]),(!i||u&128)&&m(e,"marker-end",c[7]),(!i||u&256)&&m(e,"style",c[8]),c[10]&&r.p(c,u),c[2]?a?(a.p(c,u),u&4&&S(a,1)):(a=Sr(c),a.c(),S(a,1),a.m(s.parentNode,s)):a&&(Oe(),P(a,1,1,()=>{a=null}),He())},i(c){i||(S(a),i=!0)},o(c){P(a),i=!1},d(c){c&&(p(e),p(n),p(o),p(s)),r&&r.d(c),a&&a.d(c)}}}function lm(l,e,t){let{id:n=void 0}=e,{path:o}=e,{label:s=void 0}=e,{labelX:i=void 0}=e,{labelY:r=void 0}=e,{labelStyle:a=void 0}=e,{markerStart:c=void 0}=e,{markerEnd:u=void 0}=e,{style:f=void 0}=e,{interactionWidth:h=20}=e,{class:d=void 0}=e,_=h===void 0?20:h;return l.$$set=b=>{"id"in b&&t(0,n=b.id),"path"in b&&t(1,o=b.path),"label"in b&&t(2,s=b.label),"labelX"in b&&t(3,i=b.labelX),"labelY"in b&&t(4,r=b.labelY),"labelStyle"in b&&t(5,a=b.labelStyle),"markerStart"in b&&t(6,c=b.markerStart),"markerEnd"in b&&t(7,u=b.markerEnd),"style"in b&&t(8,f=b.style),"interactionWidth"in b&&t(11,h=b.interactionWidth),"class"in b&&t(9,d=b.class)},[n,o,s,i,r,a,c,u,f,d,_,h]}class Io extends Ae{constructor(e){super(),Le(this,e,lm,nm,We,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}function om(l){let e,t;return e=new Io({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function sm(l,e,t){let n,o,s;const i=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Wt(e,i);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:d}=e,{sourceY:_}=e,{sourcePosition:b}=e,{targetX:v}=e,{targetY:g}=e,{targetPosition:w}=e;return l.$$set=y=>{e=kt(kt({},e),Pn(y)),t(15,Wt(e,i)),"label"in y&&t(0,r=y.label),"labelStyle"in y&&t(1,a=y.labelStyle),"style"in y&&t(2,c=y.style),"markerStart"in y&&t(3,u=y.markerStart),"markerEnd"in y&&t(4,f=y.markerEnd),"interactionWidth"in y&&t(5,h=y.interactionWidth),"sourceX"in y&&t(9,d=y.sourceX),"sourceY"in y&&t(10,_=y.sourceY),"sourcePosition"in y&&t(11,b=y.sourcePosition),"targetX"in y&&t(12,v=y.targetX),"targetY"in y&&t(13,g=y.targetY),"targetPosition"in y&&t(14,w=y.targetPosition)},l.$$.update=()=>{l.$$.dirty&32256&&t(8,[n,o,s]=ea({sourceX:d,sourceY:_,targetX:v,targetY:g,sourcePosition:b,targetPosition:w}),n,(t(7,o),t(9,d),t(10,_),t(12,v),t(13,g),t(11,b),t(14,w)),(t(6,s),t(9,d),t(10,_),t(12,v),t(13,g),t(11,b),t(14,w)))},[r,a,c,u,f,h,s,o,n,d,_,b,v,g,w]}class ba extends Ae{constructor(e){super(),Le(this,e,sm,om,We,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function rm(l){let e,t;return e=new Io({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function im(l,e,t){let n,o,s;const i=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Wt(e,i);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:d}=e,{sourceY:_}=e,{sourcePosition:b}=e,{targetX:v}=e,{targetY:g}=e,{targetPosition:w}=e;return l.$$set=y=>{e=kt(kt({},e),Pn(y)),t(15,Wt(e,i)),"label"in y&&t(0,r=y.label),"labelStyle"in y&&t(1,a=y.labelStyle),"style"in y&&t(2,c=y.style),"markerStart"in y&&t(3,u=y.markerStart),"markerEnd"in y&&t(4,f=y.markerEnd),"interactionWidth"in y&&t(5,h=y.interactionWidth),"sourceX"in y&&t(9,d=y.sourceX),"sourceY"in y&&t(10,_=y.sourceY),"sourcePosition"in y&&t(11,b=y.sourcePosition),"targetX"in y&&t(12,v=y.targetX),"targetY"in y&&t(13,g=y.targetY),"targetPosition"in y&&t(14,w=y.targetPosition)},l.$$.update=()=>{l.$$.dirty&32256&&t(8,[n,o,s]=uo({sourceX:d,sourceY:_,targetX:v,targetY:g,sourcePosition:b,targetPosition:w}),n,(t(7,o),t(9,d),t(10,_),t(12,v),t(13,g),t(11,b),t(14,w)),(t(6,s),t(9,d),t(10,_),t(12,v),t(13,g),t(11,b),t(14,w)))},[r,a,c,u,f,h,s,o,n,d,_,b,v,g,w]}class am extends Ae{constructor(e){super(),Le(this,e,im,rm,We,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function cm(l){let e,t;return e=new Io({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function um(l,e,t){let n,o,s;const i=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"];Wt(e,i);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:d}=e,{sourceY:_}=e,{targetX:b}=e,{targetY:v}=e;return l.$$set=g=>{e=kt(kt({},e),Pn(g)),t(13,Wt(e,i)),"label"in g&&t(0,r=g.label),"labelStyle"in g&&t(1,a=g.labelStyle),"style"in g&&t(2,c=g.style),"markerStart"in g&&t(3,u=g.markerStart),"markerEnd"in g&&t(4,f=g.markerEnd),"interactionWidth"in g&&t(5,h=g.interactionWidth),"sourceX"in g&&t(9,d=g.sourceX),"sourceY"in g&&t(10,_=g.sourceY),"targetX"in g&&t(11,b=g.targetX),"targetY"in g&&t(12,v=g.targetY)},l.$$.update=()=>{l.$$.dirty&7680&&t(8,[n,o,s]=na({sourceX:d,sourceY:_,targetX:b,targetY:v}),n,(t(7,o),t(9,d),t(10,_),t(11,b),t(12,v)),(t(6,s),t(9,d),t(10,_),t(11,b),t(12,v)))},[r,a,c,u,f,h,s,o,n,d,_,b,v]}class fm extends Ae{constructor(e){super(),Le(this,e,um,cm,We,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}function dm(l){let e,t;return e=new Io({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function hm(l,e,t){let n,o,s;const i=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Wt(e,i);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:d}=e,{sourceY:_}=e,{sourcePosition:b}=e,{targetX:v}=e,{targetY:g}=e,{targetPosition:w}=e;return l.$$set=y=>{e=kt(kt({},e),Pn(y)),t(15,Wt(e,i)),"label"in y&&t(0,r=y.label),"labelStyle"in y&&t(1,a=y.labelStyle),"style"in y&&t(2,c=y.style),"markerStart"in y&&t(3,u=y.markerStart),"markerEnd"in y&&t(4,f=y.markerEnd),"interactionWidth"in y&&t(5,h=y.interactionWidth),"sourceX"in y&&t(9,d=y.sourceX),"sourceY"in y&&t(10,_=y.sourceY),"sourcePosition"in y&&t(11,b=y.sourcePosition),"targetX"in y&&t(12,v=y.targetX),"targetY"in y&&t(13,g=y.targetY),"targetPosition"in y&&t(14,w=y.targetPosition)},l.$$.update=()=>{l.$$.dirty&32256&&t(8,[n,o,s]=uo({sourceX:d,sourceY:_,targetX:v,targetY:g,sourcePosition:b,targetPosition:w,borderRadius:0}),n,(t(7,o),t(9,d),t(10,_),t(12,v),t(13,g),t(11,b),t(14,w)),(t(6,s),t(9,d),t(10,_),t(12,v),t(13,g),t(11,b),t(14,w)))},[r,a,c,u,f,h,s,o,n,d,_,b,v,g,w]}class mm extends Ae{constructor(e){super(),Le(this,e,hm,dm,We,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function gm(l,e){const t=l.set,n=e.set,o=de(l),s=de(e);let r=o.length===0&&s.length>0?s:o;l.set(r);const a=c=>{const u=t(c);return r=u,n(r),u};l.set=e.set=a,l.update=e.update=c=>a(c(r))}function _m(l,e){const t=l.set,n=e.set;let o=de(e);l.set(o);const s=i=>{t(i),n(i),o=i};l.set=e.set=s,l.update=e.update=i=>s(i(o))}const pm=(l,e,t)=>{if(!t)return;const n=de(l),o=e.set,s=t.set;let i=t?de(t):{x:0,y:0,zoom:1};e.set(i),e.set=r=>(o(r),s(r),i=r,r),t.set=r=>(n==null||n.syncViewport(r),o(r),s(r),i=r,r),e.update=r=>{e.set(r(i))},t.update=r=>{t.set(r(i))}},bm=(l,e,t,n=[0,0],o=so)=>{const{subscribe:s,set:i,update:r}=xe([]);let a=l,c={},u=!0;const f=b=>(sa(b,e,t,{elevateNodesOnSelect:u,nodeOrigin:n,nodeExtent:o,defaults:c,checkEquality:!1}),a=b,i(a),a),h=b=>f(b(a)),d=b=>{c=b},_=b=>{u=b.elevateNodesOnSelect??u};return f(a),{subscribe:s,set:f,update:h,setDefaultOptions:d,setOptions:_}},vm=(l,e,t,n)=>{const{subscribe:o,set:s,update:i}=xe([]);let r=l,a={};const c=h=>{const d=a?h.map(_=>({...a,..._})):h;aa(e,t,d),r=d,s(r)},u=h=>c(h(r)),f=h=>{a=h};return c(r),{subscribe:o,set:c,update:u,setDefaultOptions:f}},va={input:Rh,output:jh,default:_a,group:Yh},wa={straight:fm,smoothstep:am,default:ba,step:mm},wm=({nodes:l=[],edges:e=[],width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i})=>{const r=new Map,a=new Map,c=new Map,u=new Map,f=s??[0,0],h=i??so;sa(l,r,a,{nodeExtent:h,nodeOrigin:f,elevateNodesOnSelect:!1,checkEquality:!1}),aa(c,u,e);let d={x:0,y:0,zoom:1};if(o&&t&&n){const _=wo(r,{filter:b=>!!((b.width||b.initialWidth)&&(b.height||b.initialHeight))});d=$o(_,t,n,.5,2,.1)}return{flowId:xe(null),nodes:bm(l,r,a,f,h),nodeLookup:Vn(r),parentLookup:Vn(a),edgeLookup:Vn(u),visibleNodes:Vn([]),edges:vm(e,c,u),visibleEdges:Vn([]),connectionLookup:Vn(c),height:xe(500),width:xe(500),minZoom:xe(.5),maxZoom:xe(2),nodeOrigin:xe(f),nodeDragThreshold:xe(1),nodeExtent:xe(h),translateExtent:xe(so),autoPanOnNodeDrag:xe(!0),autoPanOnConnect:xe(!0),fitViewOnInit:xe(!1),fitViewOnInitDone:xe(!1),fitViewOptions:xe(void 0),panZoom:xe(null),snapGrid:xe(null),dragging:xe(!1),selectionRect:xe(null),selectionKeyPressed:xe(!1),multiselectionKeyPressed:xe(!1),deleteKeyPressed:xe(!1),panActivationKeyPressed:xe(!1),zoomActivationKeyPressed:xe(!1),selectionRectMode:xe(null),selectionMode:xe(ro.Partial),nodeTypes:xe(va),edgeTypes:xe(wa),viewport:xe(d),connectionMode:xe(al.Strict),domNode:xe(null),connection:Vn(Wo),connectionLineType:xe(vl.Bezier),connectionRadius:xe(20),isValidConnection:xe(()=>!0),nodesDraggable:xe(!0),nodesConnectable:xe(!0),elementsSelectable:xe(!0),selectNodesOnDrag:xe(!0),markers:Vn([]),defaultMarkerColor:xe("#b1b1b7"),lib:Vn("svelte"),onlyRenderVisibleElements:xe(!1),onerror:xe(qd),ondelete:xe(void 0),onedgecreate:xe(void 0),onconnect:xe(void 0),onconnectstart:xe(void 0),onconnectend:xe(void 0),onbeforedelete:xe(void 0),nodesInitialized:xe(!1),edgesInitialized:xe(!1),viewportInitialized:xe(!1),initialized:Vn(!1)}};function ym(l){const e=pl([l.edges,l.nodes,l.nodeLookup,l.onlyRenderVisibleElements,l.viewport,l.width,l.height],([t,,n,o,s,i,r])=>o&&i&&r?t.filter(c=>{const u=n.get(c.source),f=n.get(c.target);return u&&f&&nh({sourceNode:u,targetNode:f,width:i,height:r,transform:[s.x,s.y,s.zoom]})}):t);return pl([e,l.nodes,l.nodeLookup,l.connectionMode,l.onerror],([t,,n,o,s])=>t.reduce((r,a)=>{const c=n.get(a.source),u=n.get(a.target);if(!c||!u)return r;const f=ch({id:a.id,sourceNode:c,targetNode:u,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:o,onError:s});return f&&r.push({...a,zIndex:th({selected:a.selected,zIndex:a.zIndex,sourceNode:c,targetNode:u,elevateOnSelect:!1}),...f}),r},[]))}function km(l){return pl([l.nodeLookup,l.onlyRenderVisibleElements,l.width,l.height,l.viewport,l.nodes],([e,t,n,o,s])=>{const i=[s.x,s.y,s.zoom];return t?Ki(e,{x:0,y:0,width:n,height:o},i,!0):Array.from(e.values())})}const So=Symbol();function ya({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i}){const r=wm({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i});function a(M){r.nodeTypes.set({...va,...M})}function c(M){r.edgeTypes.set({...wa,...M})}function u(M){const W=de(r.edges);r.edges.set(sh(M,W))}const f=(M,W=!1)=>{var Z;const j=de(r.nodeLookup);for(const[A,X]of M){const q=(Z=j.get(A))==null?void 0:Z.internals.userNode;q&&(q.position=X.position,q.dragging=W)}r.nodes.update(A=>A)};function h(M){var A,X,q;const W=de(r.nodeLookup),{changes:j,updatedInternals:Z}=gh(M,W,de(r.parentLookup),de(r.domNode),de(r.nodeOrigin));if(Z){if(!de(r.fitViewOnInitDone)&&de(r.fitViewOnInit)){const se=de(r.fitViewOptions),J=_({...se,nodes:se==null?void 0:se.nodes});r.fitViewOnInitDone.set(J)}for(const se of j){const J=(A=W.get(se.id))==null?void 0:A.internals.userNode;if(J)switch(se.type){case"dimensions":{const me={...J.measured,...se.dimensions};se.setAttributes&&(J.width=((X=se.dimensions)==null?void 0:X.width)??J.width,J.height=((q=se.dimensions)==null?void 0:q.height)??J.height),J.measured=me;break}case"position":J.position=se.position??J.position;break}}r.nodes.update(se=>se),de(r.nodesInitialized)||r.nodesInitialized.set(!0)}}function d(M){const W=de(r.panZoom);if(!W)return Promise.resolve(!1);const j=ur(de(r.nodeLookup),M);return fr({nodes:j,width:de(r.width),height:de(r.height),minZoom:de(r.minZoom),maxZoom:de(r.maxZoom),panZoom:W},M)}function _(M){const W=de(r.panZoom);if(!W)return!1;const j=ur(de(r.nodeLookup),M);return fr({nodes:j,width:de(r.width),height:de(r.height),minZoom:de(r.minZoom),maxZoom:de(r.maxZoom),panZoom:W},M),j.size>0}function b(M,W){const j=de(r.panZoom);return j?j.scaleBy(M,W):Promise.resolve(!1)}function v(M){return b(1.2,M)}function g(M){return b(1/1.2,M)}function w(M){const W=de(r.panZoom);W&&(W.setScaleExtent([M,de(r.maxZoom)]),r.minZoom.set(M))}function y(M){const W=de(r.panZoom);W&&(W.setScaleExtent([de(r.minZoom),M]),r.maxZoom.set(M))}function k(M){const W=de(r.panZoom);W&&(W.setTranslateExtent(M),r.translateExtent.set(M))}function I(M){let W=!1;return M.forEach(j=>{j.selected&&(j.selected=!1,W=!0)}),W}function V(M){var W;(W=de(r.panZoom))==null||W.setClickDistance(M)}function T(M){I((M==null?void 0:M.nodes)||de(r.nodes))&&r.nodes.set(de(r.nodes)),I((M==null?void 0:M.edges)||de(r.edges))&&r.edges.set(de(r.edges))}r.deleteKeyPressed.subscribe(async M=>{var W;if(M){const j=de(r.nodes),Z=de(r.edges),A=j.filter(J=>J.selected),X=Z.filter(J=>J.selected),{nodes:q,edges:se}=await Gi({nodesToRemove:A,edgesToRemove:X,nodes:j,edges:Z,onBeforeDelete:de(r.onbeforedelete)});(q.length||se.length)&&(r.nodes.update(J=>J.filter(me=>!q.some(_e=>_e.id===me.id))),r.edges.update(J=>J.filter(me=>!se.some(_e=>_e.id===me.id))),(W=de(r.ondelete))==null||W({nodes:q,edges:se}))}});function L(M){const W=de(r.multiselectionKeyPressed);r.nodes.update(j=>j.map(Z=>{const A=M.includes(Z.id),X=W&&Z.selected||A;return Z.selected=X,Z})),W||r.edges.update(j=>j.map(Z=>(Z.selected=!1,Z)))}function O(M){const W=de(r.multiselectionKeyPressed);r.edges.update(j=>j.map(Z=>{const A=M.includes(Z.id),X=W&&Z.selected||A;return Z.selected=X,Z})),W||r.nodes.update(j=>j.map(Z=>(Z.selected=!1,Z)))}function H(M){var j;const W=(j=de(r.nodes))==null?void 0:j.find(Z=>Z.id===M);if(!W){console.warn("012",Ul.error012(M));return}r.selectionRect.set(null),r.selectionRectMode.set(null),W.selected?W.selected&&de(r.multiselectionKeyPressed)&&T({nodes:[W],edges:[]}):L([M])}function F(M){const W=de(r.viewport);return _h({delta:M,panZoom:de(r.panZoom),transform:[W.x,W.y,W.zoom],translateExtent:de(r.translateExtent),width:de(r.width),height:de(r.height)})}const Y=xe(Wo),G=M=>{Y.set({...M})};function D(){Y.set(Wo)}function K(){r.fitViewOnInitDone.set(!1),r.selectionRect.set(null),r.selectionRectMode.set(null),r.snapGrid.set(null),r.isValidConnection.set(()=>!0),T(),D()}return{...r,visibleEdges:ym(r),visibleNodes:km(r),connection:pl([Y,r.viewport],([M,W])=>M.inProgress?{...M,to:Wl(M.to,[W.x,W.y,W.zoom])}:{...M}),markers:pl([r.edges,r.defaultMarkerColor,r.flowId],([M,W,j])=>uh(M,{defaultColor:W,id:j})),initialized:(()=>{let M=!1;const W=de(r.nodes).length,j=de(r.edges).length;return pl([r.nodesInitialized,r.edgesInitialized,r.viewportInitialized],([Z,A,X])=>M||(W===0?M=X:j===0?M=X&&Z:M=X&&Z&&A,M))})(),syncNodeStores:M=>gm(r.nodes,M),syncEdgeStores:M=>_m(r.edges,M),syncViewport:M=>pm(r.panZoom,r.viewport,M),setNodeTypes:a,setEdgeTypes:c,addEdge:u,updateNodePositions:f,updateNodeInternals:h,zoomIn:v,zoomOut:g,fitView:M=>d(M),setMinZoom:w,setMaxZoom:y,setTranslateExtent:k,setPaneClickDistance:V,unselectNodesAndEdges:T,addSelectedNodes:L,addSelectedEdges:O,handleNodeSelection:H,panBy:F,updateConnection:G,cancelConnection:D,reset:K}}function jt(){const l=Lt(So);if(!l)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return l.getStore()}function Em({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i}){const r=ya({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i});return Ml(So,{getStore:()=>r}),r}function Im(l,e){const{panZoom:t,minZoom:n,maxZoom:o,initialViewport:s,viewport:i,dragging:r,translateExtent:a,paneClickDistance:c}=e,u=Nh({domNode:l,minZoom:n,maxZoom:o,translateExtent:a,viewport:s,paneClickDistance:c,onDraggingChange:r.set}),f=u.getViewport();return i.set(f),t.set(u),u.update(e),{update(h){u.update(h)}}}function Sm(l){let e,t,n,o,s;const i=l[35].default,r=Kt(i,l,l[34],null);return{c(){e=z("div"),r&&r.c(),this.h()},l(a){e=N(a,"DIV",{class:!0});var c=C(e);r&&r.l(c),c.forEach(p),this.h()},h(){m(e,"class","svelte-flow__zoom svelte-4xkw84")},m(a,c){B(a,e,c),r&&r.m(e,null),n=!0,o||(s=hn(t=Im.call(null,e,{viewport:l[18],minZoom:l[12],maxZoom:l[13],initialViewport:l[11],dragging:l[23],panZoom:l[19],onPanZoomStart:l[0],onPanZoom:l[1],onPanZoomEnd:l[2],zoomOnScroll:l[5],zoomOnDoubleClick:l[6],zoomOnPinch:l[7],panOnScroll:l[9],panOnDrag:l[10],panOnScrollSpeed:.5,panOnScrollMode:l[3]||Un.Free,zoomActivationKeyPressed:l[14],preventScrolling:typeof l[4]=="boolean"?l[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!l[15],translateExtent:l[16],lib:l[17],paneClickDistance:l[8],onTransformChange:l[29]})),o=!0)},p(a,c){r&&r.p&&(!n||c[1]&8)&&Gt(r,i,a,a[34],n?Jt(i,a[34],c,null):qt(a[34]),null),t&&$t(t.update)&&c[0]&262143&&t.update.call(null,{viewport:a[18],minZoom:a[12],maxZoom:a[13],initialViewport:a[11],dragging:a[23],panZoom:a[19],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[9],panOnDrag:a[10],panOnScrollSpeed:.5,panOnScrollMode:a[3]||Un.Free,zoomActivationKeyPressed:a[14],preventScrolling:typeof a[4]=="boolean"?a[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a[15],translateExtent:a[16],lib:a[17],paneClickDistance:a[8],onTransformChange:a[29]})},i(a){n||(S(r,a),n=!0)},o(a){P(r,a),n=!1},d(a){a&&p(e),r&&r.d(a),o=!1,s()}}}function Cm(l,e,t){let n,o,s,i,r,a,c,u,f,h,d,{$$slots:_={},$$scope:b}=e,{initialViewport:v=void 0}=e,{onMoveStart:g=void 0}=e,{onMove:w=void 0}=e,{onMoveEnd:y=void 0}=e,{panOnScrollMode:k}=e,{preventScrolling:I}=e,{zoomOnScroll:V}=e,{zoomOnDoubleClick:T}=e,{zoomOnPinch:L}=e,{panOnDrag:O}=e,{panOnScroll:H}=e,{paneClickDistance:F}=e;const{viewport:Y,panZoom:G,selectionRect:D,minZoom:K,maxZoom:M,dragging:W,translateExtent:j,lib:Z,panActivationKeyPressed:A,zoomActivationKeyPressed:X,viewportInitialized:q}=jt();ce(l,D,J=>t(15,f=J)),ce(l,K,J=>t(12,a=J)),ce(l,M,J=>t(13,c=J)),ce(l,j,J=>t(16,h=J)),ce(l,Z,J=>t(17,d=J)),ce(l,A,J=>t(33,r=J)),ce(l,X,J=>t(14,u=J)),ce(l,q,J=>t(36,i=J));const se=J=>Y.set({x:J[0],y:J[1],zoom:J[2]});return gn(()=>{to(q,i=!0,i)}),l.$$set=J=>{"initialViewport"in J&&t(30,v=J.initialViewport),"onMoveStart"in J&&t(0,g=J.onMoveStart),"onMove"in J&&t(1,w=J.onMove),"onMoveEnd"in J&&t(2,y=J.onMoveEnd),"panOnScrollMode"in J&&t(3,k=J.panOnScrollMode),"preventScrolling"in J&&t(4,I=J.preventScrolling),"zoomOnScroll"in J&&t(5,V=J.zoomOnScroll),"zoomOnDoubleClick"in J&&t(6,T=J.zoomOnDoubleClick),"zoomOnPinch"in J&&t(7,L=J.zoomOnPinch),"panOnDrag"in J&&t(31,O=J.panOnDrag),"panOnScroll"in J&&t(32,H=J.panOnScroll),"paneClickDistance"in J&&t(8,F=J.paneClickDistance),"$$scope"in J&&t(34,b=J.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&1073741824&&t(11,n=v||{x:0,y:0,zoom:1}),l.$$.dirty[1]&5&&t(10,o=r||O),l.$$.dirty[1]&6&&t(9,s=r||H)},[g,w,y,k,I,V,T,L,F,s,o,n,a,c,u,f,h,d,Y,G,D,K,M,W,j,Z,A,X,q,se,v,O,H,r,b,_]}class Dm extends Ae{constructor(e){super(),Le(this,e,Cm,Sm,We,{initialViewport:30,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:31,panOnScroll:32,paneClickDistance:8},null,[-1,-1])}}function Mm(l){let e,t,n,o;const s=l[28].default,i=Kt(s,l,l[27],null);return{c(){e=z("div"),i&&i.c(),this.h()},l(r){e=N(r,"DIV",{class:!0});var a=C(e);i&&i.l(a),a.forEach(p),this.h()},h(){m(e,"class","svelte-flow__pane svelte-1esy7hx"),ot(e,"draggable",l[0]===!0||Array.isArray(l[0])&&l[0].includes(0)),ot(e,"dragging",l[4]),ot(e,"selection",l[1])},m(r,a){B(r,e,a),i&&i.m(e,null),l[29](e),t=!0,n||(o=[ke(e,"click",function(){$t(l[3]?void 0:xl(l[15],l[2]))&&(l[3]?void 0:xl(l[15],l[2])).apply(this,arguments)}),ke(e,"pointerdown",function(){$t(l[3]?l[16]:void 0)&&(l[3]?l[16]:void 0).apply(this,arguments)}),ke(e,"pointermove",function(){$t(l[3]?l[17]:void 0)&&(l[3]?l[17]:void 0).apply(this,arguments)}),ke(e,"pointerup",function(){$t(l[3]?l[18]:void 0)&&(l[3]?l[18]:void 0).apply(this,arguments)}),ke(e,"contextmenu",function(){$t(xl(l[19],l[2]))&&xl(l[19],l[2]).apply(this,arguments)})],n=!0)},p(r,a){l=r,i&&i.p&&(!t||a[0]&134217728)&&Gt(i,s,l,l[27],t?Jt(s,l[27],a,null):qt(l[27]),null),(!t||a[0]&1)&&ot(e,"draggable",l[0]===!0||Array.isArray(l[0])&&l[0].includes(0)),(!t||a[0]&16)&&ot(e,"dragging",l[4]),(!t||a[0]&2)&&ot(e,"selection",l[1])},i(r){t||(S(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){r&&p(e),i&&i.d(r),l[29](null),n=!1,en(o)}}}function xl(l,e){return t=>{t.target===e&&(l==null||l(t))}}function Cr(l){return e=>{const t=l.includes(e.id);return e.selected!==t&&(e.selected=t),e}}function Tm(l,e,t){let n,o,s,i,r,a,c,u,f,h,d,_,b,{$$slots:v={},$$scope:g}=e,{panOnDrag:w=void 0}=e,{selectionOnDrag:y=void 0}=e;const k=tn(),{nodes:I,nodeLookup:V,edges:T,viewport:L,dragging:O,elementsSelectable:H,selectionRect:F,selectionRectMode:Y,selectionKeyPressed:G,selectionMode:D,panActivationKeyPressed:K,unselectNodesAndEdges:M}=jt();ce(l,V,ie=>t(36,f=ie)),ce(l,T,ie=>t(33,a=ie)),ce(l,L,ie=>t(35,u=ie)),ce(l,O,ie=>t(4,b=ie)),ce(l,H,ie=>t(25,d=ie)),ce(l,F,ie=>t(24,h=ie)),ce(l,Y,ie=>t(23,r=ie)),ce(l,G,ie=>t(22,i=ie)),ce(l,D,ie=>t(34,c=ie)),ce(l,K,ie=>t(26,_=ie));let W,j=null,Z=[],A=!1;function X(ie){if(A){A=!1;return}k("paneclick",{event:ie}),M(),Y.set(null)}function q(ie){var ae,Re;if(j=W.getBoundingClientRect(),!H||!o||ie.button!==0||ie.target!==W||!j)return;(Re=(ae=ie.target)==null?void 0:ae.setPointerCapture)==null||Re.call(ae,ie.pointerId);const{x:le,y:Pe}=Yn(ie,j);M(),F.set({width:0,height:0,startX:le,startY:Pe,x:le,y:Pe})}function se(ie){if(!o||!j||!h)return;A=!0;const le=Yn(ie,j),Pe=h.startX??0,ae=h.startY??0,Re={...h,x:le.x<Pe?le.x:Pe,y:le.y<ae?le.y:ae,width:Math.abs(le.x-Pe),height:Math.abs(le.y-ae)},Ie=Z.map(it=>it.id),Je=jo(Z,a).map(it=>it.id);Z=Ki(f,Re,[u.x,u.y,u.zoom],c===ro.Partial,!0);const he=jo(Z,a).map(it=>it.id),rt=Z.map(it=>it.id);(Ie.length!==rt.length||rt.some(it=>!Ie.includes(it)))&&I.update(it=>it.map(Cr(rt))),(Je.length!==he.length||he.some(it=>!Je.includes(it)))&&T.update(it=>it.map(Cr(he))),Y.set("user"),F.set(Re)}function J(ie){var le,Pe;ie.button===0&&((Pe=(le=ie.target)==null?void 0:le.releasePointerCapture)==null||Pe.call(le,ie.pointerId),!o&&r==="user"&&ie.target===W&&(X==null||X(ie)),F.set(null),Z.length>0&&to(Y,r="nodes",r),i&&(A=!1))}const me=ie=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){ie.preventDefault();return}k("panecontextmenu",{event:ie})};function _e(ie){je[ie?"unshift":"push"](()=>{W=ie,t(2,W)})}return l.$$set=ie=>{"panOnDrag"in ie&&t(0,w=ie.panOnDrag),"selectionOnDrag"in ie&&t(20,y=ie.selectionOnDrag),"$$scope"in ie&&t(27,g=ie.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&67108865&&t(21,n=_||w),l.$$.dirty[0]&24117248&&t(1,o=i||h||y&&n!==!0),l.$$.dirty[0]&41943042&&t(3,s=d&&(o||r==="user"))},[w,o,W,s,b,V,T,L,O,H,F,Y,G,D,K,X,q,se,J,me,y,n,i,r,h,d,_,g,v,_e]}class Vm extends Ae{constructor(e){super(),Le(this,e,Tm,Mm,We,{panOnDrag:0,selectionOnDrag:20},null,[-1,-1])}}function zm(l){let e,t;const n=l[3].default,o=Kt(n,l,l[2],null);return{c(){e=z("div"),o&&o.c(),this.h()},l(s){e=N(s,"DIV",{class:!0,style:!0});var i=C(e);o&&o.l(i),i.forEach(p),this.h()},h(){m(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),et(e,"transform","translate("+l[0].x+"px, "+l[0].y+"px) scale("+l[0].zoom+")")},m(s,i){B(s,e,i),o&&o.m(e,null),t=!0},p(s,[i]){o&&o.p&&(!t||i&4)&&Gt(o,n,s,s[2],t?Jt(n,s[2],i,null):qt(s[2]),null),(!t||i&1)&&et(e,"transform","translate("+s[0].x+"px, "+s[0].y+"px) scale("+s[0].zoom+")")},i(s){t||(S(o,s),t=!0)},o(s){P(o,s),t=!1},d(s){s&&p(e),o&&o.d(s)}}}function Nm(l,e,t){let n,{$$slots:o={},$$scope:s}=e;const{viewport:i}=jt();return ce(l,i,r=>t(0,n=r)),l.$$set=r=>{"$$scope"in r&&t(2,s=r.$$scope)},[n,i,s,o]}class Pm extends Ae{constructor(e){super(),Le(this,e,Nm,zm,We,{})}}function ka(l,e){const{store:t,onDrag:n,onDragStart:o,onDragStop:s,onNodeMouseDown:i}=e,r=bh({onDrag:n,onDragStart:o,onDragStop:s,onNodeMouseDown:i,getStoreItems:()=>{const c=de(t.snapGrid),u=de(t.viewport);return{nodes:de(t.nodes),nodeLookup:de(t.nodeLookup),edges:de(t.edges),nodeExtent:de(t.nodeExtent),snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:de(t.nodeOrigin),multiSelectionActive:de(t.multiselectionKeyPressed),domNode:de(t.domNode),transform:[u.x,u.y,u.zoom],autoPanOnNodeDrag:de(t.autoPanOnNodeDrag),nodesDraggable:de(t.nodesDraggable),selectNodesOnDrag:de(t.selectNodesOnDrag),nodeDragThreshold:de(t.nodeDragThreshold),unselectNodesAndEdges:t.unselectNodesAndEdges,updateNodePositions:t.updateNodePositions,panBy:t.panBy}}});function a(c,u){if(u.disabled){r.destroy();return}r.update({domNode:c,noDragClassName:u.noDragClass,handleSelector:u.handleSelector,nodeId:u.nodeId,isSelectable:u.isSelectable,nodeClickDistance:u.nodeClickDistance})}return a(l,e),{update(c){a(l,c)},destroy(){r.destroy()}}}function Om({width:l,height:e,initialWidth:t,initialHeight:n,measuredWidth:o,measuredHeight:s}){if(o===void 0&&s===void 0){const i=l??t,r=e??n;return{width:i?`width:${i}px;`:"",height:r?`height:${r}px;`:""}}return{width:l?`width:${l}px;`:"",height:e?`height:${e}px;`:""}}function Dr(l){let e,t,n,o,s,i=`translate(${l[12]}px, ${l[13]}px)`,r,a,c;var u=l[27];function f(h,d){return{props:{data:h[2],id:h[1],selected:h[3],selectable:h[5],deletable:h[7],sourcePosition:h[14],targetPosition:h[15],zIndex:h[16],dragging:h[9],draggable:h[4],dragHandle:h[19],parentId:h[21],type:h[25],isConnectable:h[28],positionAbsoluteX:h[12],positionAbsoluteY:h[13],width:h[17],height:h[18]}}}return u&&(t=no(u,f(l))),{c(){e=z("div"),t&&ee(t.$$.fragment),this.h()},l(h){e=N(h,"DIV",{"data-id":!0,class:!0,style:!0});var d=C(e);t&&oe(t.$$.fragment,d),d.forEach(p),this.h()},h(){m(e,"data-id",l[1]),m(e,"class",n=Ht(["svelte-flow__node",`svelte-flow__node-${l[25]}`,l[23]])),m(e,"style",o=(l[10]??"")+";"+l[26].width+l[26].height),ot(e,"dragging",l[9]),ot(e,"selected",l[3]),ot(e,"draggable",l[4]),ot(e,"connectable",l[6]),ot(e,"selectable",l[5]),ot(e,"nopan",l[4]),ot(e,"parent",l[11]),et(e,"z-index",l[16]),et(e,"transform",i),et(e,"visibility",l[20]?"visible":"hidden")},m(h,d){B(h,e,d),t&&te(t,e,null),l[50](e),r=!0,a||(c=[hn(s=ka.call(null,e,{nodeId:l[1],isSelectable:l[5],disabled:!1,handleSelector:l[19],noDragClass:"nodrag",nodeClickDistance:l[22],onNodeMouseDown:l[31],onDrag:l[47],onDragStart:l[48],onDragStop:l[49],store:l[29]})),ke(e,"click",l[34]),ke(e,"mouseenter",l[51]),ke(e,"mouseleave",l[52]),ke(e,"mousemove",l[53]),ke(e,"contextmenu",l[54])],a=!0)},p(h,d){if(d[0]&134217728&&u!==(u=h[27])){if(t){Oe();const b=t;P(b.$$.fragment,1,0,()=>{ne(b,1)}),He()}u?(t=no(u,f(h)),ee(t.$$.fragment),S(t.$$.fragment,1),te(t,e,null)):t=null}else if(u){const b={};d[0]&4&&(b.data=h[2]),d[0]&2&&(b.id=h[1]),d[0]&8&&(b.selected=h[3]),d[0]&32&&(b.selectable=h[5]),d[0]&128&&(b.deletable=h[7]),d[0]&16384&&(b.sourcePosition=h[14]),d[0]&32768&&(b.targetPosition=h[15]),d[0]&65536&&(b.zIndex=h[16]),d[0]&512&&(b.dragging=h[9]),d[0]&16&&(b.draggable=h[4]),d[0]&524288&&(b.dragHandle=h[19]),d[0]&2097152&&(b.parentId=h[21]),d[0]&33554432&&(b.type=h[25]),d[0]&268435456&&(b.isConnectable=h[28]),d[0]&4096&&(b.positionAbsoluteX=h[12]),d[0]&8192&&(b.positionAbsoluteY=h[13]),d[0]&131072&&(b.width=h[17]),d[0]&262144&&(b.height=h[18]),t.$set(b)}(!r||d[0]&2)&&m(e,"data-id",h[1]),(!r||d[0]&41943040&&n!==(n=Ht(["svelte-flow__node",`svelte-flow__node-${h[25]}`,h[23]])))&&m(e,"class",n),(!r||d[0]&67109888&&o!==(o=(h[10]??"")+";"+h[26].width+h[26].height))&&m(e,"style",o),s&&$t(s.update)&&d[0]&4718626&&s.update.call(null,{nodeId:h[1],isSelectable:h[5],disabled:!1,handleSelector:h[19],noDragClass:"nodrag",nodeClickDistance:h[22],onNodeMouseDown:h[31],onDrag:h[47],onDragStart:h[48],onDragStop:h[49],store:h[29]}),(!r||d[0]&41943552)&&ot(e,"dragging",h[9]),(!r||d[0]&41943048)&&ot(e,"selected",h[3]),(!r||d[0]&41943056)&&ot(e,"draggable",h[4]),(!r||d[0]&41943104)&&ot(e,"connectable",h[6]),(!r||d[0]&41943072)&&ot(e,"selectable",h[5]),(!r||d[0]&41943056)&&ot(e,"nopan",h[4]),(!r||d[0]&41945088)&&ot(e,"parent",h[11]);const _=d[0]&67109888;(d[0]&67175424||_)&&et(e,"z-index",h[16]),(d[0]&67122176&&i!==(i=`translate(${h[12]}px, ${h[13]}px)`)||_)&&et(e,"transform",i),(d[0]&68158464||_)&&et(e,"visibility",h[20]?"visible":"hidden")},i(h){r||(t&&S(t.$$.fragment,h),r=!0)},o(h){t&&P(t.$$.fragment,h),r=!1},d(h){h&&p(e),t&&ne(t),l[50](null),a=!1,en(c)}}}function Hm(l){let e,t,n=!l[8]&&Dr(l);return{c(){n&&n.c(),e=Ue()},l(o){n&&n.l(o),e=Ue()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[8]?n&&(Oe(),P(n,1,1,()=>{n=null}),He()):n?(n.p(o,s),s[0]&256&&S(n,1)):(n=Dr(o),n.c(),S(n,1),n.m(e.parentNode,e))},i(o){t||(S(n),t=!0)},o(o){P(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function Bm(l,e,t){let n,o,s,i,r,a,{node:c}=e,{id:u}=e,{data:f={}}=e,{selected:h=!1}=e,{draggable:d=void 0}=e,{selectable:_=void 0}=e,{connectable:b=!0}=e,{deletable:v=!0}=e,{hidden:g=!1}=e,{dragging:w=!1}=e,{resizeObserver:y=null}=e,{style:k=void 0}=e,{type:I="default"}=e,{isParent:V=!1}=e,{positionX:T}=e,{positionY:L}=e,{sourcePosition:O=void 0}=e,{targetPosition:H=void 0}=e,{zIndex:F}=e,{measuredWidth:Y=void 0}=e,{measuredHeight:G=void 0}=e,{initialWidth:D=void 0}=e,{initialHeight:K=void 0}=e,{width:M=void 0}=e,{height:W=void 0}=e,{dragHandle:j=void 0}=e,{initialized:Z=!1}=e,{parentId:A=void 0}=e,{nodeClickDistance:X=void 0}=e,{class:q=""}=e;const se=jt(),{nodeTypes:J,nodeDragThreshold:me,selectNodesOnDrag:_e,handleNodeSelection:ie,updateNodeInternals:le}=se;ce(l,J,fe=>t(46,r=fe));let Pe,ae=null;const Re=tn(),Ie=xe(b);ce(l,Ie,fe=>t(28,a=fe));let Je,he,rt;Ml("svelteflow__node_id",u),Ml("svelteflow__node_connectable",Ie),$n(()=>{ae&&(y==null||y.unobserve(ae))});function it(fe){_&&(!de(_e)||!d||de(me)>0)&&ie(u),Re("nodeclick",{node:c.internals.userNode,event:fe})}const Rt=(fe,Et,mt,vt)=>{Re("nodedrag",{event:fe,targetNode:mt,nodes:vt})},Mt=(fe,Et,mt,vt)=>{Re("nodedragstart",{event:fe,targetNode:mt,nodes:vt})},bt=(fe,Et,mt,vt)=>{Re("nodedragstop",{event:fe,targetNode:mt,nodes:vt})};function pe(fe){je[fe?"unshift":"push"](()=>{Pe=fe,t(24,Pe)})}const Xe=fe=>Re("nodemouseenter",{node:c,event:fe}),lt=fe=>Re("nodemouseleave",{node:c,event:fe}),ht=fe=>Re("nodemousemove",{node:c,event:fe}),pt=fe=>Re("nodecontextmenu",{node:c,event:fe});return l.$$set=fe=>{"node"in fe&&t(0,c=fe.node),"id"in fe&&t(1,u=fe.id),"data"in fe&&t(2,f=fe.data),"selected"in fe&&t(3,h=fe.selected),"draggable"in fe&&t(4,d=fe.draggable),"selectable"in fe&&t(5,_=fe.selectable),"connectable"in fe&&t(6,b=fe.connectable),"deletable"in fe&&t(7,v=fe.deletable),"hidden"in fe&&t(8,g=fe.hidden),"dragging"in fe&&t(9,w=fe.dragging),"resizeObserver"in fe&&t(35,y=fe.resizeObserver),"style"in fe&&t(10,k=fe.style),"type"in fe&&t(36,I=fe.type),"isParent"in fe&&t(11,V=fe.isParent),"positionX"in fe&&t(12,T=fe.positionX),"positionY"in fe&&t(13,L=fe.positionY),"sourcePosition"in fe&&t(14,O=fe.sourcePosition),"targetPosition"in fe&&t(15,H=fe.targetPosition),"zIndex"in fe&&t(16,F=fe.zIndex),"measuredWidth"in fe&&t(37,Y=fe.measuredWidth),"measuredHeight"in fe&&t(38,G=fe.measuredHeight),"initialWidth"in fe&&t(39,D=fe.initialWidth),"initialHeight"in fe&&t(40,K=fe.initialHeight),"width"in fe&&t(17,M=fe.width),"height"in fe&&t(18,W=fe.height),"dragHandle"in fe&&t(19,j=fe.dragHandle),"initialized"in fe&&t(20,Z=fe.initialized),"parentId"in fe&&t(21,A=fe.parentId),"nodeClickDistance"in fe&&t(22,X=fe.nodeClickDistance),"class"in fe&&t(23,q=fe.class)},l.$$.update=()=>{l.$$.dirty[1]&32&&t(25,n=I||"default"),l.$$.dirty[0]&33554432|l.$$.dirty[1]&32768&&t(45,o=!!r[n]),l.$$.dirty[0]&33554432|l.$$.dirty[1]&32768&&t(27,s=r[n]||_a),l.$$.dirty[1]&16416&&(o||console.warn("003",Ul.error003(I))),l.$$.dirty[0]&393216|l.$$.dirty[1]&960&&t(26,i=Om({width:M,height:W,initialWidth:D,initialHeight:K,measuredWidth:Y,measuredHeight:G})),l.$$.dirty[0]&64&&Ie.set(!!b),l.$$.dirty[0]&50380802|l.$$.dirty[1]&14336&&((Je&&n!==Je||he&&O!==he||rt&&H!==rt)&&requestAnimationFrame(()=>le(new Map([[u,{id:u,nodeElement:Pe,force:!0}]]))),t(42,Je=n),t(43,he=O),t(44,rt=H)),l.$$.dirty[0]&17825792|l.$$.dirty[1]&1040&&y&&(Pe!==ae||!Z)&&(ae&&y.unobserve(ae),Pe&&y.observe(Pe),t(41,ae=Pe))},[c,u,f,h,d,_,b,v,g,w,k,V,T,L,O,H,F,M,W,j,Z,A,X,q,Pe,n,i,s,a,se,J,ie,Re,Ie,it,y,I,Y,G,D,K,ae,Je,he,rt,o,r,Rt,Mt,bt,pe,Xe,lt,ht,pt]}class Am extends Ae{constructor(e){super(),Le(this,e,Bm,Hm,zi,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:35,style:10,type:36,isParent:11,positionX:12,positionY:13,sourcePosition:14,targetPosition:15,zIndex:16,measuredWidth:37,measuredHeight:38,initialWidth:39,initialHeight:40,width:17,height:18,dragHandle:19,initialized:20,parentId:21,nodeClickDistance:22,class:23},null,[-1,-1])}}const{Map:Lm}=Ni;function Mr(l,e,t){const n=l.slice();return n[21]=e[t],n}function Tr(l,e){let t,n,o;return n=new Am({props:{node:e[21],id:e[21].id,data:e[21].data,selected:!!e[21].selected,hidden:!!e[21].hidden,draggable:!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u"),selectable:!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u"),connectable:!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u"),deletable:e[21].deletable??!0,positionX:e[21].internals.positionAbsolute.x,positionY:e[21].internals.positionAbsolute.y,isParent:e[5].has(e[21].id),style:e[21].style,class:e[21].class,type:e[21].type??"default",sourcePosition:e[21].sourcePosition,targetPosition:e[21].targetPosition,dragging:e[21].dragging,zIndex:e[21].internals.z??0,dragHandle:e[21].dragHandle,initialized:mr(e[21]),width:e[21].width,height:e[21].height,initialWidth:e[21].initialWidth,initialHeight:e[21].initialHeight,measuredWidth:e[21].measured.width,measuredHeight:e[21].measured.height,parentId:e[21].parentId,resizeObserver:e[11],nodeClickDistance:e[0]}}),n.$on("nodeclick",e[12]),n.$on("nodemouseenter",e[13]),n.$on("nodemousemove",e[14]),n.$on("nodemouseleave",e[15]),n.$on("nodedrag",e[16]),n.$on("nodedragstart",e[17]),n.$on("nodedragstop",e[18]),n.$on("nodecontextmenu",e[19]),{key:l,first:null,c(){t=Ue(),ee(n.$$.fragment),this.h()},l(s){t=Ue(),oe(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,i){B(s,t,i),te(n,s,i),o=!0},p(s,i){e=s;const r={};i&2&&(r.node=e[21]),i&2&&(r.id=e[21].id),i&2&&(r.data=e[21].data),i&2&&(r.selected=!!e[21].selected),i&2&&(r.hidden=!!e[21].hidden),i&6&&(r.draggable=!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u")),i&10&&(r.selectable=!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u")),i&18&&(r.connectable=!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u")),i&2&&(r.deletable=e[21].deletable??!0),i&2&&(r.positionX=e[21].internals.positionAbsolute.x),i&2&&(r.positionY=e[21].internals.positionAbsolute.y),i&34&&(r.isParent=e[5].has(e[21].id)),i&2&&(r.style=e[21].style),i&2&&(r.class=e[21].class),i&2&&(r.type=e[21].type??"default"),i&2&&(r.sourcePosition=e[21].sourcePosition),i&2&&(r.targetPosition=e[21].targetPosition),i&2&&(r.dragging=e[21].dragging),i&2&&(r.zIndex=e[21].internals.z??0),i&2&&(r.dragHandle=e[21].dragHandle),i&2&&(r.initialized=mr(e[21])),i&2&&(r.width=e[21].width),i&2&&(r.height=e[21].height),i&2&&(r.initialWidth=e[21].initialWidth),i&2&&(r.initialHeight=e[21].initialHeight),i&2&&(r.measuredWidth=e[21].measured.width),i&2&&(r.measuredHeight=e[21].measured.height),i&2&&(r.parentId=e[21].parentId),i&1&&(r.nodeClickDistance=e[0]),n.$set(r)},i(s){o||(S(n.$$.fragment,s),o=!0)},o(s){P(n.$$.fragment,s),o=!1},d(s){s&&p(t),ne(n,s)}}}function Rm(l){let e,t=[],n=new Lm,o,s=wt(l[1]);const i=r=>r[21].id;for(let r=0;r<s.length;r+=1){let a=Mr(l,s,r),c=i(a);n.set(c,t[r]=Tr(c,a))}return{c(){e=z("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=N(r,"DIV",{class:!0});var a=C(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(p),this.h()},h(){m(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(r,a){B(r,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);o=!0},p(r,[a]){a&2111&&(s=wt(r[1]),Oe(),t=ho(t,a,i,1,r,s,n,e,mo,Tr,null,Mr),He())},i(r){if(!o){for(let a=0;a<s.length;a+=1)S(t[a]);o=!0}},o(r){for(let a=0;a<t.length;a+=1)P(t[a]);o=!1},d(r){r&&p(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Um(l,e,t){let n,o,s,i,r,{nodeClickDistance:a=0}=e;const{visibleNodes:c,nodesDraggable:u,nodesConnectable:f,elementsSelectable:h,updateNodeInternals:d,parentLookup:_}=jt();ce(l,c,L=>t(1,n=L)),ce(l,u,L=>t(2,o=L)),ce(l,f,L=>t(4,i=L)),ce(l,h,L=>t(3,s=L)),ce(l,_,L=>t(5,r=L));const b=typeof ResizeObserver>"u"?null:new ResizeObserver(L=>{const O=new Map;L.forEach(H=>{const F=H.target.getAttribute("data-id");O.set(F,{id:F,nodeElement:H.target,force:!0})}),d(O)});$n(()=>{b==null||b.disconnect()});function v(L){_t.call(this,l,L)}function g(L){_t.call(this,l,L)}function w(L){_t.call(this,l,L)}function y(L){_t.call(this,l,L)}function k(L){_t.call(this,l,L)}function I(L){_t.call(this,l,L)}function V(L){_t.call(this,l,L)}function T(L){_t.call(this,l,L)}return l.$$set=L=>{"nodeClickDistance"in L&&t(0,a=L.nodeClickDistance)},[a,n,o,s,i,r,c,u,f,h,_,b,v,g,w,y,k,I,V,T]}class Wm extends Ae{constructor(e){super(),Le(this,e,Um,Rm,We,{nodeClickDistance:0})}}function Vr(l){let e,t,n,o,s,i,r,a;var c=l[27];function u(f,h){return{props:{id:f[0],source:f[1],target:f[2],sourceX:f[14],sourceY:f[15],targetX:f[16],targetY:f[17],sourcePosition:f[18],targetPosition:f[19],animated:f[6],selected:f[7],label:f[10],labelStyle:f[11],data:f[3],style:f[4],interactionWidth:f[21],selectable:f[24],deletable:f[8]??!0,type:f[23],sourceHandleId:f[12],targetHandleId:f[13],markerStart:f[26],markerEnd:f[25]}}}return c&&(n=no(c,u(l))),{c(){e=Ve("svg"),t=Ve("g"),n&&ee(n.$$.fragment),this.h()},l(f){e=ze(f,"svg",{});var h=C(e);t=ze(h,"g",{class:!0,"data-id":!0,"aria-label":!0,role:!0});var d=C(t);n&&oe(n.$$.fragment,d),d.forEach(p),h.forEach(p),this.h()},h(){m(t,"class",o=Ht(["svelte-flow__edge",l[22]])),m(t,"data-id",l[0]),m(t,"aria-label",s=l[20]===null?void 0:l[20]?l[20]:`Edge from ${l[1]} to ${l[2]}`),m(t,"role","img"),ot(t,"animated",l[6]),ot(t,"selected",l[7]),ot(t,"selectable",l[24]),et(e,"z-index",l[5])},m(f,h){B(f,e,h),E(e,t),n&&te(n,t,null),i=!0,r||(a=[ke(t,"click",l[32]),ke(t,"contextmenu",l[41]),ke(t,"mouseenter",l[42]),ke(t,"mouseleave",l[43])],r=!0)},p(f,h){if(h[0]&134217728&&c!==(c=f[27])){if(n){Oe();const d=n;P(d.$$.fragment,1,0,()=>{ne(d,1)}),He()}c?(n=no(c,u(f)),ee(n.$$.fragment),S(n.$$.fragment,1),te(n,t,null)):n=null}else if(c){const d={};h[0]&1&&(d.id=f[0]),h[0]&2&&(d.source=f[1]),h[0]&4&&(d.target=f[2]),h[0]&16384&&(d.sourceX=f[14]),h[0]&32768&&(d.sourceY=f[15]),h[0]&65536&&(d.targetX=f[16]),h[0]&131072&&(d.targetY=f[17]),h[0]&262144&&(d.sourcePosition=f[18]),h[0]&524288&&(d.targetPosition=f[19]),h[0]&64&&(d.animated=f[6]),h[0]&128&&(d.selected=f[7]),h[0]&1024&&(d.label=f[10]),h[0]&2048&&(d.labelStyle=f[11]),h[0]&8&&(d.data=f[3]),h[0]&16&&(d.style=f[4]),h[0]&2097152&&(d.interactionWidth=f[21]),h[0]&16777216&&(d.selectable=f[24]),h[0]&256&&(d.deletable=f[8]??!0),h[0]&8388608&&(d.type=f[23]),h[0]&4096&&(d.sourceHandleId=f[12]),h[0]&8192&&(d.targetHandleId=f[13]),h[0]&67108864&&(d.markerStart=f[26]),h[0]&33554432&&(d.markerEnd=f[25]),n.$set(d)}(!i||h[0]&4194304&&o!==(o=Ht(["svelte-flow__edge",f[22]])))&&m(t,"class",o),(!i||h[0]&1)&&m(t,"data-id",f[0]),(!i||h[0]&1048582&&s!==(s=f[20]===null?void 0:f[20]?f[20]:`Edge from ${f[1]} to ${f[2]}`))&&m(t,"aria-label",s),(!i||h[0]&4194368)&&ot(t,"animated",f[6]),(!i||h[0]&4194432)&&ot(t,"selected",f[7]),(!i||h[0]&20971520)&&ot(t,"selectable",f[24]),h[0]&32&&et(e,"z-index",f[5])},i(f){i||(n&&S(n.$$.fragment,f),i=!0)},o(f){n&&P(n.$$.fragment,f),i=!1},d(f){f&&p(e),n&&ne(n),r=!1,en(a)}}}function jm(l){let e,t,n=!l[9]&&Vr(l);return{c(){n&&n.c(),e=Ue()},l(o){n&&n.l(o),e=Ue()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[9]?n&&(Oe(),P(n,1,1,()=>{n=null}),He()):n?(n.p(o,s),s[0]&512&&S(n,1)):(n=Vr(o),n.c(),S(n,1),n.m(e.parentNode,e))},i(o){t||(S(n),t=!0)},o(o){P(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function Fm(l,e,t){let n,o,s,i,r,a,c,u,f,{id:h}=e,{type:d="default"}=e,{source:_=""}=e,{target:b=""}=e,{data:v={}}=e,{style:g=void 0}=e,{zIndex:w=void 0}=e,{animated:y=!1}=e,{selected:k=!1}=e,{selectable:I=void 0}=e,{deletable:V=void 0}=e,{hidden:T=!1}=e,{label:L=void 0}=e,{labelStyle:O=void 0}=e,{markerStart:H=void 0}=e,{markerEnd:F=void 0}=e,{sourceHandle:Y=void 0}=e,{targetHandle:G=void 0}=e,{sourceX:D}=e,{sourceY:K}=e,{targetX:M}=e,{targetY:W}=e,{sourcePosition:j}=e,{targetPosition:Z}=e,{ariaLabel:A=void 0}=e,{interactionWidth:X=void 0}=e,{class:q=""}=e;Ml("svelteflow__edge_id",h);const{edgeLookup:se,edgeTypes:J,flowId:me,elementsSelectable:_e}=jt();ce(l,se,he=>t(44,a=he)),ce(l,J,he=>t(40,f=he)),ce(l,me,he=>t(39,u=he)),ce(l,_e,he=>t(38,c=he));const ie=tn(),le=pa();function Pe(he){const rt=a.get(h);rt&&(le(h),ie("edgeclick",{event:he,edge:rt}))}function ae(he,rt){const it=a.get(h);it&&ie(rt,{event:he,edge:it})}const Re=he=>{ae(he,"edgecontextmenu")},Ie=he=>{ae(he,"edgemouseenter")},Je=he=>{ae(he,"edgemouseleave")};return l.$$set=he=>{"id"in he&&t(0,h=he.id),"type"in he&&t(34,d=he.type),"source"in he&&t(1,_=he.source),"target"in he&&t(2,b=he.target),"data"in he&&t(3,v=he.data),"style"in he&&t(4,g=he.style),"zIndex"in he&&t(5,w=he.zIndex),"animated"in he&&t(6,y=he.animated),"selected"in he&&t(7,k=he.selected),"selectable"in he&&t(35,I=he.selectable),"deletable"in he&&t(8,V=he.deletable),"hidden"in he&&t(9,T=he.hidden),"label"in he&&t(10,L=he.label),"labelStyle"in he&&t(11,O=he.labelStyle),"markerStart"in he&&t(36,H=he.markerStart),"markerEnd"in he&&t(37,F=he.markerEnd),"sourceHandle"in he&&t(12,Y=he.sourceHandle),"targetHandle"in he&&t(13,G=he.targetHandle),"sourceX"in he&&t(14,D=he.sourceX),"sourceY"in he&&t(15,K=he.sourceY),"targetX"in he&&t(16,M=he.targetX),"targetY"in he&&t(17,W=he.targetY),"sourcePosition"in he&&t(18,j=he.sourcePosition),"targetPosition"in he&&t(19,Z=he.targetPosition),"ariaLabel"in he&&t(20,A=he.ariaLabel),"interactionWidth"in he&&t(21,X=he.interactionWidth),"class"in he&&t(22,q=he.class)},l.$$.update=()=>{l.$$.dirty[1]&8&&t(23,n=d||"default"),l.$$.dirty[0]&8388608|l.$$.dirty[1]&512&&t(27,o=f[n]||ba),l.$$.dirty[1]&288&&t(26,s=H?`url('#${Yo(H,u)}')`:void 0),l.$$.dirty[1]&320&&t(25,i=F?`url('#${Yo(F,u)}')`:void 0),l.$$.dirty[1]&144&&t(24,r=I??c)},[h,_,b,v,g,w,y,k,V,T,L,O,Y,G,D,K,M,W,j,Z,A,X,q,n,r,i,s,o,se,J,me,_e,Pe,ae,d,I,H,F,c,u,f,Re,Ie,Je]}class Ym extends Ae{constructor(e){super(),Le(this,e,Fm,jm,zi,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}function Zm(l,e,t){let{onMount:n=void 0}=e,{onDestroy:o=void 0}=e;return gn(()=>(n==null||n(),o)),l.$$set=s=>{"onMount"in s&&t(0,n=s.onMount),"onDestroy"in s&&t(1,o=s.onDestroy)},[n,o]}class Xm extends Ae{constructor(e){super(),Le(this,e,Zm,null,We,{onMount:0,onDestroy:1})}}function zr(l,e,t){const n=l.slice();return n[2]=e[t],n}function Nr(l,e){let t,n,o;const s=[e[2]];let i={};for(let r=0;r<s.length;r+=1)i=kt(i,s[r]);return n=new e1({props:i}),{key:l,first:null,c(){t=Ue(),ee(n.$$.fragment),this.h()},l(r){t=Ue(),oe(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,a){B(r,t,a),te(n,r,a),o=!0},p(r,a){e=r;const c=a&1?xn(s,[Vl(e[2])]):{};n.$set(c)},i(r){o||(S(n.$$.fragment,r),o=!0)},o(r){P(n.$$.fragment,r),o=!1},d(r){r&&p(t),ne(n,r)}}}function Km(l){let e,t=[],n=new Map,o,s=wt(l[0]);const i=r=>r[2].id;for(let r=0;r<s.length;r+=1){let a=zr(l,s,r),c=i(a);n.set(c,t[r]=Nr(c,a))}return{c(){e=Ve("defs");for(let r=0;r<t.length;r+=1)t[r].c()},l(r){e=ze(r,"defs",{});var a=C(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(p)},m(r,a){B(r,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);o=!0},p(r,[a]){a&1&&(s=wt(r[0]),Oe(),t=ho(t,a,i,1,r,s,n,e,mo,Nr,null,zr),He())},i(r){if(!o){for(let a=0;a<s.length;a+=1)S(t[a]);o=!0}},o(r){for(let a=0;a<t.length;a+=1)P(t[a]);o=!1},d(r){r&&p(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Gm(l,e,t){let n;const{markers:o}=jt();return ce(l,o,s=>t(0,n=s)),[n,o]}class qm extends Ae{constructor(e){super(),Le(this,e,Gm,Km,We,{})}}function Jm(l){let e;return{c(){e=Ve("polyline"),this.h()},l(t){e=ze(t,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),C(e).forEach(p),this.h()},h(){m(e,"stroke",l[6]),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"stroke-width",l[7]),m(e,"fill",l[6]),m(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(t,n){B(t,e,n)},p(t,n){n&64&&m(e,"stroke",t[6]),n&128&&m(e,"stroke-width",t[7]),n&64&&m(e,"fill",t[6])},d(t){t&&p(e)}}}function Qm(l){let e;return{c(){e=Ve("polyline"),this.h()},l(t){e=ze(t,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),C(e).forEach(p),this.h()},h(){m(e,"stroke",l[6]),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"stroke-width",l[7]),m(e,"fill","none"),m(e,"points","-5,-4 0,0 -5,4")},m(t,n){B(t,e,n)},p(t,n){n&64&&m(e,"stroke",t[6]),n&128&&m(e,"stroke-width",t[7])},d(t){t&&p(e)}}}function xm(l){let e,t,n;function o(r,a){if(r[1]===io.Arrow)return Qm;if(r[1]===io.ArrowClosed)return Jm}let s=o(l),i=s&&s(l);return{c(){e=Ve("marker"),i&&i.c(),this.h()},l(r){e=ze(r,"marker",{class:!0,id:!0,markerWidth:!0,markerHeight:!0,viewBox:!0,markerUnits:!0,orient:!0,refX:!0,refY:!0});var a=C(e);i&&i.l(a),a.forEach(p),this.h()},h(){m(e,"class","svelte-flow__arrowhead"),m(e,"id",l[0]),m(e,"markerWidth",t=`${l[2]}`),m(e,"markerHeight",n=`${l[3]}`),m(e,"viewBox","-10 -10 20 20"),m(e,"markerUnits",l[4]),m(e,"orient",l[5]),m(e,"refX","0"),m(e,"refY","0")},m(r,a){B(r,e,a),i&&i.m(e,null)},p(r,[a]){s===(s=o(r))&&i?i.p(r,a):(i&&i.d(1),i=s&&s(r),i&&(i.c(),i.m(e,null))),a&1&&m(e,"id",r[0]),a&4&&t!==(t=`${r[2]}`)&&m(e,"markerWidth",t),a&8&&n!==(n=`${r[3]}`)&&m(e,"markerHeight",n),a&16&&m(e,"markerUnits",r[4]),a&32&&m(e,"orient",r[5])},i:we,o:we,d(r){r&&p(e),i&&i.d()}}}function $m(l,e,t){let{id:n}=e,{type:o}=e,{width:s=12.5}=e,{height:i=12.5}=e,{markerUnits:r="strokeWidth"}=e,{orient:a="auto-start-reverse"}=e,{color:c=void 0}=e,{strokeWidth:u=void 0}=e;return l.$$set=f=>{"id"in f&&t(0,n=f.id),"type"in f&&t(1,o=f.type),"width"in f&&t(2,s=f.width),"height"in f&&t(3,i=f.height),"markerUnits"in f&&t(4,r=f.markerUnits),"orient"in f&&t(5,a=f.orient),"color"in f&&t(6,c=f.color),"strokeWidth"in f&&t(7,u=f.strokeWidth)},[n,o,s,i,r,a,c,u]}class e1 extends Ae{constructor(e){super(),Le(this,e,$m,xm,We,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function Pr(l,e,t){const n=l.slice();return n[14]=e[t],n}function Or(l,e){let t,n,o;return n=new Ym({props:{id:e[14].id,source:e[14].source,target:e[14].target,data:e[14].data,style:e[14].style,animated:e[14].animated,selected:e[14].selected,selectable:e[14].selectable??e[1],deletable:e[14].deletable,hidden:e[14].hidden,label:e[14].label,labelStyle:e[14].labelStyle,markerStart:e[14].markerStart,markerEnd:e[14].markerEnd,sourceHandle:e[14].sourceHandle,targetHandle:e[14].targetHandle,sourceX:e[14].sourceX,sourceY:e[14].sourceY,targetX:e[14].targetX,targetY:e[14].targetY,sourcePosition:e[14].sourcePosition,targetPosition:e[14].targetPosition,ariaLabel:e[14].ariaLabel,interactionWidth:e[14].interactionWidth,class:e[14].class,type:e[14].type||"default",zIndex:e[14].zIndex}}),n.$on("edgeclick",e[7]),n.$on("edgecontextmenu",e[8]),n.$on("edgemouseenter",e[9]),n.$on("edgemouseleave",e[10]),{key:l,first:null,c(){t=Ue(),ee(n.$$.fragment),this.h()},l(s){t=Ue(),oe(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,i){B(s,t,i),te(n,s,i),o=!0},p(s,i){e=s;const r={};i&1&&(r.id=e[14].id),i&1&&(r.source=e[14].source),i&1&&(r.target=e[14].target),i&1&&(r.data=e[14].data),i&1&&(r.style=e[14].style),i&1&&(r.animated=e[14].animated),i&1&&(r.selected=e[14].selected),i&3&&(r.selectable=e[14].selectable??e[1]),i&1&&(r.deletable=e[14].deletable),i&1&&(r.hidden=e[14].hidden),i&1&&(r.label=e[14].label),i&1&&(r.labelStyle=e[14].labelStyle),i&1&&(r.markerStart=e[14].markerStart),i&1&&(r.markerEnd=e[14].markerEnd),i&1&&(r.sourceHandle=e[14].sourceHandle),i&1&&(r.targetHandle=e[14].targetHandle),i&1&&(r.sourceX=e[14].sourceX),i&1&&(r.sourceY=e[14].sourceY),i&1&&(r.targetX=e[14].targetX),i&1&&(r.targetY=e[14].targetY),i&1&&(r.sourcePosition=e[14].sourcePosition),i&1&&(r.targetPosition=e[14].targetPosition),i&1&&(r.ariaLabel=e[14].ariaLabel),i&1&&(r.interactionWidth=e[14].interactionWidth),i&1&&(r.class=e[14].class),i&1&&(r.type=e[14].type||"default"),i&1&&(r.zIndex=e[14].zIndex),n.$set(r)},i(s){o||(S(n.$$.fragment,s),o=!0)},o(s){P(n.$$.fragment,s),o=!1},d(s){s&&p(t),ne(n,s)}}}function Hr(l){let e,t;return e=new Xm({props:{onMount:l[11],onDestroy:l[12]}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&4&&(s.onMount=n[11]),o&4&&(s.onDestroy=n[12]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function t1(l){let e,t,n,o,s=[],i=new Map,r,a;n=new qm({});let c=wt(l[0]);const u=h=>h[14].id;for(let h=0;h<c.length;h+=1){let d=Pr(l,c,h),_=u(d);i.set(_,s[h]=Or(_,d))}let f=l[0].length>0&&Hr(l);return{c(){e=z("div"),t=Ve("svg"),ee(n.$$.fragment),o=x();for(let h=0;h<s.length;h+=1)s[h].c();r=x(),f&&f.c(),this.h()},l(h){e=N(h,"DIV",{class:!0});var d=C(e);t=ze(d,"svg",{class:!0});var _=C(t);oe(n.$$.fragment,_),_.forEach(p),o=$(d);for(let b=0;b<s.length;b+=1)s[b].l(d);r=$(d),f&&f.l(d),d.forEach(p),this.h()},h(){m(t,"class","svelte-flow__marker"),m(e,"class","svelte-flow__edges")},m(h,d){B(h,e,d),E(e,t),te(n,t,null),E(e,o);for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(e,null);E(e,r),f&&f.m(e,null),a=!0},p(h,[d]){d&3&&(c=wt(h[0]),Oe(),s=ho(s,d,u,1,h,c,i,e,mo,Or,r,Pr),He()),h[0].length>0?f?(f.p(h,d),d&1&&S(f,1)):(f=Hr(h),f.c(),S(f,1),f.m(e,null)):f&&(Oe(),P(f,1,1,()=>{f=null}),He())},i(h){if(!a){S(n.$$.fragment,h);for(let d=0;d<c.length;d+=1)S(s[d]);S(f),a=!0}},o(h){P(n.$$.fragment,h);for(let d=0;d<s.length;d+=1)P(s[d]);P(f),a=!1},d(h){h&&p(e),ne(n);for(let d=0;d<s.length;d+=1)s[d].d();f&&f.d()}}}function n1(l,e,t){let n,o,s,{defaultEdgeOptions:i}=e;const{visibleEdges:r,edgesInitialized:a,edges:{setDefaultOptions:c},elementsSelectable:u}=jt();ce(l,r,g=>t(0,n=g)),ce(l,a,g=>t(2,s=g)),ce(l,u,g=>t(1,o=g)),gn(()=>{i&&c(i)});function f(g){_t.call(this,l,g)}function h(g){_t.call(this,l,g)}function d(g){_t.call(this,l,g)}function _(g){_t.call(this,l,g)}const b=()=>{to(a,s=!0,s)},v=()=>{to(a,s=!1,s)};return l.$$set=g=>{"defaultEdgeOptions"in g&&t(6,i=g.defaultEdgeOptions)},[n,o,s,r,a,u,i,f,h,d,_,b,v]}class l1 extends Ae{constructor(e){super(),Le(this,e,n1,t1,We,{defaultEdgeOptions:6})}}function Br(l){let e;return{c(){e=z("div"),this.h()},l(t){e=N(t,"DIV",{class:!0}),C(e).forEach(p),this.h()},h(){m(e,"class","svelte-flow__selection svelte-1iugwpu"),et(e,"width",typeof l[2]=="string"?l[2]:`${l[2]}px`),et(e,"height",typeof l[3]=="string"?l[3]:`${l[3]}px`),et(e,"transform",`translate(${l[0]}px, ${l[1]}px)`)},m(t,n){B(t,e,n)},p(t,n){n&4&&et(e,"width",typeof t[2]=="string"?t[2]:`${t[2]}px`),n&8&&et(e,"height",typeof t[3]=="string"?t[3]:`${t[3]}px`),n&3&&et(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},d(t){t&&p(e)}}}function o1(l){let e,t=l[4]&&Br(l);return{c(){t&&t.c(),e=Ue()},l(n){t&&t.l(n),e=Ue()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,[o]){n[4]?t?t.p(n,o):(t=Br(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:we,o:we,d(n){n&&p(e),t&&t.d(n)}}}function s1(l,e,t){let{x:n=0}=e,{y:o=0}=e,{width:s=0}=e,{height:i=0}=e,{isVisible:r=!0}=e;return l.$$set=a=>{"x"in a&&t(0,n=a.x),"y"in a&&t(1,o=a.y),"width"in a&&t(2,s=a.width),"height"in a&&t(3,i=a.height),"isVisible"in a&&t(4,r=a.isVisible)},[n,o,s,i,r]}class Ea extends Ae{constructor(e){super(),Le(this,e,s1,o1,We,{x:0,y:1,width:2,height:3,isVisible:4})}}function r1(l){var n,o,s,i;let e,t;return e=new Ea({props:{isVisible:!!(l[0]&&l[1]==="user"),width:(n=l[0])==null?void 0:n.width,height:(o=l[0])==null?void 0:o.height,x:(s=l[0])==null?void 0:s.x,y:(i=l[0])==null?void 0:i.y}}),{c(){ee(e.$$.fragment)},l(r){oe(e.$$.fragment,r)},m(r,a){te(e,r,a),t=!0},p(r,[a]){var u,f,h,d;const c={};a&3&&(c.isVisible=!!(r[0]&&r[1]==="user")),a&1&&(c.width=(u=r[0])==null?void 0:u.width),a&1&&(c.height=(f=r[0])==null?void 0:f.height),a&1&&(c.x=(h=r[0])==null?void 0:h.x),a&1&&(c.y=(d=r[0])==null?void 0:d.y),e.$set(c)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){ne(e,r)}}}function i1(l,e,t){let n,o;const{selectionRect:s,selectionRectMode:i}=jt();return ce(l,s,r=>t(0,n=r)),ce(l,i,r=>t(1,o=r)),[n,o,s,i]}class a1 extends Ae{constructor(e){super(),Le(this,e,i1,r1,We,{})}}function Ar(l){let e,t,n,o,s;return t=new Ea({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(i){e=N(i,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var r=C(e);oe(t.$$.fragment,r),r.forEach(p),this.h()},h(){m(e,"class","selection-wrapper nopan svelte-5pxri"),et(e,"width",l[1].width+"px"),et(e,"height",l[1].height+"px"),et(e,"transform","translate("+l[1].x+"px, "+l[1].y+"px)"),m(e,"role","button"),m(e,"tabindex","-1")},m(i,r){B(i,e,r),te(t,e,null),n=!0,o||(s=[hn(ka.call(null,e,{disabled:!1,store:l[2],onDrag:l[11],onDragStart:l[12],onDragStop:l[13]})),ke(e,"contextmenu",l[7]),ke(e,"click",l[8]),ke(e,"keyup",u1)],o=!0)},p(i,r){(!n||r&2)&&et(e,"width",i[1].width+"px"),(!n||r&2)&&et(e,"height",i[1].height+"px"),(!n||r&2)&&et(e,"transform","translate("+i[1].x+"px, "+i[1].y+"px)")},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){i&&p(e),ne(t),o=!1,en(s)}}}function c1(l){let e=l[0]==="nodes"&&l[1]&&Nn(l[1].x)&&Nn(l[1].y),t,n,o=e&&Ar(l);return{c(){o&&o.c(),t=Ue()},l(s){o&&o.l(s),t=Ue()},m(s,i){o&&o.m(s,i),B(s,t,i),n=!0},p(s,[i]){i&3&&(e=s[0]==="nodes"&&s[1]&&Nn(s[1].x)&&Nn(s[1].y)),e?o?(o.p(s,i),i&3&&S(o,1)):(o=Ar(s),o.c(),S(o,1),o.m(t.parentNode,t)):o&&(Oe(),P(o,1,1,()=>{o=null}),He())},i(s){n||(S(o),n=!0)},o(s){P(o),n=!1},d(s){s&&p(t),o&&o.d(s)}}}const u1=()=>{};function f1(l,e,t){let n,o,s;const i=jt(),{selectionRectMode:r,nodes:a,nodeLookup:c}=i;ce(l,r,g=>t(0,s=g)),ce(l,a,g=>t(9,n=g)),ce(l,c,g=>t(10,o=g));const u=tn();let f=null;function h(g){const w=n.filter(y=>y.selected);u("selectioncontextmenu",{nodes:w,event:g})}function d(g){const w=n.filter(y=>y.selected);u("selectionclick",{nodes:w,event:g})}const _=(g,w,y,k)=>{u("nodedrag",{event:g,targetNode:null,nodes:k})},b=(g,w,y,k)=>{u("nodedragstart",{event:g,targetNode:null,nodes:k})},v=(g,w,y,k)=>{u("nodedragstop",{event:g,targetNode:null,nodes:k})};return l.$$.update=()=>{l.$$.dirty&1537&&s==="nodes"&&t(1,f=wo(o,{filter:g=>!!g.selected}))},[s,f,i,r,a,c,u,h,d,n,o,_,b,v]}class d1 extends Ae{constructor(e){super(),Le(this,e,f1,c1,We,{})}}function An(l,e){let{enabled:t=!0,trigger:n,type:o="keydown"}=e;function s(i){const r=Array.isArray(n)?n:[n],a={alt:i.altKey,ctrl:i.ctrlKey,shift:i.shiftKey,meta:i.metaKey};for(const c of r){const u={modifier:[],preventDefault:!1,enabled:!0,...c},{modifier:f,key:h,callback:d,preventDefault:_,enabled:b}=u;if(b){if(f.length&&!(Array.isArray(f)?f:[f]).map(w=>typeof w=="string"?[w]:w).some(w=>w.every(y=>a[y])))continue;if(i.key===h){_&&i.preventDefault();const v={node:l,trigger:u,originalEvent:i};l.dispatchEvent(new CustomEvent("shortcut",{detail:v})),d==null||d(v)}}}}return t&&l.addEventListener(o,s),{update:i=>{const{enabled:r=!0,type:a="keydown"}=i;t&&(!r||o!==a)?l.removeEventListener(o,s):!t&&r&&l.addEventListener(a,s),t=r,o=a,n=i.trigger},destroy:()=>{l.removeEventListener(o,s)}}}function h1(l){let e,t,n,o,s,i,r,a,c,u,f,h;return{c:we,l:we,m(d,_){f||(h=[hn(e=An.call(null,window,{trigger:Zt(l[0],l[11]),type:"keydown"})),hn(t=An.call(null,window,{trigger:Zt(l[0],l[12]),type:"keyup"})),hn(n=An.call(null,window,{trigger:Zt(l[1],l[13]),type:"keydown"})),hn(o=An.call(null,window,{trigger:Zt(l[1],l[14]),type:"keyup"})),hn(s=An.call(null,window,{trigger:Zt(l[2],l[15]),type:"keydown"})),hn(i=An.call(null,window,{trigger:Zt(l[2],l[16]),type:"keyup"})),hn(r=An.call(null,window,{trigger:Zt(l[3],l[17]),type:"keydown"})),hn(a=An.call(null,window,{trigger:Zt(l[3],l[18]),type:"keyup"})),hn(c=An.call(null,window,{trigger:Zt(l[4],l[19]),type:"keydown"})),hn(u=An.call(null,window,{trigger:Zt(l[4],l[20]),type:"keyup"})),ke(window,"blur",l[10]),ke(window,"contextmenu",l[10])],f=!0)},p(d,[_]){e&&$t(e.update)&&_&1&&e.update.call(null,{trigger:Zt(d[0],d[11]),type:"keydown"}),t&&$t(t.update)&&_&1&&t.update.call(null,{trigger:Zt(d[0],d[12]),type:"keyup"}),n&&$t(n.update)&&_&2&&n.update.call(null,{trigger:Zt(d[1],d[13]),type:"keydown"}),o&&$t(o.update)&&_&2&&o.update.call(null,{trigger:Zt(d[1],d[14]),type:"keyup"}),s&&$t(s.update)&&_&4&&s.update.call(null,{trigger:Zt(d[2],d[15]),type:"keydown"}),i&&$t(i.update)&&_&4&&i.update.call(null,{trigger:Zt(d[2],d[16]),type:"keyup"}),r&&$t(r.update)&&_&8&&r.update.call(null,{trigger:Zt(d[3],d[17]),type:"keydown"}),a&&$t(a.update)&&_&8&&a.update.call(null,{trigger:Zt(d[3],d[18]),type:"keyup"}),c&&$t(c.update)&&_&16&&c.update.call(null,{trigger:Zt(d[4],d[19]),type:"keydown"}),u&&$t(u.update)&&_&16&&u.update.call(null,{trigger:Zt(d[4],d[20]),type:"keyup"})},i:we,o:we,d(d){f=!1,en(h)}}}function Ia(l){return l!==null&&typeof l=="object"}function m1(l){return Ia(l)?l.modifier||[]:[]}function g1(l){return l==null?"":Ia(l)?l.key:l}function Zt(l,e){return(Array.isArray(l)?l:[l]).map(n=>{const o=g1(n);return{key:o,modifier:m1(n),enabled:o!==null,callback:e}})}function _1(l,e,t){let{selectionKey:n="Shift"}=e,{multiSelectionKey:o=co()?"Meta":"Control"}=e,{deleteKey:s="Backspace"}=e,{panActivationKey:i=" "}=e,{zoomActivationKey:r=co()?"Meta":"Control"}=e;const{selectionKeyPressed:a,multiselectionKeyPressed:c,deleteKeyPressed:u,panActivationKeyPressed:f,zoomActivationKeyPressed:h,selectionRect:d}=jt();function _(){d.set(null),a.set(!1),c.set(!1),u.set(!1),f.set(!1),h.set(!1)}const b=()=>a.set(!0),v=()=>a.set(!1),g=()=>c.set(!0),w=()=>c.set(!1),y=O=>{!(O.originalEvent.ctrlKey||O.originalEvent.metaKey||O.originalEvent.shiftKey)&&!$d(O.originalEvent)&&u.set(!0)},k=()=>u.set(!1),I=()=>f.set(!0),V=()=>f.set(!1),T=()=>h.set(!0),L=()=>h.set(!1);return l.$$set=O=>{"selectionKey"in O&&t(0,n=O.selectionKey),"multiSelectionKey"in O&&t(1,o=O.multiSelectionKey),"deleteKey"in O&&t(2,s=O.deleteKey),"panActivationKey"in O&&t(3,i=O.panActivationKey),"zoomActivationKey"in O&&t(4,r=O.zoomActivationKey)},[n,o,s,i,r,a,c,u,f,h,_,b,v,g,w,y,k,I,V,T,L]}class p1 extends Ae{constructor(e){super(),Le(this,e,_1,h1,We,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const b1=l=>({}),Lr=l=>({});function Rr(l){let e,t,n,o;const s=l[13].connectionLine,i=Kt(s,l,l[12],Lr);let r=!l[2]&&Ur(l);return{c(){e=Ve("svg"),t=Ve("g"),i&&i.c(),r&&r.c(),this.h()},l(a){e=ze(a,"svg",{width:!0,height:!0,class:!0,style:!0});var c=C(e);t=ze(c,"g",{class:!0});var u=C(t);i&&i.l(u),r&&r.l(u),u.forEach(p),c.forEach(p),this.h()},h(){m(t,"class",n=Ht(["svelte-flow__connection",cr(l[3].isValid)])),m(e,"width",l[5]),m(e,"height",l[6]),m(e,"class","svelte-flow__connectionline"),m(e,"style",l[0])},m(a,c){B(a,e,c),E(e,t),i&&i.m(t,null),r&&r.m(t,null),o=!0},p(a,c){i&&i.p&&(!o||c&4096)&&Gt(i,s,a,a[12],o?Jt(s,a[12],c,b1):qt(a[12]),Lr),a[2]?r&&(r.d(1),r=null):r?r.p(a,c):(r=Ur(a),r.c(),r.m(t,null)),(!o||c&8&&n!==(n=Ht(["svelte-flow__connection",cr(a[3].isValid)])))&&m(t,"class",n),(!o||c&32)&&m(e,"width",a[5]),(!o||c&64)&&m(e,"height",a[6]),(!o||c&1)&&m(e,"style",a[0])},i(a){o||(S(i,a),o=!0)},o(a){P(i,a),o=!1},d(a){a&&p(e),i&&i.d(a),r&&r.d()}}}function Ur(l){let e;return{c(){e=Ve("path"),this.h()},l(t){e=ze(t,"path",{d:!0,style:!0,fill:!0,class:!0}),C(e).forEach(p),this.h()},h(){m(e,"d",l[4]),m(e,"style",l[1]),m(e,"fill","none"),m(e,"class","svelte-flow__connection-path")},m(t,n){B(t,e,n)},p(t,n){n&16&&m(e,"d",t[4]),n&2&&m(e,"style",t[1])},d(t){t&&p(e)}}}function v1(l){let e,t,n=l[3].inProgress&&Rr(l);return{c(){n&&n.c(),e=Ue()},l(o){n&&n.l(o),e=Ue()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,[s]){o[3].inProgress?n?(n.p(o,s),s&8&&S(n,1)):(n=Rr(o),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(Oe(),P(n,1,1,()=>{n=null}),He())},i(o){t||(S(n),t=!0)},o(o){P(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function w1(l,e,t){let n,o,s,i,{$$slots:r={},$$scope:a}=e,{containerStyle:c=""}=e,{style:u=""}=e,{isCustomComponent:f=!1}=e;const{width:h,height:d,connection:_,connectionLineType:b}=jt();ce(l,h,g=>t(5,s=g)),ce(l,d,g=>t(6,i=g)),ce(l,_,g=>t(3,o=g)),ce(l,b,g=>t(11,n=g));let v=null;return l.$$set=g=>{"containerStyle"in g&&t(0,c=g.containerStyle),"style"in g&&t(1,u=g.style),"isCustomComponent"in g&&t(2,f=g.isCustomComponent),"$$scope"in g&&t(12,a=g.$$scope)},l.$$.update=()=>{if(l.$$.dirty&2060&&o.inProgress&&!f){const{from:g,to:w,fromPosition:y,toPosition:k}=o,I={sourceX:g.x,sourceY:g.y,sourcePosition:y,targetX:w.x,targetY:w.y,targetPosition:k};switch(n){case vl.Bezier:t(4,[v]=ea(I),v);break;case vl.Step:t(4,[v]=uo({...I,borderRadius:0}),v);break;case vl.SmoothStep:t(4,[v]=uo(I),v);break;default:t(4,[v]=na(I),v)}}},[c,u,f,o,v,s,i,h,d,_,b,n,a,r]}class y1 extends Ae{constructor(e){super(),Le(this,e,w1,v1,We,{containerStyle:0,style:1,isCustomComponent:2})}}function k1(l){let e,t,n;const o=l[8].default,s=Kt(o,l,l[7],null);let i=[{class:t=Ht(["svelte-flow__panel",l[1],...l[2]])},{style:l[0]},l[5]],r={};for(let a=0;a<i.length;a+=1)r=kt(r,i[a]);return{c(){e=z("div"),s&&s.c(),this.h()},l(a){e=N(a,"DIV",{class:!0,style:!0});var c=C(e);s&&s.l(c),c.forEach(p),this.h()},h(){wl(e,r),et(e,"pointer-events",l[3]?"none":"")},m(a,c){B(a,e,c),s&&s.m(e,null),n=!0},p(a,[c]){s&&s.p&&(!n||c&128)&&Gt(s,o,a,a[7],n?Jt(o,a[7],c,null):qt(a[7]),null),wl(e,r=xn(i,[(!n||c&6&&t!==(t=Ht(["svelte-flow__panel",a[1],...a[2]])))&&{class:t},(!n||c&1)&&{style:a[0]},c&32&&a[5]])),et(e,"pointer-events",a[3]?"none":"")},i(a){n||(S(s,a),n=!0)},o(a){P(s,a),n=!1},d(a){a&&p(e),s&&s.d(a)}}}function E1(l,e,t){let n;const o=["position","style","class"];let s=Wt(e,o),i,{$$slots:r={},$$scope:a}=e,{position:c="top-right"}=e,{style:u=void 0}=e,{class:f=void 0}=e;const{selectionRectMode:h}=jt();return ce(l,h,d=>t(3,i=d)),l.$$set=d=>{e=kt(kt({},e),Pn(d)),t(5,s=Wt(e,o)),"position"in d&&t(6,c=d.position),"style"in d&&t(0,u=d.style),"class"in d&&t(1,f=d.class),"$$scope"in d&&t(7,a=d.$$scope)},l.$$.update=()=>{l.$$.dirty&64&&t(2,n=`${c}`.split("-"))},[u,f,n,i,h,s,c,a,r]}class Sa extends Ae{constructor(e){super(),Le(this,e,E1,k1,We,{position:6,style:0,class:1})}}function Wr(l){let e,t;return e=new Sa({props:{position:l[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[I1]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.position=n[1]),o&4&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function I1(l){let e,t="Svelte Flow";return{c(){e=z("a"),e.textContent=t,this.h()},l(n){e=N(n,"A",{href:!0,target:!0,rel:!0,"aria-label":!0,"data-svelte-h":!0}),ft(e)!=="svelte-2vm8e4"&&(e.textContent=t),this.h()},h(){m(e,"href","https://svelteflow.dev"),m(e,"target","_blank"),m(e,"rel","noopener noreferrer"),m(e,"aria-label","Svelte Flow attribution")},m(n,o){B(n,e,o)},p:we,d(n){n&&p(e)}}}function S1(l){var o;let e,t,n=!((o=l[0])!=null&&o.hideAttribution)&&Wr(l);return{c(){n&&n.c(),e=Ue()},l(s){n&&n.l(s),e=Ue()},m(s,i){n&&n.m(s,i),B(s,e,i),t=!0},p(s,[i]){var r;(r=s[0])!=null&&r.hideAttribution?n&&(Oe(),P(n,1,1,()=>{n=null}),He()):n?(n.p(s,i),i&1&&S(n,1)):(n=Wr(s),n.c(),S(n,1),n.m(e.parentNode,e))},i(s){t||(S(n),t=!0)},o(s){P(n),t=!1},d(s){s&&p(e),n&&n.d(s)}}}function C1(l,e,t){let{proOptions:n=void 0}=e,{position:o="bottom-right"}=e;return l.$$set=s=>{"proOptions"in s&&t(0,n=s.proOptions),"position"in s&&t(1,o=s.position)},[n,o]}class D1 extends Ae{constructor(e){super(),Le(this,e,C1,S1,We,{proOptions:0,position:1})}}function jr(l,{nodeTypes:e,edgeTypes:t,minZoom:n,maxZoom:o,translateExtent:s,paneClickDistance:i}){e!==void 0&&l.setNodeTypes(e),t!==void 0&&l.setEdgeTypes(t),n!==void 0&&l.setMinZoom(n),o!==void 0&&l.setMaxZoom(o),s!==void 0&&l.setTranslateExtent(s),i!==void 0&&l.setPaneClickDistance(i)}const M1=l=>Object.keys(l);function T1(l,e){M1(e).forEach(t=>{const n=e[t];n!==void 0&&l[t].set(n)})}function V1(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function z1(l="light"){return Vn("light",t=>{if(l!=="system"){t(l);return}const n=V1(),o=()=>t(n!=null&&n.matches?"dark":"light");return t(n!=null&&n.matches?"dark":"light"),n==null||n.addEventListener("change",o),()=>{n==null||n.removeEventListener("change",o)}})}const N1=l=>({}),Fr=l=>({slot:"connectionLine"});function P1(l){let e;const t=l[75].connectionLine,n=Kt(t,l,l[99],Fr);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s[3]&64)&&Gt(n,t,o,o[99],e?Jt(t,o[99],s,N1):qt(o[99]),Fr)},i(o){e||(S(n,o),e=!0)},o(o){P(n,o),e=!1},d(o){n&&n.d(o)}}}function O1(l){let e,t,n,o,s,i,r,a,c,u,f,h;return e=new l1({props:{defaultEdgeOptions:l[21]}}),e.$on("edgeclick",l[78]),e.$on("edgecontextmenu",l[79]),e.$on("edgemouseenter",l[80]),e.$on("edgemouseleave",l[81]),n=new y1({props:{containerStyle:l[7],style:l[6],isCustomComponent:l[34].connectionLine,$$slots:{connectionLine:[P1]},$$scope:{ctx:l}}}),c=new Wm({props:{nodeClickDistance:l[23]}}),c.$on("nodeclick",l[82]),c.$on("nodemouseenter",l[83]),c.$on("nodemousemove",l[84]),c.$on("nodemouseleave",l[85]),c.$on("nodedragstart",l[86]),c.$on("nodedrag",l[87]),c.$on("nodedragstop",l[88]),c.$on("nodecontextmenu",l[89]),f=new d1({}),f.$on("selectionclick",l[90]),f.$on("selectioncontextmenu",l[91]),f.$on("nodedragstart",l[92]),f.$on("nodedrag",l[93]),f.$on("nodedragstop",l[94]),{c(){ee(e.$$.fragment),t=x(),ee(n.$$.fragment),o=x(),s=z("div"),i=x(),r=z("div"),a=x(),ee(c.$$.fragment),u=x(),ee(f.$$.fragment),this.h()},l(d){oe(e.$$.fragment,d),t=$(d),oe(n.$$.fragment,d),o=$(d),s=N(d,"DIV",{class:!0}),C(s).forEach(p),i=$(d),r=N(d,"DIV",{class:!0}),C(r).forEach(p),a=$(d),oe(c.$$.fragment,d),u=$(d),oe(f.$$.fragment,d),this.h()},h(){m(s,"class","svelte-flow__edgelabel-renderer"),m(r,"class","svelte-flow__viewport-portal")},m(d,_){te(e,d,_),B(d,t,_),te(n,d,_),B(d,o,_),B(d,s,_),B(d,i,_),B(d,r,_),B(d,a,_),te(c,d,_),B(d,u,_),te(f,d,_),h=!0},p(d,_){const b={};_[0]&2097152&&(b.defaultEdgeOptions=d[21]),e.$set(b);const v={};_[0]&128&&(v.containerStyle=d[7]),_[0]&64&&(v.style=d[6]),_[1]&8&&(v.isCustomComponent=d[34].connectionLine),_[3]&64&&(v.$$scope={dirty:_,ctx:d}),n.$set(v);const g={};_[0]&8388608&&(g.nodeClickDistance=d[23]),c.$set(g)},i(d){h||(S(e.$$.fragment,d),S(n.$$.fragment,d),S(c.$$.fragment,d),S(f.$$.fragment,d),h=!0)},o(d){P(e.$$.fragment,d),P(n.$$.fragment,d),P(c.$$.fragment,d),P(f.$$.fragment,d),h=!1},d(d){d&&(p(t),p(o),p(s),p(i),p(r),p(a),p(u)),ne(e,d),ne(n,d),ne(c,d),ne(f,d)}}}function H1(l){let e,t,n,o;return e=new Pm({props:{$$slots:{default:[O1]},$$scope:{ctx:l}}}),n=new a1({}),{c(){ee(e.$$.fragment),t=x(),ee(n.$$.fragment)},l(s){oe(e.$$.fragment,s),t=$(s),oe(n.$$.fragment,s)},m(s,i){te(e,s,i),B(s,t,i),te(n,s,i),o=!0},p(s,i){const r={};i[0]&10485952|i[1]&8|i[3]&64&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){o||(S(e.$$.fragment,s),S(n.$$.fragment,s),o=!0)},o(s){P(e.$$.fragment,s),P(n.$$.fragment,s),o=!1},d(s){s&&p(t),ne(e,s),ne(n,s)}}}function B1(l){let e,t;return e=new Vm({props:{panOnDrag:l[17]===void 0?!0:l[17],selectionOnDrag:l[18],$$slots:{default:[H1]},$$scope:{ctx:l}}}),e.$on("paneclick",l[95]),e.$on("panecontextmenu",l[96]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&131072&&(s.panOnDrag=n[17]===void 0?!0:n[17]),o[0]&262144&&(s.selectionOnDrag=n[18]),o[0]&10485952|o[1]&8|o[3]&64&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function A1(l){let e,t,n,o,s,i,r,a,c,u,f,h;t=new p1({props:{selectionKey:l[1],deleteKey:l[5],panActivationKey:l[2],multiSelectionKey:l[3],zoomActivationKey:l[4]}}),o=new Dm({props:{initialViewport:l[31],onMoveStart:l[8],onMove:l[9],onMoveEnd:l[10],panOnScrollMode:l[11]===void 0?Un.Free:l[11],preventScrolling:l[12]===void 0?!0:l[12],zoomOnScroll:l[13]===void 0?!0:l[13],zoomOnDoubleClick:l[14]===void 0?!0:l[14],zoomOnPinch:l[15]===void 0?!0:l[15],panOnScroll:l[16]===void 0?!1:l[16],panOnDrag:l[17]===void 0?!0:l[17],paneClickDistance:l[22]===void 0?0:l[22],$$slots:{default:[B1]},$$scope:{ctx:l}}}),i=new D1({props:{proOptions:l[20],position:l[19]}});const d=l[75].default,_=Kt(d,l,l[99],null);let b=[{style:l[24]},{class:a=Ht(["svelte-flow",l[25],l[30]])},{"data-testid":"svelte-flow__wrapper"},l[33],{role:"application"}],v={};for(let g=0;g<b.length;g+=1)v=kt(v,b[g]);return{c(){e=z("div"),ee(t.$$.fragment),n=x(),ee(o.$$.fragment),s=x(),ee(i.$$.fragment),r=x(),_&&_.c(),this.h()},l(g){e=N(g,"DIV",{style:!0,class:!0,"data-testid":!0,role:!0});var w=C(e);oe(t.$$.fragment,w),n=$(w),oe(o.$$.fragment,w),s=$(w),oe(i.$$.fragment,w),r=$(w),_&&_.l(w),w.forEach(p),this.h()},h(){wl(e,v),Qn(()=>l[98].call(e)),ot(e,"svelte-12wlba6",!0)},m(g,w){B(g,e,w),te(t,e,null),E(e,n),te(o,e,null),E(e,s),te(i,e,null),E(e,r),_&&_.m(e,null),l[97](e),c=za(e,l[98].bind(e)),u=!0,f||(h=[ke(e,"dragover",l[76]),ke(e,"drop",l[77])],f=!0)},p(g,w){const y={};w[0]&2&&(y.selectionKey=g[1]),w[0]&32&&(y.deleteKey=g[5]),w[0]&4&&(y.panActivationKey=g[2]),w[0]&8&&(y.multiSelectionKey=g[3]),w[0]&16&&(y.zoomActivationKey=g[4]),t.$set(y);const k={};w[0]&256&&(k.onMoveStart=g[8]),w[0]&512&&(k.onMove=g[9]),w[0]&1024&&(k.onMoveEnd=g[10]),w[0]&2048&&(k.panOnScrollMode=g[11]===void 0?Un.Free:g[11]),w[0]&4096&&(k.preventScrolling=g[12]===void 0?!0:g[12]),w[0]&8192&&(k.zoomOnScroll=g[13]===void 0?!0:g[13]),w[0]&16384&&(k.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),w[0]&32768&&(k.zoomOnPinch=g[15]===void 0?!0:g[15]),w[0]&65536&&(k.panOnScroll=g[16]===void 0?!1:g[16]),w[0]&131072&&(k.panOnDrag=g[17]===void 0?!0:g[17]),w[0]&4194304&&(k.paneClickDistance=g[22]===void 0?0:g[22]),w[0]&10879168|w[1]&8|w[3]&64&&(k.$$scope={dirty:w,ctx:g}),o.$set(k);const I={};w[0]&1048576&&(I.proOptions=g[20]),w[0]&524288&&(I.position=g[19]),i.$set(I),_&&_.p&&(!u||w[3]&64)&&Gt(_,d,g,g[99],u?Jt(d,g[99],w,null):qt(g[99]),null),wl(e,v=xn(b,[(!u||w[0]&16777216)&&{style:g[24]},(!u||w[0]&1107296256&&a!==(a=Ht(["svelte-flow",g[25],g[30]])))&&{class:a},{"data-testid":"svelte-flow__wrapper"},w[1]&4&&g[33],{role:"application"}])),ot(e,"svelte-12wlba6",!0)},i(g){u||(S(t.$$.fragment,g),S(o.$$.fragment,g),S(i.$$.fragment,g),S(_,g),u=!0)},o(g){P(t.$$.fragment,g),P(o.$$.fragment,g),P(i.$$.fragment,g),P(_,g),u=!1},d(g){g&&p(e),ne(t),ne(o),ne(i),_&&_.d(g),l[97](null),c(),f=!1,en(h)}}}function L1(l,e,t){let n;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"];let s=Wt(e,o),i,r,a=we,c=()=>(a(),a=ts(L,Q=>t(100,r=Q)),L),u,f=we,h=()=>(f(),f=ts(n,Q=>t(30,u=Q)),n);l.$$.on_destroy.push(()=>a()),l.$$.on_destroy.push(()=>f());let{$$slots:d={},$$scope:_}=e;const b=Na(d);let{id:v="1"}=e,{nodes:g}=e,{edges:w}=e,{fitView:y=void 0}=e,{fitViewOptions:k=void 0}=e,{minZoom:I=void 0}=e,{maxZoom:V=void 0}=e,{initialViewport:T=void 0}=e,{viewport:L=void 0}=e;c();let{nodeTypes:O=void 0}=e,{edgeTypes:H=void 0}=e,{selectionKey:F=void 0}=e,{selectionMode:Y=void 0}=e,{panActivationKey:G=void 0}=e,{multiSelectionKey:D=void 0}=e,{zoomActivationKey:K=void 0}=e,{nodesDraggable:M=void 0}=e,{nodesConnectable:W=void 0}=e,{nodeDragThreshold:j=void 0}=e,{elementsSelectable:Z=void 0}=e,{snapGrid:A=void 0}=e,{deleteKey:X=void 0}=e,{connectionRadius:q=void 0}=e,{connectionLineType:se=void 0}=e,{connectionMode:J=al.Strict}=e,{connectionLineStyle:me=""}=e,{connectionLineContainerStyle:_e=""}=e,{onMoveStart:ie=void 0}=e,{onMove:le=void 0}=e,{onMoveEnd:Pe=void 0}=e,{isValidConnection:ae=void 0}=e,{translateExtent:Re=void 0}=e,{nodeExtent:Ie=void 0}=e,{onlyRenderVisibleElements:Je=void 0}=e,{panOnScrollMode:he=Un.Free}=e,{preventScrolling:rt=!0}=e,{zoomOnScroll:it=!0}=e,{zoomOnDoubleClick:Rt=!0}=e,{zoomOnPinch:Mt=!0}=e,{panOnScroll:bt=!1}=e,{panOnDrag:pe=!0}=e,{selectionOnDrag:Xe=void 0}=e,{autoPanOnConnect:lt=!0}=e,{autoPanOnNodeDrag:ht=!0}=e,{onerror:pt=void 0}=e,{ondelete:fe=void 0}=e,{onedgecreate:Et=void 0}=e,{attributionPosition:mt=void 0}=e,{proOptions:vt=void 0}=e,{defaultEdgeOptions:Me=void 0}=e,{width:Vt=void 0}=e,{height:ue=void 0}=e,{colorMode:Te="light"}=e,{onconnect:Be=void 0}=e,{onconnectstart:Ke=void 0}=e,{onconnectend:yt=void 0}=e,{onbeforedelete:It=void 0}=e,{oninit:St=void 0}=e,{nodeOrigin:zt=void 0}=e,{paneClickDistance:Bt=0}=e,{nodeClickDistance:Nt=0}=e,{defaultMarkerColor:Ft="#b1b1b7"}=e,{style:Pt=void 0}=e,{class:nn=void 0}=e,fn,sn,dn;const yn=r||T,U=Pa(So)?jt():Em({nodes:de(g),edges:de(w),width:Vt,height:ue,fitView:y,nodeOrigin:zt,nodeExtent:Ie});gn(()=>(U.width.set(sn),U.height.set(dn),U.domNode.set(fn),U.syncNodeStores(g),U.syncEdgeStores(w),U.syncViewport(L),y!==void 0&&U.fitViewOnInit.set(y),k&&U.fitViewOptions.set(k),jr(U,{nodeTypes:O,edgeTypes:H,minZoom:I,maxZoom:V,translateExtent:Re,paneClickDistance:Bt}),()=>{U.reset()}));const{initialized:Se}=U;ce(l,Se,Q=>t(74,i=Q));let Ze=!1;function $e(Q){_t.call(this,l,Q)}function Ye(Q){_t.call(this,l,Q)}function at(Q){_t.call(this,l,Q)}function rn(Q){_t.call(this,l,Q)}function ln(Q){_t.call(this,l,Q)}function gt(Q){_t.call(this,l,Q)}function Ut(Q){_t.call(this,l,Q)}function an(Q){_t.call(this,l,Q)}function _n(Q){_t.call(this,l,Q)}function kn(Q){_t.call(this,l,Q)}function Gn(Q){_t.call(this,l,Q)}function el(Q){_t.call(this,l,Q)}function Cn(Q){_t.call(this,l,Q)}function ul(Q){_t.call(this,l,Q)}function tl(Q){_t.call(this,l,Q)}function En(Q){_t.call(this,l,Q)}function On(Q){_t.call(this,l,Q)}function Wn(Q){_t.call(this,l,Q)}function qn(Q){_t.call(this,l,Q)}function nl(Q){_t.call(this,l,Q)}function Dn(Q){_t.call(this,l,Q)}function fl(Q){je[Q?"unshift":"push"](()=>{fn=Q,t(28,fn)})}function ll(){sn=this.clientWidth,dn=this.clientHeight,t(26,sn),t(27,dn)}return l.$$set=Q=>{e=kt(kt({},e),Pn(Q)),t(33,s=Wt(e,o)),"id"in Q&&t(35,v=Q.id),"nodes"in Q&&t(36,g=Q.nodes),"edges"in Q&&t(37,w=Q.edges),"fitView"in Q&&t(38,y=Q.fitView),"fitViewOptions"in Q&&t(39,k=Q.fitViewOptions),"minZoom"in Q&&t(40,I=Q.minZoom),"maxZoom"in Q&&t(41,V=Q.maxZoom),"initialViewport"in Q&&t(42,T=Q.initialViewport),"viewport"in Q&&c(t(0,L=Q.viewport)),"nodeTypes"in Q&&t(43,O=Q.nodeTypes),"edgeTypes"in Q&&t(44,H=Q.edgeTypes),"selectionKey"in Q&&t(1,F=Q.selectionKey),"selectionMode"in Q&&t(45,Y=Q.selectionMode),"panActivationKey"in Q&&t(2,G=Q.panActivationKey),"multiSelectionKey"in Q&&t(3,D=Q.multiSelectionKey),"zoomActivationKey"in Q&&t(4,K=Q.zoomActivationKey),"nodesDraggable"in Q&&t(46,M=Q.nodesDraggable),"nodesConnectable"in Q&&t(47,W=Q.nodesConnectable),"nodeDragThreshold"in Q&&t(48,j=Q.nodeDragThreshold),"elementsSelectable"in Q&&t(49,Z=Q.elementsSelectable),"snapGrid"in Q&&t(50,A=Q.snapGrid),"deleteKey"in Q&&t(5,X=Q.deleteKey),"connectionRadius"in Q&&t(51,q=Q.connectionRadius),"connectionLineType"in Q&&t(52,se=Q.connectionLineType),"connectionMode"in Q&&t(53,J=Q.connectionMode),"connectionLineStyle"in Q&&t(6,me=Q.connectionLineStyle),"connectionLineContainerStyle"in Q&&t(7,_e=Q.connectionLineContainerStyle),"onMoveStart"in Q&&t(8,ie=Q.onMoveStart),"onMove"in Q&&t(9,le=Q.onMove),"onMoveEnd"in Q&&t(10,Pe=Q.onMoveEnd),"isValidConnection"in Q&&t(54,ae=Q.isValidConnection),"translateExtent"in Q&&t(55,Re=Q.translateExtent),"nodeExtent"in Q&&t(56,Ie=Q.nodeExtent),"onlyRenderVisibleElements"in Q&&t(57,Je=Q.onlyRenderVisibleElements),"panOnScrollMode"in Q&&t(11,he=Q.panOnScrollMode),"preventScrolling"in Q&&t(12,rt=Q.preventScrolling),"zoomOnScroll"in Q&&t(13,it=Q.zoomOnScroll),"zoomOnDoubleClick"in Q&&t(14,Rt=Q.zoomOnDoubleClick),"zoomOnPinch"in Q&&t(15,Mt=Q.zoomOnPinch),"panOnScroll"in Q&&t(16,bt=Q.panOnScroll),"panOnDrag"in Q&&t(17,pe=Q.panOnDrag),"selectionOnDrag"in Q&&t(18,Xe=Q.selectionOnDrag),"autoPanOnConnect"in Q&&t(58,lt=Q.autoPanOnConnect),"autoPanOnNodeDrag"in Q&&t(59,ht=Q.autoPanOnNodeDrag),"onerror"in Q&&t(60,pt=Q.onerror),"ondelete"in Q&&t(61,fe=Q.ondelete),"onedgecreate"in Q&&t(62,Et=Q.onedgecreate),"attributionPosition"in Q&&t(19,mt=Q.attributionPosition),"proOptions"in Q&&t(20,vt=Q.proOptions),"defaultEdgeOptions"in Q&&t(21,Me=Q.defaultEdgeOptions),"width"in Q&&t(63,Vt=Q.width),"height"in Q&&t(64,ue=Q.height),"colorMode"in Q&&t(65,Te=Q.colorMode),"onconnect"in Q&&t(66,Be=Q.onconnect),"onconnectstart"in Q&&t(67,Ke=Q.onconnectstart),"onconnectend"in Q&&t(68,yt=Q.onconnectend),"onbeforedelete"in Q&&t(69,It=Q.onbeforedelete),"oninit"in Q&&t(70,St=Q.oninit),"nodeOrigin"in Q&&t(71,zt=Q.nodeOrigin),"paneClickDistance"in Q&&t(22,Bt=Q.paneClickDistance),"nodeClickDistance"in Q&&t(23,Nt=Q.nodeClickDistance),"defaultMarkerColor"in Q&&t(72,Ft=Q.defaultMarkerColor),"style"in Q&&t(24,Pt=Q.style),"class"in Q&&t(25,nn=Q.class),"$$scope"in Q&&t(99,_=Q.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&201326592&&sn!==void 0&&dn!==void 0&&(U.width.set(sn),U.height.set(dn)),l.$$.dirty[2]&6400&&!Ze&&i&&(St==null||St(),t(73,Ze=!0)),l.$$.dirty[1]&2097135632|l.$$.dirty[2]&1777&&T1(U,{flowId:v,connectionLineType:se,connectionRadius:q,selectionMode:Y,snapGrid:A,defaultMarkerColor:Ft,nodesDraggable:M,nodesConnectable:W,elementsSelectable:Z,onlyRenderVisibleElements:Je,isValidConnection:ae,autoPanOnConnect:lt,autoPanOnNodeDrag:ht,onerror:pt,ondelete:fe,onedgecreate:Et,connectionMode:J,nodeDragThreshold:j,onconnect:Be,onconnectstart:Ke,onconnectend:yt,onbeforedelete:It,nodeOrigin:zt}),l.$$.dirty[0]&4194304|l.$$.dirty[1]&16791040&&jr(U,{nodeTypes:O,edgeTypes:H,minZoom:I,maxZoom:V,translateExtent:Re,paneClickDistance:Bt}),l.$$.dirty[2]&8&&h(t(29,n=z1(Te)))},[L,F,G,D,K,X,me,_e,ie,le,Pe,he,rt,it,Rt,Mt,bt,pe,Xe,mt,vt,Me,Bt,Nt,Pt,nn,sn,dn,fn,n,u,yn,Se,s,b,v,g,w,y,k,I,V,T,O,H,Y,M,W,j,Z,A,q,se,J,ae,Re,Ie,Je,lt,ht,pt,fe,Et,Vt,ue,Te,Be,Ke,yt,It,St,zt,Ft,Ze,i,d,$e,Ye,at,rn,ln,gt,Ut,an,_n,kn,Gn,el,Cn,ul,tl,En,On,Wn,qn,nl,Dn,fl,ll,_]}class R1 extends Ae{constructor(e){super(),Le(this,e,L1,A1,We,{id:35,nodes:36,edges:37,fitView:38,fitViewOptions:39,minZoom:40,maxZoom:41,initialViewport:42,viewport:0,nodeTypes:43,edgeTypes:44,selectionKey:1,selectionMode:45,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:46,nodesConnectable:47,nodeDragThreshold:48,elementsSelectable:49,snapGrid:50,deleteKey:5,connectionRadius:51,connectionLineType:52,connectionMode:53,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:54,translateExtent:55,nodeExtent:56,onlyRenderVisibleElements:57,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:58,autoPanOnNodeDrag:59,onerror:60,ondelete:61,onedgecreate:62,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:63,height:64,colorMode:65,onconnect:66,onconnectstart:67,onconnectend:68,onbeforedelete:69,oninit:70,nodeOrigin:71,paneClickDistance:22,nodeClickDistance:23,defaultMarkerColor:72,style:24,class:25},null,[-1,-1,-1,-1])}}function U1(l){let e;const t=l[7].default,n=Kt(t,l,l[6],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,[s]){n&&n.p&&(!e||s&64)&&Gt(n,t,o,o[6],e?Jt(t,o[6],s,null):qt(o[6]),null)},i(o){e||(S(n,o),e=!0)},o(o){P(n,o),e=!1},d(o){n&&n.d(o)}}}function W1(l,e,t){let{$$slots:n={},$$scope:o}=e,{initialNodes:s=void 0}=e,{initialEdges:i=void 0}=e,{initialWidth:r=void 0}=e,{initialHeight:a=void 0}=e,{fitView:c=void 0}=e,{nodeOrigin:u=void 0}=e;const f=ya({nodes:s,edges:i,width:r,height:a,nodeOrigin:u,fitView:c});return Ml(So,{getStore:()=>f}),$n(()=>{f.reset()}),l.$$set=h=>{"initialNodes"in h&&t(0,s=h.initialNodes),"initialEdges"in h&&t(1,i=h.initialEdges),"initialWidth"in h&&t(2,r=h.initialWidth),"initialHeight"in h&&t(3,a=h.initialHeight),"fitView"in h&&t(4,c=h.fitView),"nodeOrigin"in h&&t(5,u=h.nodeOrigin),"$$scope"in h&&t(6,o=h.$$scope)},[s,i,r,a,c,u,o,n]}class j1 extends Ae{constructor(e){super(),Le(this,e,W1,U1,We,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}const F1=l=>({}),Yr=l=>({class:"button-svg"});function Y1(l){let e,t,n,o,s;const i=l[8].default,r=Kt(i,l,l[7],Yr);let a=[{type:"button"},{class:t=Ht(["svelte-flow__controls-button",l[0]])},l[6]],c={};for(let u=0;u<a.length;u+=1)c=kt(c,a[u]);return{c(){e=z("button"),r&&r.c(),this.h()},l(u){e=N(u,"BUTTON",{type:!0,class:!0});var f=C(e);r&&r.l(f),f.forEach(p),this.h()},h(){wl(e,c),et(e,"--xy-controls-button-background-color-props",l[1]),et(e,"--xy-controls-button-background-color-hover-props",l[2]),et(e,"--xy-controls-button-color-props",l[3]),et(e,"--xy-controls-button-color-hover-props",l[4]),et(e,"--xy-controls-button-border-color-props",l[5])},m(u,f){B(u,e,f),r&&r.m(e,null),e.autofocus&&e.focus(),n=!0,o||(s=ke(e,"click",l[9]),o=!0)},p(u,[f]){r&&r.p&&(!n||f&128)&&Gt(r,i,u,u[7],n?Jt(i,u[7],f,F1):qt(u[7]),Yr),wl(e,c=xn(a,[{type:"button"},(!n||f&1&&t!==(t=Ht(["svelte-flow__controls-button",u[0]])))&&{class:t},f&64&&u[6]])),et(e,"--xy-controls-button-background-color-props",u[1]),et(e,"--xy-controls-button-background-color-hover-props",u[2]),et(e,"--xy-controls-button-color-props",u[3]),et(e,"--xy-controls-button-color-hover-props",u[4]),et(e,"--xy-controls-button-border-color-props",u[5])},i(u){n||(S(r,u),n=!0)},o(u){P(r,u),n=!1},d(u){u&&p(e),r&&r.d(u),o=!1,s()}}}function Z1(l,e,t){const n=["class"];let o=Wt(e,n),{$$slots:s={},$$scope:i}=e,{class:r=void 0}=e,a,c,u,f,h;function d(_){_t.call(this,l,_)}return l.$$set=_=>{e=kt(kt({},e),Pn(_)),t(6,o=Wt(e,n)),"class"in _&&t(0,r=_.class),"$$scope"in _&&t(7,i=_.$$scope)},[r,a,c,u,f,h,o,i,s,d]}class fo extends Ae{constructor(e){super(),Le(this,e,Z1,Y1,We,{class:0})}}function X1(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0});var o=C(e);t=ze(o,"path",{d:!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 32 32")},m(n,o){B(n,e,o),E(e,t)},p:we,i:we,o:we,d(n){n&&p(e)}}}class K1 extends Ae{constructor(e){super(),Le(this,e,null,X1,We,{})}}function G1(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0});var o=C(e);t=ze(o,"path",{d:!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"d","M0 0h32v4.2H0z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 32 5")},m(n,o){B(n,e,o),E(e,t)},p:we,i:we,o:we,d(n){n&&p(e)}}}class q1 extends Ae{constructor(e){super(),Le(this,e,null,G1,We,{})}}function J1(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0});var o=C(e);t=ze(o,"path",{d:!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 32 30")},m(n,o){B(n,e,o),E(e,t)},p:we,i:we,o:we,d(n){n&&p(e)}}}class Q1 extends Ae{constructor(e){super(),Le(this,e,null,J1,We,{})}}function x1(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0});var o=C(e);t=ze(o,"path",{d:!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 25 32")},m(n,o){B(n,e,o),E(e,t)},p:we,i:we,o:we,d(n){n&&p(e)}}}class $1 extends Ae{constructor(e){super(),Le(this,e,null,x1,We,{})}}function eg(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0});var o=C(e);t=ze(o,"path",{d:!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 25 32")},m(n,o){B(n,e,o),E(e,t)},p:we,i:we,o:we,d(n){n&&p(e)}}}class tg extends Ae{constructor(e){super(),Le(this,e,null,eg,We,{})}}const ng=l=>({}),Zr=l=>({}),lg=l=>({}),Xr=l=>({});function Kr(l){let e,t,n,o;const s=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:l[9]},l[17]];let i={$$slots:{default:[og]},$$scope:{ctx:l}};for(let c=0;c<s.length;c+=1)i=kt(i,s[c]);e=new fo({props:i}),e.$on("click",l[18]);const r=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:l[10]},l[17]];let a={$$slots:{default:[sg]},$$scope:{ctx:l}};for(let c=0;c<r.length;c+=1)a=kt(a,r[c]);return n=new fo({props:a}),n.$on("click",l[19]),{c(){ee(e.$$.fragment),t=x(),ee(n.$$.fragment)},l(c){oe(e.$$.fragment,c),t=$(c),oe(n.$$.fragment,c)},m(c,u){te(e,c,u),B(c,t,u),te(n,c,u),o=!0},p(c,u){const f=u[0]&131584?xn(s,[s[0],s[1],s[2],u[0]&512&&{disabled:c[9]},u[0]&131072&&Vl(c[17])]):{};u[1]&32&&(f.$$scope={dirty:u,ctx:c}),e.$set(f);const h=u[0]&132096?xn(r,[r[0],r[1],r[2],u[0]&1024&&{disabled:c[10]},u[0]&131072&&Vl(c[17])]):{};u[1]&32&&(h.$$scope={dirty:u,ctx:c}),n.$set(h)},i(c){o||(S(e.$$.fragment,c),S(n.$$.fragment,c),o=!0)},o(c){P(e.$$.fragment,c),P(n.$$.fragment,c),o=!1},d(c){c&&p(t),ne(e,c),ne(n,c)}}}function og(l){let e,t;return e=new K1({}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function sg(l){let e,t;return e=new q1({}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Gr(l){let e,t;const n=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},l[17]];let o={$$slots:{default:[rg]},$$scope:{ctx:l}};for(let s=0;s<n.length;s+=1)o=kt(o,n[s]);return e=new fo({props:o}),e.$on("click",l[20]),{c(){ee(e.$$.fragment)},l(s){oe(e.$$.fragment,s)},m(s,i){te(e,s,i),t=!0},p(s,i){const r=i[0]&131072?xn(n,[n[0],n[1],n[2],Vl(s[17])]):{};i[1]&32&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||(S(e.$$.fragment,s),t=!0)},o(s){P(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function rg(l){let e,t;return e=new Q1({}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function qr(l){let e,t;const n=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},l[17]];let o={$$slots:{default:[cg]},$$scope:{ctx:l}};for(let s=0;s<n.length;s+=1)o=kt(o,n[s]);return e=new fo({props:o}),e.$on("click",l[21]),{c(){ee(e.$$.fragment)},l(s){oe(e.$$.fragment,s)},m(s,i){te(e,s,i),t=!0},p(s,i){const r=i[0]&131072?xn(n,[n[0],n[1],n[2],Vl(s[17])]):{};i[0]&256|i[1]&32&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||(S(e.$$.fragment,s),t=!0)},o(s){P(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function ig(l){let e,t;return e=new $1({}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function ag(l){let e,t;return e=new tg({}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function cg(l){let e,t,n,o;const s=[ag,ig],i=[];function r(a,c){return a[8]?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ue()},l(a){t.l(a),n=Ue()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e!==u&&(Oe(),P(i[u],1,1,()=>{i[u]=null}),He(),t=i[e],t||(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){P(t),o=!1},d(a){a&&p(n),i[e].d(a)}}}function ug(l){let e,t,n,o,s,i;const r=l[35].before,a=Kt(r,l,l[36],Xr);let c=l[1]&&Kr(l),u=l[2]&&Gr(l),f=l[3]&&qr(l);const h=l[35].default,d=Kt(h,l,l[36],null),_=l[35].after,b=Kt(_,l,l[36],Zr);return{c(){a&&a.c(),e=x(),c&&c.c(),t=x(),u&&u.c(),n=x(),f&&f.c(),o=x(),d&&d.c(),s=x(),b&&b.c()},l(v){a&&a.l(v),e=$(v),c&&c.l(v),t=$(v),u&&u.l(v),n=$(v),f&&f.l(v),o=$(v),d&&d.l(v),s=$(v),b&&b.l(v)},m(v,g){a&&a.m(v,g),B(v,e,g),c&&c.m(v,g),B(v,t,g),u&&u.m(v,g),B(v,n,g),f&&f.m(v,g),B(v,o,g),d&&d.m(v,g),B(v,s,g),b&&b.m(v,g),i=!0},p(v,g){a&&a.p&&(!i||g[1]&32)&&Gt(a,r,v,v[36],i?Jt(r,v[36],g,lg):qt(v[36]),Xr),v[1]?c?(c.p(v,g),g[0]&2&&S(c,1)):(c=Kr(v),c.c(),S(c,1),c.m(t.parentNode,t)):c&&(Oe(),P(c,1,1,()=>{c=null}),He()),v[2]?u?(u.p(v,g),g[0]&4&&S(u,1)):(u=Gr(v),u.c(),S(u,1),u.m(n.parentNode,n)):u&&(Oe(),P(u,1,1,()=>{u=null}),He()),v[3]?f?(f.p(v,g),g[0]&8&&S(f,1)):(f=qr(v),f.c(),S(f,1),f.m(o.parentNode,o)):f&&(Oe(),P(f,1,1,()=>{f=null}),He()),d&&d.p&&(!i||g[1]&32)&&Gt(d,h,v,v[36],i?Jt(h,v[36],g,null):qt(v[36]),null),b&&b.p&&(!i||g[1]&32)&&Gt(b,_,v,v[36],i?Jt(_,v[36],g,ng):qt(v[36]),Zr)},i(v){i||(S(a,v),S(c),S(u),S(f),S(d,v),S(b,v),i=!0)},o(v){P(a,v),P(c),P(u),P(f),P(d,v),P(b,v),i=!1},d(v){v&&(p(e),p(t),p(n),p(o),p(s)),a&&a.d(v),c&&c.d(v),u&&u.d(v),f&&f.d(v),d&&d.d(v),b&&b.d(v)}}}function fg(l){let e,t;return e=new Sa({props:{class:Ht(["svelte-flow__controls",l[7],l[6]]),position:l[0],"data-testid":"svelte-flow__controls","aria-label":l[4]??"Svelte Flow controls",style:l[5],$$slots:{default:[ug]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&192&&(s.class=Ht(["svelte-flow__controls",n[7],n[6]])),o[0]&1&&(s.position=n[0]),o[0]&16&&(s["aria-label"]=n[4]??"Svelte Flow controls"),o[0]&32&&(s.style=n[5]),o[0]&1806|o[1]&32&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function dg(l,e,t){let n,o,s,i,r,a,c,u,f,h,{$$slots:d={},$$scope:_}=e,{position:b="bottom-left"}=e,{showZoom:v=!0}=e,{showFitView:g=!0}=e,{showLock:w=!0}=e,{buttonBgColor:y=void 0}=e,{buttonBgColorHover:k=void 0}=e,{buttonColor:I=void 0}=e,{buttonColorHover:V=void 0}=e,{buttonBorderColor:T=void 0}=e,{ariaLabel:L=void 0}=e,{style:O=void 0}=e,{orientation:H="vertical"}=e,{fitViewOptions:F=void 0}=e,{class:Y=""}=e;const{zoomIn:G,zoomOut:D,fitView:K,viewport:M,minZoom:W,maxZoom:j,nodesDraggable:Z,nodesConnectable:A,elementsSelectable:X}=jt();ce(l,M,ie=>t(30,a=ie)),ce(l,W,ie=>t(31,c=ie)),ce(l,j,ie=>t(29,r=ie)),ce(l,Z,ie=>t(34,h=ie)),ce(l,A,ie=>t(33,f=ie)),ce(l,X,ie=>t(32,u=ie));const q={bgColor:y,bgColorHover:k,color:I,colorHover:V,borderColor:T},se=()=>{G()},J=()=>{D()},me=()=>{K(F)},_e=()=>{t(8,n=!n),Z.set(n),A.set(n),X.set(n)};return l.$$set=ie=>{"position"in ie&&t(0,b=ie.position),"showZoom"in ie&&t(1,v=ie.showZoom),"showFitView"in ie&&t(2,g=ie.showFitView),"showLock"in ie&&t(3,w=ie.showLock),"buttonBgColor"in ie&&t(22,y=ie.buttonBgColor),"buttonBgColorHover"in ie&&t(23,k=ie.buttonBgColorHover),"buttonColor"in ie&&t(24,I=ie.buttonColor),"buttonColorHover"in ie&&t(25,V=ie.buttonColorHover),"buttonBorderColor"in ie&&t(26,T=ie.buttonBorderColor),"ariaLabel"in ie&&t(4,L=ie.ariaLabel),"style"in ie&&t(5,O=ie.style),"orientation"in ie&&t(27,H=ie.orientation),"fitViewOptions"in ie&&t(28,F=ie.fitViewOptions),"class"in ie&&t(6,Y=ie.class),"$$scope"in ie&&t(36,_=ie.$$scope)},l.$$.update=()=>{l.$$.dirty[1]&14&&t(8,n=h||f||u),l.$$.dirty[0]&1073741824|l.$$.dirty[1]&1&&t(10,o=a.zoom<=c),l.$$.dirty[0]&1610612736&&t(9,s=a.zoom>=r),l.$$.dirty[0]&134217728&&t(7,i=H==="horizontal"?"horizontal":"vertical")},[b,v,g,w,L,O,Y,i,n,s,o,M,W,j,Z,A,X,q,se,J,me,_e,y,k,I,V,T,H,F,r,a,c,u,f,h,d,_]}let hg=class extends Ae{constructor(e){super(),Le(this,e,dg,fg,We,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:22,buttonBgColorHover:23,buttonColor:24,buttonColorHover:25,buttonBorderColor:26,ariaLabel:4,style:5,orientation:27,fitViewOptions:28,class:6},null,[-1,-1])}};var Zn;(function(l){l.Lines="lines",l.Dots="dots",l.Cross="cross"})(Zn||(Zn={}));function mg(l){let e,t;return{c(){e=Ve("circle"),this.h()},l(n){e=ze(n,"circle",{cx:!0,cy:!0,r:!0,class:!0}),C(e).forEach(p),this.h()},h(){m(e,"cx",l[0]),m(e,"cy",l[0]),m(e,"r",l[0]),m(e,"class",t=Ht(["svelte-flow__background-pattern","dots",l[1]]))},m(n,o){B(n,e,o)},p(n,[o]){o&1&&m(e,"cx",n[0]),o&1&&m(e,"cy",n[0]),o&1&&m(e,"r",n[0]),o&2&&t!==(t=Ht(["svelte-flow__background-pattern","dots",n[1]]))&&m(e,"class",t)},i:we,o:we,d(n){n&&p(e)}}}function gg(l,e,t){let{radius:n=5}=e,{class:o=""}=e;return l.$$set=s=>{"radius"in s&&t(0,n=s.radius),"class"in s&&t(1,o=s.class)},[n,o]}class _g extends Ae{constructor(e){super(),Le(this,e,gg,mg,We,{radius:0,class:1})}}function pg(l){let e,t,n;return{c(){e=Ve("path"),this.h()},l(o){e=ze(o,"path",{"stroke-width":!0,d:!0,class:!0}),C(e).forEach(p),this.h()},h(){m(e,"stroke-width",l[0]),m(e,"d",t=`M${l[1][0]/2} 0 V${l[1][1]} M0 ${l[1][1]/2} H${l[1][0]}`),m(e,"class",n=Ht(["svelte-flow__background-pattern",l[2],l[3]]))},m(o,s){B(o,e,s)},p(o,[s]){s&1&&m(e,"stroke-width",o[0]),s&2&&t!==(t=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&m(e,"d",t),s&12&&n!==(n=Ht(["svelte-flow__background-pattern",o[2],o[3]]))&&m(e,"class",n)},i:we,o:we,d(o){o&&p(e)}}}function bg(l,e,t){let{lineWidth:n=1}=e,{dimensions:o}=e,{variant:s=void 0}=e,{class:i=""}=e;return l.$$set=r=>{"lineWidth"in r&&t(0,n=r.lineWidth),"dimensions"in r&&t(1,o=r.dimensions),"variant"in r&&t(2,s=r.variant),"class"in r&&t(3,i=r.class)},[n,o,s,i]}class vg extends Ae{constructor(e){super(),Le(this,e,bg,pg,We,{lineWidth:0,dimensions:1,variant:2,class:3})}}function wg(l){let e,t;return e=new vg({props:{dimensions:l[6],variant:l[0],lineWidth:l[1],class:l[4]}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&64&&(s.dimensions=n[6]),o&1&&(s.variant=n[0]),o&2&&(s.lineWidth=n[1]),o&16&&(s.class=n[4]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function yg(l){let e,t;return e=new _g({props:{radius:l[7]/2,class:l[4]}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&128&&(s.radius=n[7]/2),o&16&&(s.class=n[4]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function kg(l){let e,t,n,o,s,i,r,a,c,u,f,h,d;const _=[yg,wg],b=[];function v(g,w){return g[14]?0:1}return n=v(l),o=b[n]=_[n](l),{c(){e=Ve("svg"),t=Ve("pattern"),o.c(),u=Ve("rect"),this.h()},l(g){e=ze(g,"svg",{class:!0,"data-testid":!0});var w=C(e);t=ze(w,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var y=C(t);o.l(y),y.forEach(p),u=ze(w,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),C(u).forEach(p),w.forEach(p),this.h()},h(){m(t,"id",l[11]),m(t,"x",s=l[9].x%l[8][0]),m(t,"y",i=l[9].y%l[8][1]),m(t,"width",r=l[8][0]),m(t,"height",a=l[8][1]),m(t,"patternUnits","userSpaceOnUse"),m(t,"patternTransform",c=`translate(-${l[10][0]},-${l[10][1]})`),m(u,"x","0"),m(u,"y","0"),m(u,"width","100%"),m(u,"height","100%"),m(u,"fill",f=`url(#${l[11]})`),m(e,"class",h=ns(Ht(["svelte-flow__background",l[5]]))+" svelte-1r7pe8d"),m(e,"data-testid","svelte-flow__background"),et(e,"--xy-background-color-props",l[2]),et(e,"--xy-background-pattern-color-props",l[3])},m(g,w){B(g,e,w),E(e,t),b[n].m(t,null),E(e,u),d=!0},p(g,[w]){o.p(g,w),(!d||w&2048)&&m(t,"id",g[11]),(!d||w&768&&s!==(s=g[9].x%g[8][0]))&&m(t,"x",s),(!d||w&768&&i!==(i=g[9].y%g[8][1]))&&m(t,"y",i),(!d||w&256&&r!==(r=g[8][0]))&&m(t,"width",r),(!d||w&256&&a!==(a=g[8][1]))&&m(t,"height",a),(!d||w&1024&&c!==(c=`translate(-${g[10][0]},-${g[10][1]})`))&&m(t,"patternTransform",c),(!d||w&2048&&f!==(f=`url(#${g[11]})`))&&m(u,"fill",f),(!d||w&32&&h!==(h=ns(Ht(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&m(e,"class",h),w&4&&et(e,"--xy-background-color-props",g[2]),w&8&&et(e,"--xy-background-pattern-color-props",g[3])},i(g){d||(S(o),d=!0)},o(g){P(o),d=!1},d(g){g&&p(e),b[n].d()}}}const Eg={[Zn.Dots]:1,[Zn.Lines]:1,[Zn.Cross]:6};function Ig(l,e,t){let n,o,s,i,r,a,c,{id:u=void 0}=e,{variant:f=Zn.Dots}=e,{gap:h=20}=e,{size:d=1}=e,{lineWidth:_=1}=e,{bgColor:b=void 0}=e,{patternColor:v=void 0}=e,{patternClass:g=void 0}=e,{class:w=""}=e;const{viewport:y,flowId:k}=jt();ce(l,y,O=>t(9,a=O)),ce(l,k,O=>t(18,c=O));const I=d||Eg[f],V=f===Zn.Dots,T=f===Zn.Cross,L=Array.isArray(h)?h:[h,h];return l.$$set=O=>{"id"in O&&t(15,u=O.id),"variant"in O&&t(0,f=O.variant),"gap"in O&&t(16,h=O.gap),"size"in O&&t(17,d=O.size),"lineWidth"in O&&t(1,_=O.lineWidth),"bgColor"in O&&t(2,b=O.bgColor),"patternColor"in O&&t(3,v=O.patternColor),"patternClass"in O&&t(4,g=O.patternClass),"class"in O&&t(5,w=O.class)},l.$$.update=()=>{l.$$.dirty&294912&&t(11,n=`background-pattern-${c}-${u||""}`),l.$$.dirty&512&&t(8,o=[L[0]*a.zoom||1,L[1]*a.zoom||1]),l.$$.dirty&512&&t(7,s=I*a.zoom),l.$$.dirty&384&&t(6,i=T?[s,s]:o),l.$$.dirty&192&&t(10,r=V?[s/2,s/2]:[i[0]/2,i[1]/2])},[f,_,b,v,g,w,i,s,o,a,r,n,y,k,V,u,h,d,c]}class Sg extends Ae{constructor(e){super(),Le(this,e,Ig,kg,We,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}const Jr=l=>Zd(l);function Cg(){const{zoomIn:l,zoomOut:e,fitView:t,onbeforedelete:n,snapGrid:o,viewport:s,width:i,height:r,minZoom:a,maxZoom:c,panZoom:u,nodes:f,edges:h,domNode:d,nodeLookup:_,nodeOrigin:b,edgeLookup:v,connectionLookup:g}=jt(),w=I=>{var H,F;const V=de(_),T=Jr(I)?I:V.get(I.id),L=T.parentId?Jd(T.position,T.measured,T.parentId,V,de(b)):T.position,O={id:T.id,position:L,width:((H=T.measured)==null?void 0:H.width)??T.width,height:((F=T.measured)==null?void 0:F.height)??T.height,data:T.data};return Il(O)},y=(I,V,T={replace:!1})=>{var H;const L=(H=de(_).get(I))==null?void 0:H.internals.userNode;if(!L)return;const O=typeof V=="function"?V(L):V;T.replace?f.update(F=>F.map(Y=>Y.id===I?Jr(O)?O:{...Y,...O}:Y)):(Object.assign(L,O),f.update(F=>F))},k=I=>de(_).get(I);return{zoomIn:l,zoomOut:e,getInternalNode:k,getNode:I=>{var V;return(V=k(I))==null?void 0:V.internals.userNode},getNodes:I=>I===void 0?de(f):Qr(de(_),I),getEdge:I=>de(v).get(I),getEdges:I=>I===void 0?de(h):Qr(de(v),I),setZoom:(I,V)=>{const T=de(u);return T?T.scaleTo(I,{duration:V==null?void 0:V.duration}):Promise.resolve(!1)},getZoom:()=>de(s).zoom,setViewport:async(I,V)=>{const T=de(s),L=de(u);return L?(await L.setViewport({x:I.x??T.x,y:I.y??T.y,zoom:I.zoom??T.zoom},{duration:V==null?void 0:V.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>de(s),setCenter:async(I,V,T)=>{const L=typeof(T==null?void 0:T.zoom)<"u"?T.zoom:de(c),O=de(u);return O?(await O.setViewport({x:de(i)/2-I*L,y:de(r)/2-V*L,zoom:L},{duration:T==null?void 0:T.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:t,fitBounds:async(I,V)=>{const T=de(u);if(!T)return Promise.resolve(!1);const L=$o(I,de(i),de(r),de(a),de(c),(V==null?void 0:V.padding)??.1);return await T.setViewport(L,{duration:V==null?void 0:V.duration}),Promise.resolve(!0)},getIntersectingNodes:(I,V=!0,T)=>{const L=hr(I),O=L?I:w(I);return O?(T||de(f)).filter(H=>{const F=de(_).get(H.id);if(!F||!L&&H.id===I.id)return!1;const Y=Il(F),G=Ol(Y,O);return V&&G>0||G>=O.width*O.height}):[]},isNodeIntersecting:(I,V,T=!0)=>{const O=hr(I)?I:w(I);if(!O)return!1;const H=Ol(O,V);return T&&H>0||H>=O.width*O.height},deleteElements:async({nodes:I=[],edges:V=[]})=>{const{nodes:T,edges:L}=await Gi({nodesToRemove:I,edgesToRemove:V,nodes:de(f),edges:de(h),onBeforeDelete:de(n)});return T&&f.update(O=>O.filter(H=>!T.some(({id:F})=>F===H.id))),L&&h.update(O=>O.filter(H=>!L.some(({id:F})=>F===H.id))),{deletedNodes:T,deletedEdges:L}},screenToFlowPosition:(I,V={snapToGrid:!0})=>{const T=de(d);if(!T)return I;const L=V.snapToGrid?de(o):!1,{x:O,y:H,zoom:F}=de(s),{x:Y,y:G}=T.getBoundingClientRect(),D={x:I.x-Y,y:I.y-G};return Wl(D,[O,H,F],L!==null,L||[1,1])},flowToScreenPosition:I=>{const V=de(d);if(!V)return I;const{x:T,y:L,zoom:O}=de(s),{x:H,y:F}=V.getBoundingClientRect(),Y=Qi(I,[T,L,O]);return{x:Y.x+H,y:Y.y+F}},toObject:()=>({nodes:de(f).map(I=>({...I,position:{...I.position},data:{...I.data}})),edges:de(h).map(I=>({...I})),viewport:{...de(s)}}),updateNode:y,updateNodeData:(I,V,T)=>{var H;const L=(H=de(_).get(I))==null?void 0:H.internals.userNode;if(!L)return;const O=typeof V=="function"?V(L):V;L.data=T!=null&&T.replace?O:{...L.data,...O},f.update(F=>F)},getNodesBounds:I=>{const V=de(_),T=de(b);return Xd(I,{nodeLookup:V,nodeOrigin:T})},getHandleConnections:({type:I,id:V,nodeId:T})=>{var L;return Array.from(((L=de(g).get(`${T}-${I}-${V??null}`))==null?void 0:L.values())??[])},viewport:s}}function Qr(l,e){var n;const t=[];for(const o of e){const s=l.get(o);if(s){const i="internals"in s?(n=s.internals)==null?void 0:n.userNode:s;t.push(i)}}return t}function Dg(){const{nodesInitialized:l}=jt();return{subscribe:l.subscribe}}function xr(l,e,t){const n=l.slice();return n[25]=e[t],n[27]=t,n}function $r(l,e,t){const n=l.slice();return n[22]=e[t],n[24]=t,n}function Mg(l){let e,t;return e=new Go({props:{className:"size-4"}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p:we,i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Tg(l){let e,t,n,o,s,i,r,a=l[8].t("Tools")+"",c,u,f=l[8].t("Functions")+"",h,d,_,b,v,g,w,y;function k(L,O){if(L[1]==="tools")return zg;if(L[1]==="functions")return Vg}let I=k(l),V=I&&I(l),T=l[2]&&ni(l);return{c(){e=z("form"),t=z("div"),n=z("div"),o=z("div"),s=z("div"),i=z("select"),r=z("option"),c=Ce(a),u=z("option"),h=Ce(f),d=x(),_=z("div"),b=z("select"),V&&V.c(),v=x(),T&&T.c(),this.h()},l(L){e=N(L,"FORM",{class:!0});var O=C(e);t=N(O,"DIV",{class:!0});var H=C(t);n=N(H,"DIV",{class:!0});var F=C(n);o=N(F,"DIV",{class:!0});var Y=C(o);s=N(Y,"DIV",{class:!0});var G=C(s);i=N(G,"SELECT",{class:!0,placeholder:!0});var D=C(i);r=N(D,"OPTION",{class:!0});var K=C(r);c=De(K,a),K.forEach(p),u=N(D,"OPTION",{class:!0});var M=C(u);h=De(M,f),M.forEach(p),D.forEach(p),G.forEach(p),d=$(Y),_=N(Y,"DIV",{class:!0});var W=C(_);b=N(W,"SELECT",{class:!0});var j=C(b);V&&V.l(j),j.forEach(p),W.forEach(p),Y.forEach(p),F.forEach(p),v=$(H),T&&T.l(H),H.forEach(p),O.forEach(p),this.h()},h(){r.__value="tools",In(r,r.__value),m(r,"class","bg-gray-100 dark:bg-gray-800"),u.__value="functions",In(u,u.__value),m(u,"class","bg-gray-100 dark:bg-gray-800"),m(i,"class","w-full rounded text-xs py-2 px-1 bg-transparent outline-none"),m(i,"placeholder","Select"),l[1]===void 0&&Qn(()=>l[13].call(i)),m(s,"class","flex-1"),m(b,"class","w-full rounded py-2 px-1 text-xs bg-transparent outline-none"),l[2]===void 0&&Qn(()=>l[14].call(b)),m(_,"class","flex-1"),m(o,"class","flex gap-2"),m(n,"class","space-y-1"),m(t,"class","flex flex-col"),m(e,"class","flex flex-col h-full justify-between space-y-3 text-sm")},m(L,O){B(L,e,O),E(e,t),E(t,n),E(n,o),E(o,s),E(s,i),E(i,r),E(r,c),E(i,u),E(u,h),Zl(i,l[1],!0),E(o,d),E(o,_),E(_,b),V&&V.m(b,null),Zl(b,l[2],!0),E(t,v),T&&T.m(t,null),g=!0,w||(y=[ke(i,"change",l[13]),ke(b,"change",l[14]),ke(b,"change",l[15]),ke(e,"submit",Vi(l[18]))],w=!0)},p(L,O){(!g||O&256)&&a!==(a=L[8].t("Tools")+"")&&Ne(c,a),(!g||O&256)&&f!==(f=L[8].t("Functions")+"")&&Ne(h,f),O&2&&Zl(i,L[1]),I===(I=k(L))&&V?V.p(L,O):(V&&V.d(1),V=I&&I(L),V&&(V.c(),V.m(b,null))),O&196&&Zl(b,L[2]),L[2]?T?(T.p(L,O),O&4&&S(T,1)):(T=ni(L),T.c(),S(T,1),T.m(t,null)):T&&(Oe(),P(T,1,1,()=>{T=null}),He())},i(L){g||(S(T),g=!0)},o(L){P(T),g=!1},d(L){L&&p(e),V&&V.d(),T&&T.d(),w=!1,en(y)}}}function Vg(l){let e,t=l[8].t("Select a function")+"",n,o,s=wt(l[7]),i=[];for(let r=0;r<s.length;r+=1)i[r]=ei(xr(l,s,r));return{c(){e=z("option"),n=Ce(t);for(let r=0;r<i.length;r+=1)i[r].c();o=Ue(),this.h()},l(r){e=N(r,"OPTION",{class:!0});var a=C(e);n=De(a,t),a.forEach(p);for(let c=0;c<i.length;c+=1)i[c].l(r);o=Ue(),this.h()},h(){e.__value="",In(e,e.__value),e.selected=!0,e.disabled=!0,m(e,"class","bg-gray-100 dark:bg-gray-800")},m(r,a){B(r,e,a),E(e,n);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,a);B(r,o,a)},p(r,a){if(a&256&&t!==(t=r[8].t("Select a function")+"")&&Ne(n,t),a&128){s=wt(r[7]);let c;for(c=0;c<s.length;c+=1){const u=xr(r,s,c);i[c]?i[c].p(u,a):(i[c]=ei(u),i[c].c(),i[c].m(o.parentNode,o))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}},d(r){r&&(p(e),p(o)),Sn(i,r)}}}function zg(l){let e,t=l[8].t("Select a tool")+"",n,o,s=wt(l[6]),i=[];for(let r=0;r<s.length;r+=1)i[r]=ti($r(l,s,r));return{c(){e=z("option"),n=Ce(t);for(let r=0;r<i.length;r+=1)i[r].c();o=Ue(),this.h()},l(r){e=N(r,"OPTION",{class:!0});var a=C(e);n=De(a,t),a.forEach(p);for(let c=0;c<i.length;c+=1)i[c].l(r);o=Ue(),this.h()},h(){e.__value="",In(e,e.__value),e.selected=!0,e.disabled=!0,m(e,"class","bg-gray-100 dark:bg-gray-800")},m(r,a){B(r,e,a),E(e,n);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,a);B(r,o,a)},p(r,a){if(a&256&&t!==(t=r[8].t("Select a tool")+"")&&Ne(n,t),a&64){s=wt(r[6]);let c;for(c=0;c<s.length;c+=1){const u=$r(r,s,c);i[c]?i[c].p(u,a):(i[c]=ti(u),i[c].c(),i[c].m(o.parentNode,o))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}},d(r){r&&(p(e),p(o)),Sn(i,r)}}}function ei(l){let e,t=l[25].name+"",n,o;return{c(){e=z("option"),n=Ce(t),this.h()},l(s){e=N(s,"OPTION",{class:!0});var i=C(e);n=De(i,t),i.forEach(p),this.h()},h(){e.__value=o=l[25].id,In(e,e.__value),m(e,"class","bg-gray-100 dark:bg-gray-800")},m(s,i){B(s,e,i),E(e,n)},p(s,i){i&128&&t!==(t=s[25].name+"")&&Ne(n,t),i&128&&o!==(o=s[25].id)&&(e.__value=o,In(e,e.__value))},d(s){s&&p(e)}}}function ti(l){let e,t=l[22].name+"",n,o;return{c(){e=z("option"),n=Ce(t),this.h()},l(s){e=N(s,"OPTION",{class:!0});var i=C(e);n=De(i,t),i.forEach(p),this.h()},h(){e.__value=o=l[22].id,In(e,e.__value),m(e,"class","bg-gray-100 dark:bg-gray-800")},m(s,i){B(s,e,i),E(e,n)},p(s,i){i&64&&t!==(t=s[22].name+"")&&Ne(n,t),i&64&&o!==(o=s[22].id)&&(e.__value=o,In(e,e.__value))},d(s){s&&p(e)}}}function ni(l){let e,t,n,o,s,i;const r=[Pg,Ng],a=[];function c(u,f){return u[3]?1:0}return o=c(l),s=a[o]=r[o](l),{c(){e=z("hr"),t=x(),n=z("div"),s.c(),this.h()},l(u){e=N(u,"HR",{class:!0}),t=$(u),n=N(u,"DIV",{class:!0});var f=C(n);s.l(f),f.forEach(p),this.h()},h(){m(e,"class","dark:border-gray-800 my-1 w-full"),m(n,"class","my-2 text-xs")},m(u,f){B(u,e,f),B(u,t,f),B(u,n,f),a[o].m(n,null),i=!0},p(u,f){let h=o;o=c(u),o===h?a[o].p(u,f):(Oe(),P(a[h],1,1,()=>{a[h]=null}),He(),s=a[o],s?s.p(u,f):(s=a[o]=r[o](u),s.c()),S(s,1),s.m(n,null))},i(u){i||(S(s),i=!0)},o(u){P(s),i=!1},d(u){u&&(p(e),p(t),p(n)),a[o].d()}}}function Ng(l){let e,t;return e=new Go({props:{className:"size-5"}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p:we,i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Pg(l){let e,t,n;function o(i){l[16](i)}let s={valvesSpec:l[4]};return l[5]!==void 0&&(s.valves=l[5]),e=new nu({props:s}),je.push(()=>qe(e,"valves",o)),e.$on("change",l[17]),{c(){ee(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){te(e,i,r),n=!0},p(i,r){const a={};r&16&&(a.valvesSpec=i[4]),!t&&r&32&&(t=!0,a.valves=i[5],Ge(()=>t=!1)),e.$set(a)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){P(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Og(l){let e,t,n,o;const s=[Tg,Mg],i=[];function r(a,c){return a[0]&&!a[3]?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ue()},l(a){t.l(a),n=Ue()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,[c]){let u=e;e=r(a),e===u?i[e].p(a,c):(Oe(),P(i[u],1,1,()=>{i[u]=null}),He(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){P(t),o=!1},d(a){a&&p(n),i[e].d(a)}}}function Hg(l,e,t){let n,o,s;ce(l,il,O=>t(6,n=O)),ce(l,rs,O=>t(7,o=O));const i=tn(),r=Lt("i18n");ce(l,r,O=>t(8,s=O));let{show:a=!1}=e,c="tools",u="",f=!1,h=null,d={},_;const b=async()=>{_&&clearTimeout(_),_=setTimeout(()=>{g()},500)},v=async()=>{var O;if(t(3,f=!0),c==="tools"?(t(5,d=await Sc(localStorage.token,u)),t(4,h=await Cc(localStorage.token,u))):c==="functions"&&(t(5,d=await $c(localStorage.token,u)),t(4,h=await eu(localStorage.token,u))),h)for(const H in h.properties)((O=h.properties[H])==null?void 0:O.type)==="array"&&t(5,d[H]=(d[H]??[]).join(","),d);t(3,f=!1)},g=async()=>{var O;if(h){for(const H in h.properties)((O=h.properties[H])==null?void 0:O.type)==="array"&&t(5,d[H]=(d[H]??"").split(",").map(F=>F.trim()),d);if(c==="tools"){const H=await Dc(localStorage.token,u,d).catch(F=>(nt.error(`${F}`),null));H&&(nt.success(s.t("Valves updated")),t(5,d=H))}else if(c==="functions"){const H=await tu(localStorage.token,u,d).catch(F=>(nt.error(`${F}`),null));H&&(nt.success(s.t("Valves updated")),t(5,d=H))}}},w=async()=>{t(3,f=!0),o===null&&rs.set(await xc(localStorage.token)),n===null&&il.set(await Xo(localStorage.token)),t(3,f=!1)};function y(){c=ls(this),t(1,c)}function k(){u=ls(this),t(2,u),t(1,c)}const I=async()=>{await Qe()};function V(O){d=O,t(5,d)}const T=()=>{b()},L=()=>{g(),i("save")};return l.$$set=O=>{"show"in O&&t(0,a=O.show)},l.$$.update=()=>{l.$$.dirty&2&&c&&t(2,u=""),l.$$.dirty&4&&u&&v(),l.$$.dirty&1&&a&&w()},[a,c,u,f,h,d,n,o,s,i,r,b,g,y,k,I,V,T,L]}class Bg extends Ae{constructor(e){super(),Le(this,e,Hg,Og,We,{show:0})}}function li(l,e,t){const n=l.slice();return n[14]=e[t],n[16]=t,n}function Ag(l){let e,t=l[3].t("You do not have permission to access this feature.")+"",n;return{c(){e=z("div"),n=Ce(t),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);n=De(s,t),s.forEach(p),this.h()},h(){m(e,"class","text-sm dark:text-gray-300 text-center py-2 px-10")},m(o,s){B(o,e,s),E(e,n)},p(o,s){s&8&&t!==(t=o[3].t("You do not have permission to access this feature.")+"")&&Ne(n,t)},i:we,o:we,d(o){o&&p(e)}}}function Lg(l){let e,t,n,o,s,i,r,a,c,u,f,h,d,_=l[0].length>0&&oi(l);function b(g){l[11](g)}let v={title:l[3].t("Valves"),buttonClassName:"w-full",$$slots:{content:[Ug]},$$scope:{ctx:l}};return l[2]!==void 0&&(v.open=l[2]),n=new eo({props:v}),je.push(()=>qe(n,"open",b)),a=new eo({props:{title:l[3].t("System Prompt"),open:!0,buttonClassName:"w-full",$$slots:{content:[Wg]},$$scope:{ctx:l}}}),h=new eo({props:{title:l[3].t("Advanced Params"),open:!0,buttonClassName:"w-full",$$slots:{content:[jg]},$$scope:{ctx:l}}}),{c(){e=z("div"),_&&_.c(),t=x(),ee(n.$$.fragment),s=x(),i=z("hr"),r=x(),ee(a.$$.fragment),c=x(),u=z("hr"),f=x(),ee(h.$$.fragment),this.h()},l(g){e=N(g,"DIV",{class:!0});var w=C(e);_&&_.l(w),t=$(w),oe(n.$$.fragment,w),s=$(w),i=N(w,"HR",{class:!0}),r=$(w),oe(a.$$.fragment,w),c=$(w),u=N(w,"HR",{class:!0}),f=$(w),oe(h.$$.fragment,w),w.forEach(p),this.h()},h(){m(i,"class","my-2 border-gray-50 dark:border-gray-700/10"),m(u,"class","my-2 border-gray-50 dark:border-gray-700/10"),m(e,"class","dark:text-gray-200 text-sm font-primary py-0.5 px-0.5")},m(g,w){B(g,e,w),_&&_.m(e,null),E(e,t),te(n,e,null),E(e,s),E(e,i),E(e,r),te(a,e,null),E(e,c),E(e,u),E(e,f),te(h,e,null),d=!0},p(g,w){g[0].length>0?_?(_.p(g,w),w&1&&S(_,1)):(_=oi(g),_.c(),S(_,1),_.m(e,t)):_&&(Oe(),P(_,1,1,()=>{_=null}),He());const y={};w&8&&(y.title=g[3].t("Valves")),w&131076&&(y.$$scope={dirty:w,ctx:g}),!o&&w&4&&(o=!0,y.open=g[2],Ge(()=>o=!1)),n.$set(y);const k={};w&8&&(k.title=g[3].t("System Prompt")),w&131082&&(k.$$scope={dirty:w,ctx:g}),a.$set(k);const I={};w&8&&(I.title=g[3].t("Advanced Params")),w&131090&&(I.$$scope={dirty:w,ctx:g}),h.$set(I)},i(g){d||(S(_),S(n.$$.fragment,g),S(a.$$.fragment,g),S(h.$$.fragment,g),d=!0)},o(g){P(_),P(n.$$.fragment,g),P(a.$$.fragment,g),P(h.$$.fragment,g),d=!1},d(g){g&&p(e),_&&_.d(),ne(n),ne(a),ne(h)}}}function oi(l){let e,t,n,o;return e=new eo({props:{title:l[3].t("Files"),open:!0,buttonClassName:"w-full",$$slots:{content:[Rg]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment),t=x(),n=z("hr"),this.h()},l(s){oe(e.$$.fragment,s),t=$(s),n=N(s,"HR",{class:!0}),this.h()},h(){m(n,"class","my-2 border-gray-50 dark:border-gray-700/10")},m(s,i){te(e,s,i),B(s,t,i),B(s,n,i),o=!0},p(s,i){const r={};i&8&&(r.title=s[3].t("Files")),i&131073&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){o||(S(e.$$.fragment,s),o=!0)},o(s){P(e.$$.fragment,s),o=!1},d(s){s&&(p(t),p(n)),ne(e,s)}}}function si(l){var s,i;let e,t;function n(){return l[9](l[16])}function o(){return l[10](l[14])}return e=new Ri({props:{className:"w-full",item:l[14],edit:!0,url:(s=l[14])!=null&&s.url?l[14].url:null,name:l[14].name,type:l[14].type,size:(i=l[14])==null?void 0:i.size,dismissible:!0}}),e.$on("dismiss",n),e.$on("click",o),{c(){ee(e.$$.fragment)},l(r){oe(e.$$.fragment,r)},m(r,a){te(e,r,a),t=!0},p(r,a){var u,f;l=r;const c={};a&1&&(c.item=l[14]),a&1&&(c.url=(u=l[14])!=null&&u.url?l[14].url:null),a&1&&(c.name=l[14].name),a&1&&(c.type=l[14].type),a&1&&(c.size=(f=l[14])==null?void 0:f.size),e.$set(c)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){ne(e,r)}}}function Rg(l){let e,t,n=wt(l[0]),o=[];for(let i=0;i<n.length;i+=1)o[i]=si(li(l,n,i));const s=i=>P(o[i],1,1,()=>{o[i]=null});return{c(){e=z("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=N(i,"DIV",{class:!0,slot:!0});var r=C(e);for(let a=0;a<o.length;a+=1)o[a].l(r);r.forEach(p),this.h()},h(){m(e,"class","flex flex-col gap-1 mt-1.5"),m(e,"slot","content")},m(i,r){B(i,e,r);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);t=!0},p(i,r){if(r&1){n=wt(i[0]);let a;for(a=0;a<n.length;a+=1){const c=li(i,n,a);o[a]?(o[a].p(c,r),S(o[a],1)):(o[a]=si(c),o[a].c(),S(o[a],1),o[a].m(e,null))}for(Oe(),a=n.length;a<o.length;a+=1)s(a);He()}},i(i){if(!t){for(let r=0;r<n.length;r+=1)S(o[r]);t=!0}},o(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)P(o[r]);t=!1},d(i){i&&p(e),Sn(o,i)}}}function Ug(l){let e,t,n;return t=new Bg({props:{show:l[2]}}),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(o){e=N(o,"DIV",{class:!0,slot:!0});var s=C(e);oe(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","text-sm"),m(e,"slot","content")},m(o,s){B(o,e,s),te(t,e,null),n=!0},p(o,s){const i={};s&4&&(i.show=o[2]),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){o&&p(e),ne(t)}}}function Wg(l){let e,t,n,o,s;return{c(){e=z("div"),t=z("textarea"),this.h()},l(i){e=N(i,"DIV",{class:!0,slot:!0});var r=C(e);t=N(r,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),C(t).forEach(p),r.forEach(p),this.h()},h(){m(t,"class","w-full text-xs py-1.5 bg-transparent outline-none resize-none"),m(t,"rows","4"),m(t,"placeholder",n=l[3].t("Enter system prompt")),m(e,"class",""),m(e,"slot","content")},m(i,r){B(i,e,r),E(e,t),In(t,l[1].system),o||(s=ke(t,"input",l[12]),o=!0)},p(i,r){r&8&&n!==(n=i[3].t("Enter system prompt"))&&m(t,"placeholder",n),r&2&&In(t,i[1].system)},d(i){i&&p(e),o=!1,s()}}}function jg(l){var a;let e,t,n,o,s;function i(c){l[13](c)}let r={admin:((a=l[4])==null?void 0:a.role)==="admin"};return l[1]!==void 0&&(r.params=l[1]),n=new Qc({props:r}),je.push(()=>qe(n,"params",i)),{c(){e=z("div"),t=z("div"),ee(n.$$.fragment),this.h()},l(c){e=N(c,"DIV",{class:!0,slot:!0});var u=C(e);t=N(u,"DIV",{});var f=C(t);oe(n.$$.fragment,f),f.forEach(p),u.forEach(p),this.h()},h(){m(e,"class","text-sm mt-1.5"),m(e,"slot","content")},m(c,u){B(c,e,u),E(e,t),te(n,t,null),s=!0},p(c,u){var h;const f={};u&16&&(f.admin=((h=c[4])==null?void 0:h.role)==="admin"),!o&&u&2&&(o=!0,f.params=c[1],Ge(()=>o=!1)),n.$set(f)},i(c){s||(S(n.$$.fragment,c),s=!0)},o(c){P(n.$$.fragment,c),s=!1},d(c){c&&p(e),ne(n)}}}function Fg(l){let e,t,n,o=l[3].t("Chat Controls")+"",s,i,r,a,c,u,f,h,d,_;a=new bo({props:{className:"size-3.5"}});const b=[Lg,Ag],v=[];function g(w,y){var k,I;return w[4].role==="admin"||(I=(k=w[4])==null?void 0:k.permissions.chat)!=null&&I.controls?0:1}return u=g(l),f=v[u]=b[u](l),{c(){e=z("div"),t=z("div"),n=z("div"),s=Ce(o),i=x(),r=z("button"),ee(a.$$.fragment),c=x(),f.c(),this.h()},l(w){e=N(w,"DIV",{class:!0});var y=C(e);t=N(y,"DIV",{class:!0});var k=C(t);n=N(k,"DIV",{class:!0});var I=C(n);s=De(I,o),I.forEach(p),i=$(k),r=N(k,"BUTTON",{class:!0});var V=C(r);oe(a.$$.fragment,V),V.forEach(p),k.forEach(p),c=$(y),f.l(y),y.forEach(p),this.h()},h(){m(n,"class","text-lg font-medium self-center font-primary"),m(r,"class","self-center"),m(t,"class","flex items-center justify-between dark:text-gray-100 mb-2"),m(e,"class","dark:text-white")},m(w,y){B(w,e,y),E(e,t),E(t,n),E(n,s),E(t,i),E(t,r),te(a,r,null),E(e,c),v[u].m(e,null),h=!0,d||(_=ke(r,"click",l[8]),d=!0)},p(w,[y]){(!h||y&8)&&o!==(o=w[3].t("Chat Controls")+"")&&Ne(s,o);let k=u;u=g(w),u===k?v[u].p(w,y):(Oe(),P(v[k],1,1,()=>{v[k]=null}),He(),f=v[u],f?f.p(w,y):(f=v[u]=b[u](w),f.c()),S(f,1),f.m(e,null))},i(w){h||(S(a.$$.fragment,w),S(f),h=!0)},o(w){P(a.$$.fragment,w),P(f),h=!1},d(w){w&&p(e),ne(a),v[u].d(),d=!1,_()}}}function Yg(l,e,t){let n,o;ce(l,Kn,g=>t(4,o=g));const s=tn(),i=Lt("i18n");ce(l,i,g=>t(3,n=g));let{models:r=[]}=e,{chatFiles:a=[]}=e,{params:c={}}=e,u=!1;const f=()=>{s("close")},h=g=>{a.splice(g,1),t(0,a)},d=g=>{console.log(g)};function _(g){u=g,t(2,u)}function b(){c.system=this.value,t(1,c)}function v(g){c=g,t(1,c)}return l.$$set=g=>{"models"in g&&t(7,r=g.models),"chatFiles"in g&&t(0,a=g.chatFiles),"params"in g&&t(1,c=g.params)},[a,c,u,n,o,s,i,r,f,h,d,_,b,v]}class Ca extends Ae{constructor(e){super(),Le(this,e,Yg,Fg,We,{models:7,chatFiles:0,params:1})}}function ri(l,e,t){const n=l.slice();return n[10]=e[t],n}function Zg(l){let e;const t=l[4].default,n=Kt(t,l,l[8],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&256)&&Gt(n,t,o,o[8],e?Jt(t,o[8],s,null):qt(o[8]),null)},i(o){e||(S(n,o),e=!0)},o(o){P(n,o),e=!1},d(o){n&&n.d(o)}}}function Xg(l){var i;let e,t,n=(((i=l[10])==null?void 0:i.label)??"Camera")+"",o,s;return{c(){e=z("div"),t=z("div"),o=Ce(n),s=x(),this.h()},l(r){e=N(r,"DIV",{class:!0});var a=C(e);t=N(a,"DIV",{class:!0});var c=C(t);o=De(c,n),c.forEach(p),a.forEach(p),s=$(r),this.h()},h(){m(t,"class","line-clamp-1"),m(e,"class","flex items-center")},m(r,a){B(r,e,a),E(e,t),E(t,o),B(r,s,a)},p(r,a){var c;a&2&&n!==(n=(((c=r[10])==null?void 0:c.label)??"Camera")+"")&&Ne(o,n)},d(r){r&&(p(e),p(s))}}}function ii(l){let e,t;function n(){return l[5](l[10])}return e=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Xg]},$$scope:{ctx:l}}}),e.$on("click",n),{c(){ee(e.$$.fragment)},l(o){oe(e.$$.fragment,o)},m(o,s){te(e,o,s),t=!0},p(o,s){l=o;const i={};s&258&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(o){t||(S(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){ne(e,o)}}}function Kg(l){let e,t,n=wt(l[1]),o=[];for(let i=0;i<n.length;i+=1)o[i]=ii(ri(l,n,i));const s=i=>P(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Ue()},l(i){for(let r=0;r<o.length;r+=1)o[r].l(i);e=Ue()},m(i,r){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,r);B(i,e,r),t=!0},p(i,r){if(r&10){n=wt(i[1]);let a;for(a=0;a<n.length;a+=1){const c=ri(i,n,a);o[a]?(o[a].p(c,r),S(o[a],1)):(o[a]=ii(c),o[a].c(),S(o[a],1),o[a].m(e.parentNode,e))}for(Oe(),a=n.length;a<o.length;a+=1)s(a);He()}},i(i){if(!t){for(let r=0;r<n.length;r+=1)S(o[r]);t=!0}},o(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)P(o[r]);t=!1},d(i){i&&p(e),Sn(o,i)}}}function Gg(l){let e,t,n;return t=new po({props:{class:"w-full max-w-[180px] rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-[9999] bg-white dark:bg-gray-900 dark:text-white shadow-sm",sideOffset:6,side:"top",align:"start",transition:Rl,$$slots:{default:[Kg]},$$scope:{ctx:l}}}),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(o){e=N(o,"DIV",{slot:!0});var s=C(e);oe(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"slot","content")},m(o,s){B(o,e,s),te(t,e,null),n=!0},p(o,s){const i={};s&258&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){o&&p(e),ne(t)}}}function qg(l){let e,t,n;function o(i){l[6](i)}let s={$$slots:{content:[Gg],default:[Zg]},$$scope:{ctx:l}};return l[2]!==void 0&&(s.show=l[2]),e=new _o({props:s}),je.push(()=>qe(e,"show",o)),e.$on("change",l[7]),{c(){ee(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){te(e,i,r),n=!0},p(i,[r]){const a={};r&258&&(a.$$scope={dirty:r,ctx:i}),!t&&r&4&&(t=!0,a.show=i[2],Ge(()=>t=!1)),e.$set(a)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){P(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Jg(l,e,t){let{$$slots:n={},$$scope:o}=e;Lt("i18n");const s=tn();let{onClose:i=()=>{}}=e,{devices:r}=e,a=!1;const c=h=>{s("change",h.deviceId)};function u(h){a=h,t(2,a)}const f=h=>{h.detail===!1&&i()};return l.$$set=h=>{"onClose"in h&&t(0,i=h.onClose),"devices"in h&&t(1,r=h.devices),"$$scope"in h&&t(8,o=h.$$scope)},[i,r,a,s,n,c,u,f,o]}class Qg extends Ae{constructor(e){super(),Le(this,e,Jg,qg,We,{onClose:0,devices:1})}}function ai(l){let e,t,n,o,s,i,r,a,c,u,f,h,d,_,b,v='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"></path></svg>',g,w,y,k=l[4]&&ci(l);function I(D,K){return D[4]?t0:n0}let V=I(l),T=V(l);const L=[i0,r0],O=[];function H(D,K){return D[4]?0:1}r=H(l),a=O[r]=L[r](l);function F(D,K){return D[1]?d0:D[2]?f0:u0}let Y=F(l),G=Y(l);return{c(){e=z("div"),k&&k.c(),t=x(),n=z("div"),T.c(),o=x(),s=z("div"),i=z("div"),a.c(),c=x(),u=z("div"),f=z("button"),h=z("div"),G.c(),d=x(),_=z("div"),b=z("button"),b.innerHTML=v,this.h()},l(D){e=N(D,"DIV",{class:!0});var K=C(e);k&&k.l(K),t=$(K),n=N(K,"DIV",{class:!0});var M=C(n);T.l(M),M.forEach(p),o=$(K),s=N(K,"DIV",{class:!0});var W=C(s);i=N(W,"DIV",{});var j=C(i);a.l(j),j.forEach(p),c=$(W),u=N(W,"DIV",{});var Z=C(u);f=N(Z,"BUTTON",{type:!0});var A=C(f);h=N(A,"DIV",{class:!0});var X=C(h);G.l(X),X.forEach(p),A.forEach(p),Z.forEach(p),d=$(W),_=N(W,"DIV",{});var q=C(_);b=N(q,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ft(b)!=="svelte-1k5eavb"&&(b.innerHTML=v),q.forEach(p),W.forEach(p),K.forEach(p),this.h()},h(){m(n,"class","flex justify-center items-center flex-1 h-full w-full max-h-full"),m(h,"class","line-clamp-1 text-sm font-medium"),m(f,"type","button"),m(b,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),m(b,"type","button"),m(s,"class","flex justify-between items-center pb-2 w-full"),m(e,"class","max-w-lg w-full h-full max-h-[100dvh] flex flex-col justify-between p-3 md:p-6")},m(D,K){B(D,e,K),k&&k.m(e,null),E(e,t),E(e,n),T.m(n,null),E(e,o),E(e,s),E(s,i),O[r].m(i,null),E(s,c),E(s,u),E(u,f),E(f,h),G.m(h,null),E(s,d),E(s,_),E(_,b),g=!0,w||(y=[ke(f,"click",l[31]),ke(b,"click",l[32])],w=!0)},p(D,K){D[4]?k?k.p(D,K):(k=ci(D),k.c(),k.m(e,t)):k&&(k.d(1),k=null),V===(V=I(D))&&T?T.p(D,K):(T.d(1),T=V(D),T&&(T.c(),T.m(n,null)));let M=r;r=H(D),r===M?O[r].p(D,K):(Oe(),P(O[M],1,1,()=>{O[M]=null}),He(),a=O[r],a?a.p(D,K):(a=O[r]=L[r](D),a.c()),S(a,1),a.m(i,null)),Y===(Y=F(D))&&G?G.p(D,K):(G.d(1),G=Y(D),G&&(G.c(),G.m(h,null)))},i(D){g||(S(a),g=!0)},o(D){P(a),g=!1},d(D){D&&p(e),k&&k.d(),T.d(),O[r].d(),G.d(),w=!1,en(y)}}}function ci(l){let e,t,n;function o(r,a){return r[3]?e0:r[1]||r[2]?$g:xg}let s=o(l),i=s(l);return{c(){e=z("button"),i.c(),this.h()},l(r){e=N(r,"BUTTON",{type:!0,class:!0});var a=C(e);i.l(a),a.forEach(p),this.h()},h(){m(e,"type","button"),m(e,"class","flex justify-center items-center w-full h-20 min-h-20")},m(r,a){B(r,e,a),i.m(e,null),t||(n=ke(e,"click",l[26]),t=!0)},p(r,a){s===(s=o(r))&&i?i.p(r,a):(i.d(1),i=s(r),i&&(i.c(),i.m(e,null)))},d(r){r&&p(e),i.d(),t=!1,n()}}}function xg(l){let e,t,n;return{c(){e=z("div"),this.h()},l(o){e=N(o,"DIV",{class:!0,style:!0}),C(e).forEach(p),this.h()},h(){var o,s,i,r,a,c,u,f,h;m(e,"class",t=(l[6]*100>4?" size-[4.5rem]":l[6]*100>2?" size-16":l[6]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((i=(s=(o=l[0])==null?void 0:o.info)==null?void 0:s.meta)==null?void 0:i.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white"),m(e,"style",n=(((c=(a=(r=l[0])==null?void 0:r.info)==null?void 0:a.meta)==null?void 0:c.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(h=(f=(u=l[0])==null?void 0:u.info)==null?void 0:f.meta)==null?void 0:h.profile_image_url}');`:"")},m(o,s){B(o,e,s)},p(o,s){var i,r,a,c,u,f,h,d,_;s[0]&65&&t!==(t=(o[6]*100>4?" size-[4.5rem]":o[6]*100>2?" size-16":o[6]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((a=(r=(i=o[0])==null?void 0:i.info)==null?void 0:r.meta)==null?void 0:a.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white")&&m(e,"class",t),s[0]&1&&n!==(n=(((f=(u=(c=o[0])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(_=(d=(h=o[0])==null?void 0:h.info)==null?void 0:d.meta)==null?void 0:_.profile_image_url}');`:"")&&m(e,"style",n)},d(o){o&&p(e)}}}function $g(l){let e,t,n,o,s,i;return{c(){e=Ve("svg"),t=Ve("style"),n=Ce(`.spinner_qM83 {
								animation: spinner_8HQG 1.05s infinite;
							}
							.spinner_oXPr {
								animation-delay: 0.1s;
							}
							.spinner_ZTLf {
								animation-delay: 0.2s;
							}
							@keyframes spinner_8HQG {
								0%,
								57.14% {
									animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
									transform: translate(0);
								}
								28.57% {
									animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
									transform: translateY(-6px);
								}
								100% {
									transform: translate(0);
								}
							}
						`),o=Ve("circle"),s=Ve("circle"),i=Ve("circle"),this.h()},l(r){e=ze(r,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var a=C(e);t=ze(a,"style",{});var c=C(t);n=De(c,`.spinner_qM83 {
								animation: spinner_8HQG 1.05s infinite;
							}
							.spinner_oXPr {
								animation-delay: 0.1s;
							}
							.spinner_ZTLf {
								animation-delay: 0.2s;
							}
							@keyframes spinner_8HQG {
								0%,
								57.14% {
									animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
									transform: translate(0);
								}
								28.57% {
									animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
									transform: translateY(-6px);
								}
								100% {
									transform: translate(0);
								}
							}
						`),c.forEach(p),o=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(o).forEach(p),s=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(s).forEach(p),i=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(i).forEach(p),a.forEach(p),this.h()},h(){m(o,"class","spinner_qM83"),m(o,"cx","4"),m(o,"cy","12"),m(o,"r","3"),m(s,"class","spinner_qM83 spinner_oXPr"),m(s,"cx","12"),m(s,"cy","12"),m(s,"r","3"),m(i,"class","spinner_qM83 spinner_ZTLf"),m(i,"cx","20"),m(i,"cy","12"),m(i,"r","3"),m(e,"class","size-12 text-gray-900 dark:text-gray-400"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,a){B(r,e,a),E(e,t),E(t,n),E(e,o),E(e,s),E(e,i)},p:we,d(r){r&&p(e)}}}function e0(l){let e,t;return{c(){e=z("div"),t=Ce(l[3]),this.h()},l(n){e=N(n,"DIV",{class:!0,style:!0});var o=C(e);t=De(o,l[3]),o.forEach(p),this.h()},h(){m(e,"class","transition-all rounded-full"),et(e,"font-size",(l[6]*100>4?"4.5":l[6]*100>2?"4.25":l[6]*100>1?"3.75":"3.5")+"rem"),et(e,"width","100%"),et(e,"text-align","center")},m(n,o){B(n,e,o),E(e,t)},p(n,o){o[0]&8&&Ne(t,n[3]),o[0]&64&&et(e,"font-size",(n[6]*100>4?"4.5":n[6]*100>2?"4.25":n[6]*100>1?"3.75":"3.5")+"rem")},d(n){n&&p(e)}}}function t0(l){let e,t,n,o,s,i,r,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-6"><path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"></path></svg>',c,u;return{c(){e=z("div"),t=z("video"),n=x(),o=z("canvas"),s=x(),i=z("div"),r=z("button"),r.innerHTML=a,this.h()},l(f){e=N(f,"DIV",{class:!0});var h=C(e);t=N(h,"VIDEO",{id:!0,class:!0}),C(t).forEach(p),n=$(h),o=N(h,"CANVAS",{id:!0,style:!0}),C(o).forEach(p),s=$(h),i=N(h,"DIV",{class:!0});var d=C(i);r=N(d,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ft(r)!=="svelte-16ul42n"&&(r.innerHTML=a),d.forEach(p),h.forEach(p),this.h()},h(){m(t,"id","camera-feed"),t.autoplay=!0,m(t,"class","rounded-2xl h-full min-w-full object-cover object-center"),t.playsInline=!0,m(o,"id","camera-canvas"),et(o,"display","none"),m(r,"type","button"),m(r,"class","p-1.5 text-white cursor-pointer backdrop-blur-xl bg-black/10 rounded-full"),m(i,"class","absolute top-4 md:top-8 left-4"),m(e,"class","relative flex video-container w-full max-h-full pt-2 pb-4 md:py-6 px-2 h-full")},m(f,h){B(f,e,h),E(e,t),E(e,n),E(e,o),E(e,s),E(e,i),E(i,r),c||(u=ke(r,"click",l[28]),c=!0)},p:we,d(f){f&&p(e),c=!1,u()}}}function n0(l){let e,t,n;function o(r,a){return r[3]?s0:r[1]||r[2]?o0:l0}let s=o(l),i=s(l);return{c(){e=z("button"),i.c(),this.h()},l(r){e=N(r,"BUTTON",{type:!0});var a=C(e);i.l(a),a.forEach(p),this.h()},h(){m(e,"type","button")},m(r,a){B(r,e,a),i.m(e,null),t||(n=ke(e,"click",l[27]),t=!0)},p(r,a){s===(s=o(r))&&i?i.p(r,a):(i.d(1),i=s(r),i&&(i.c(),i.m(e,null)))},d(r){r&&p(e),i.d(),t=!1,n()}}}function l0(l){let e,t,n;return{c(){e=z("div"),this.h()},l(o){e=N(o,"DIV",{class:!0,style:!0}),C(e).forEach(p),this.h()},h(){var o,s,i,r,a,c,u,f,h;m(e,"class",t=(l[6]*100>4?" size-52":l[6]*100>2?"size-48":l[6]*100>1?"size-44":"size-40")+" transition-all rounded-full "+((((i=(s=(o=l[0])==null?void 0:o.info)==null?void 0:s.meta)==null?void 0:i.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")),m(e,"style",n=(((c=(a=(r=l[0])==null?void 0:r.info)==null?void 0:a.meta)==null?void 0:c.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(h=(f=(u=l[0])==null?void 0:u.info)==null?void 0:f.meta)==null?void 0:h.profile_image_url}');`:"")},m(o,s){B(o,e,s)},p(o,s){var i,r,a,c,u,f,h,d,_;s[0]&65&&t!==(t=(o[6]*100>4?" size-52":o[6]*100>2?"size-48":o[6]*100>1?"size-44":"size-40")+" transition-all rounded-full "+((((a=(r=(i=o[0])==null?void 0:i.info)==null?void 0:r.meta)==null?void 0:a.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white"))&&m(e,"class",t),s[0]&1&&n!==(n=(((f=(u=(c=o[0])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(_=(d=(h=o[0])==null?void 0:h.info)==null?void 0:d.meta)==null?void 0:_.profile_image_url}');`:"")&&m(e,"style",n)},d(o){o&&p(e)}}}function o0(l){let e,t,n,o,s,i;return{c(){e=Ve("svg"),t=Ve("style"),n=Ce(`.spinner_qM83 {
									animation: spinner_8HQG 1.05s infinite;
								}
								.spinner_oXPr {
									animation-delay: 0.1s;
								}
								.spinner_ZTLf {
									animation-delay: 0.2s;
								}
								@keyframes spinner_8HQG {
									0%,
									57.14% {
										animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
										transform: translate(0);
									}
									28.57% {
										animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
										transform: translateY(-6px);
									}
									100% {
										transform: translate(0);
									}
								}
							`),o=Ve("circle"),s=Ve("circle"),i=Ve("circle"),this.h()},l(r){e=ze(r,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var a=C(e);t=ze(a,"style",{});var c=C(t);n=De(c,`.spinner_qM83 {
									animation: spinner_8HQG 1.05s infinite;
								}
								.spinner_oXPr {
									animation-delay: 0.1s;
								}
								.spinner_ZTLf {
									animation-delay: 0.2s;
								}
								@keyframes spinner_8HQG {
									0%,
									57.14% {
										animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
										transform: translate(0);
									}
									28.57% {
										animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
										transform: translateY(-6px);
									}
									100% {
										transform: translate(0);
									}
								}
							`),c.forEach(p),o=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(o).forEach(p),s=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(s).forEach(p),i=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(i).forEach(p),a.forEach(p),this.h()},h(){m(o,"class","spinner_qM83"),m(o,"cx","4"),m(o,"cy","12"),m(o,"r","3"),m(s,"class","spinner_qM83 spinner_oXPr"),m(s,"cx","12"),m(s,"cy","12"),m(s,"r","3"),m(i,"class","spinner_qM83 spinner_ZTLf"),m(i,"cx","20"),m(i,"cy","12"),m(i,"r","3"),m(e,"class","size-44 text-gray-900 dark:text-gray-400"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,a){B(r,e,a),E(e,t),E(t,n),E(e,o),E(e,s),E(e,i)},p:we,d(r){r&&p(e)}}}function s0(l){let e,t;return{c(){e=z("div"),t=Ce(l[3]),this.h()},l(n){e=N(n,"DIV",{class:!0,style:!0});var o=C(e);t=De(o,l[3]),o.forEach(p),this.h()},h(){m(e,"class","transition-all rounded-full"),et(e,"font-size",(l[6]*100>4?"13":l[6]*100>2?"12":l[6]*100>1?"11.5":"11")+"rem"),et(e,"width","100%"),et(e,"text-align","center")},m(n,o){B(n,e,o),E(e,t)},p(n,o){o[0]&8&&Ne(t,n[3]),o[0]&64&&et(e,"font-size",(n[6]*100>4?"13":n[6]*100>2?"12":n[6]*100>1?"11.5":"11")+"rem")},d(n){n&&p(e)}}}function r0(l){let e,t;return e=new Xt({props:{content:l[11].t("Camera"),$$slots:{default:[a0]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&2048&&(s.content=n[11].t("Camera")),o[2]&8&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function i0(l){let e,t;return e=new Qg({props:{devices:l[8],$$slots:{default:[c0]},$$scope:{ctx:l}}}),e.$on("change",l[29]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&256&&(s.devices=n[8]),o[2]&8&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function a0(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"></path></svg>',n,o;return{c(){e=z("button"),e.innerHTML=t,this.h()},l(s){e=N(s,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ft(e)!=="svelte-1n1gs9g"&&(e.innerHTML=t),this.h()},h(){m(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),m(e,"type","button")},m(s,i){B(s,e,i),n||(o=ke(e,"click",l[30]),n=!0)},p:we,d(s){s&&p(e),n=!1,o()}}}function c0(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z" clip-rule="evenodd"></path></svg>';return{c(){e=z("button"),e.innerHTML=t,this.h()},l(n){e=N(n,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ft(e)!=="svelte-5e0pue"&&(e.innerHTML=t),this.h()},h(){m(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),m(e,"type","button")},m(n,o){B(n,e,o)},p:we,d(n){n&&p(e)}}}function u0(l){let e=l[11].t("Listening...")+"",t;return{c(){t=Ce(e)},l(n){t=De(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&2048&&e!==(e=n[11].t("Listening...")+"")&&Ne(t,e)},d(n){n&&p(t)}}}function f0(l){let e=l[11].t("Tap to interrupt")+"",t;return{c(){t=Ce(e)},l(n){t=De(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&2048&&e!==(e=n[11].t("Tap to interrupt")+"")&&Ne(t,e)},d(n){n&&p(t)}}}function d0(l){let e=l[11].t("Thinking...")+"",t;return{c(){t=Ce(e)},l(n){t=De(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&2048&&e!==(e=n[11].t("Thinking...")+"")&&Ne(t,e)},d(n){n&&p(t)}}}function h0(l){let e,t,n=l[10]&&ai(l);return{c(){n&&n.c(),e=Ue()},l(o){n&&n.l(o),e=Ue()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[10]?n?(n.p(o,s),s[0]&1024&&S(n,1)):(n=ai(o),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(Oe(),P(n,1,1,()=>{n=null}),He())},i(o){t||(S(n),t=!0)},o(o){P(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function m0(l,e,t){let n,o,s,i,r;ce(l,cl,ue=>t(45,n=ue)),ce(l,Al,ue=>t(46,o=ue)),ce(l,jn,ue=>t(47,s=ue)),ce(l,wn,ue=>t(10,i=ue));const a=tn(),c=Lt("i18n");ce(l,c,ue=>t(11,r=ue));let{eventTarget:u}=e,{submitPrompt:f}=e,{stopResponse:h}=e,{files:d}=e,{chatId:_}=e,{modelId:b}=e,v=null,g=null,w=!1,y=!1,k=!1,I=null,V=!1,T=null,L=!1,O=0,H=!1,F,Y=null,G=[],D=[],K=null;const M=async()=>{const ue=await navigator.mediaDevices.enumerateDevices();t(8,D=ue.filter(Te=>Te.kind==="videoinput")),navigator.mediaDevices.getDisplayMedia&&t(8,D=[...D,{deviceId:"screen",label:"Screen Share"}]),console.log(D),K===null&&D.length>0&&t(9,K=D[0].deviceId)},W=async()=>{if(await M(),T===null){t(4,V=!0),await Qe();try{await j()}catch(ue){console.error("Error accessing webcam: ",ue)}}},j=async()=>{const ue=document.getElementById("camera-feed");ue&&(K==="screen"?t(5,T=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1})):t(5,T=await navigator.mediaDevices.getUserMedia({video:{deviceId:K?{exact:K}:void 0}})),T&&(await M(),ue.srcObject=T,await ue.play()))},Z=async()=>{T&&T.getTracks().forEach(Te=>Te.stop()),t(5,T=null)},A=()=>{const ue=document.getElementById("camera-feed"),Te=document.getElementById("camera-canvas");if(!Te)return;const Be=Te.getContext("2d");Te.width=ue.videoWidth,Te.height=ue.videoHeight,Be.drawImage(ue,0,0,ue.videoWidth,ue.videoHeight);const Ke=Te.toDataURL("image/png");return console.log(Ke),Ke},X=async()=>{await Z(),t(4,V=!1)},q=-55,se=async ue=>{await Qe();const Te=Ai(ue,"recording.wav"),Be=await Li(localStorage.token,Te).catch(Ke=>(nt.error(`${Ke}`),null));if(Be&&(console.log(Be.text),Be.text!=="")){const Ke=await f(Be.text,{_raw:!0});console.log(Ke)}},J=async(ue=!0)=>{if(i){console.log("%c%s","color: red; font-size: 20px;","ðŸš¨ stopRecordingCallback ðŸš¨");const Te=G.slice(0);if(G=[],F=!1,ue&&me(),y){if(t(1,w=!0),t(3,I=null),T){const Ke=A();t(20,d=[{type:"image",url:Ke}])}const Be=new Blob(Te,{type:"audio/wav"});await se(Be),y=!1,t(1,w=!1)}}else G=[],F=!1,Y&&Y.getTracks().forEach(Be=>Be.stop()),t(7,Y=null)},me=async()=>{i&&(Y||t(7,Y=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})),F=new MediaRecorder(Y),F.onstart=()=>{console.log("Recording started"),G=[],le(Y)},F.ondataavailable=ue=>{H&&G.push(ue.data)},F.onstop=ue=>{console.log("Recording stopped",Y,ue),J()},F.start())},_e=async()=>{try{F&&F.stop()}catch(ue){console.log("Error stopping audio stream:",ue)}Y&&(Y.getAudioTracks().forEach(function(ue){ue.stop()}),t(7,Y=null))},ie=ue=>{let Te=0;for(let Be=0;Be<ue.length;Be++){const Ke=(ue[Be]-128)/128;Te+=Ke*Ke}return Math.sqrt(Te/ue.length)},le=ue=>{const Te=new AudioContext,Be=Te.createMediaStreamSource(ue),Ke=Te.createAnalyser();Ke.minDecibels=q,Be.connect(Ke);const yt=Ke.frequencyBinCount,It=new Uint8Array(yt),St=new Uint8Array(Ke.fftSize);let zt=Date.now();H=!1,console.log("ðŸ”Š Sound detection started",zt,H),(()=>{const Nt=()=>{if(!F||!i)return;if(k&&!((s==null?void 0:s.voiceInterruption)??!1)?(Ke.maxDecibels=0,Ke.minDecibels=-1):(Ke.minDecibels=q,Ke.maxDecibels=-30),Ke.getByteTimeDomainData(St),Ke.getByteFrequencyData(It),t(6,O=ie(St)),It.some(Pt=>Pt>0)&&(console.log("%c%s","color: red; font-size: 20px;","ðŸ”Š Sound detected"),H||(H=!0,he()),zt=Date.now()),H&&Date.now()-zt>2e3&&(y=!0,F)){console.log("%c%s","color: red; font-size: 20px;","ðŸ”‡ Silence detected"),F.stop();return}window.requestAnimationFrame(Nt)};window.requestAnimationFrame(Nt)})()};let Pe={},ae=null,Re=null;const Ie=ue=>i?new Promise(Te=>{let Be=[];const Ke=setInterval(async()=>{var yt,It,St;if(Be=await speechSynthesis.getVoices(),Be.length>0){clearInterval(Ke);const zt=((yt=Be==null?void 0:Be.filter(Bt=>{var Nt,Ft,Pt,nn;return Bt.voiceURI===(((Ft=(Nt=s==null?void 0:s.audio)==null?void 0:Nt.tts)==null?void 0:Ft.voice)??((nn=(Pt=o==null?void 0:o.audio)==null?void 0:Pt.tts)==null?void 0:nn.voice))}))==null?void 0:yt.at(0))??void 0;Re=new SpeechSynthesisUtterance(ue),Re.rate=((St=(It=s.audio)==null?void 0:It.tts)==null?void 0:St.playbackRate)??1,zt&&(Re.voice=zt),speechSynthesis.speak(Re),Re.onend=async Bt=>{await new Promise(Nt=>setTimeout(Nt,200)),Te(Bt)}}},100)}):Promise.resolve(),Je=ue=>i?new Promise(Te=>{var Ke,yt;const Be=document.getElementById("audioElement");Be&&(Be.src=ue.src,Be.muted=!0,Be.playbackRate=((yt=(Ke=s.audio)==null?void 0:Ke.tts)==null?void 0:yt.playbackRate)??1,Be.play().then(()=>{Be.muted=!1}).catch(It=>{console.error(It)}),Be.onended=async It=>{await new Promise(St=>setTimeout(St,100)),Te(It)})}):Promise.resolve(),he=async()=>{t(2,k=!1),L&&h(),Re&&(speechSynthesis.cancel(),Re=null);const ue=document.getElementById("audioElement");ue&&(ue.muted=!0,ue.pause(),ue.currentTime=0)};let rt=new AbortController;const it=new Map,Rt=new Map,Mt=async ue=>{var Te,Be,Ke,yt,It,St,zt,Bt;if(!it.has(ue))try{if((s==null?void 0:s.showEmojiInCall)??!1){const Nt=await wc(localStorage.token,b,ue,_);Nt&&Rt.set(ue,Nt)}if(o.audio.tts.engine!==""){const Nt=await Mc(localStorage.token,((Be=(Te=s==null?void 0:s.audio)==null?void 0:Te.tts)==null?void 0:Be.defaultVoice)===o.audio.tts.voice?((yt=(Ke=s==null?void 0:s.audio)==null?void 0:Ke.tts)==null?void 0:yt.voice)??((St=(It=o==null?void 0:o.audio)==null?void 0:It.tts)==null?void 0:St.voice):(Bt=(zt=o==null?void 0:o.audio)==null?void 0:zt.tts)==null?void 0:Bt.voice,ue).catch(Ft=>(console.error(Ft),null));if(Nt){const Ft=await Nt.blob(),Pt=URL.createObjectURL(Ft);it.set(ue,new Audio(Pt))}}else it.set(ue,!0)}catch(Nt){console.error("Error synthesizing speech:",Nt)}return it.get(ue)};let bt={};const pe=async(ue,Te)=>{for(;!Te.aborted;)if(bt[ue]&&bt[ue].length>0){const Be=bt[ue].shift();if(it.has(Be))if(((s==null?void 0:s.showEmojiInCall)??!1)&&Rt.has(Be)?t(3,I=Rt.get(Be)):t(3,I=null),o.audio.tts.engine!=="")try{console.log("%c%s","color: red; font-size: 20px;",`Playing audio for content: ${Be}`);const Ke=it.get(Be);await Je(Ke),console.log(`Played audio for content: ${Be}`),await new Promise(yt=>setTimeout(yt,200))}catch(Ke){console.error("Error playing audio:",Ke)}else await Ie(Be);else bt[ue].unshift(Be),console.log(`Audio for "${Be}" not yet available in the cache, re-queued...`),await new Promise(Ke=>setTimeout(Ke,200))}else if(Pe[ue]&&bt[ue]&&bt[ue].length===0){t(2,k=!1);break}else await new Promise(Be=>setTimeout(Be,200));console.log(`Audio monitoring and playing stopped for message ID ${ue}`)},Xe=async ue=>{const{id:Te}=ue.detail;L=!0,ae!==Te&&(console.log(`Received chat start event for message ID ${Te}`),ae=Te,rt&&rt.abort(),rt=new AbortController,t(2,k=!0),pe(Te,rt.signal))},lt=async ue=>{const{id:Te,content:Be}=ue.detail;if(ae===Te){console.log(`Received chat event for message ID ${Te}: ${Be}`);try{bt[Te]===void 0?bt[Te]=[Be]:bt[Te].push(Be),console.log(Be),Mt(Be)}catch(Ke){console.error("Failed to fetch or play audio:",Ke)}}},ht=async ue=>{const{id:Te,content:Be}=ue.detail;Pe[Te]=!0,L=!1};gn(async()=>{const ue=async()=>{try{v=await navigator.wakeLock.request("screen")}catch(Te){console.log(Te)}v&&v.addEventListener("release",()=>{console.log("Wake Lock released")})};return"wakeLock"in navigator&&(await ue(),document.addEventListener("visibilitychange",async()=>{v!==null&&document.visibilityState==="visible"&&await ue()})),t(0,g=n.find(Te=>Te.id===b)),me(),u.addEventListener("chat:start",Xe),u.addEventListener("chat",lt),u.addEventListener("chat:finish",ht),async()=>{await he(),_e(),u.removeEventListener("chat:start",Xe),u.removeEventListener("chat",lt),u.removeEventListener("chat:finish",ht),rt.abort(),await Qe(),await he(),await J(!1),await X()}}),$n(async()=>{await he(),await J(!1),await X(),await _e(),u.removeEventListener("chat:start",Xe),u.removeEventListener("chat",lt),u.removeEventListener("chat:finish",ht),rt.abort(),await Qe(),await he()});const pt=()=>{k&&he()},fe=()=>{k&&he()},Et=()=>{X()},mt=async ue=>{console.log(ue.detail),t(9,K=ue.detail),await Z(),await j()},vt=async()=>{await navigator.mediaDevices.getUserMedia({video:!0}),W()},Me=()=>{k&&he()},Vt=async()=>{await _e(),await Z(),console.log(Y),console.log(T),wn.set(!1),a("close")};return l.$$set=ue=>{"eventTarget"in ue&&t(21,u=ue.eventTarget),"submitPrompt"in ue&&t(22,f=ue.submitPrompt),"stopResponse"in ue&&t(23,h=ue.stopResponse),"files"in ue&&t(20,d=ue.files),"chatId"in ue&&t(24,_=ue.chatId),"modelId"in ue&&t(25,b=ue.modelId)},[g,w,k,I,V,T,O,Y,D,K,i,r,a,c,W,j,Z,X,_e,he,d,u,f,h,_,b,pt,fe,Et,mt,vt,Me,Vt]}class Da extends Ae{constructor(e){super(),Le(this,e,m0,h0,We,{eventTarget:21,submitPrompt:22,stopResponse:23,files:20,chatId:24,modelId:25},null,[-1,-1,-1])}}function g0(l){var k,I,V,T,L,O,H,F,Y,G;let e,t,n,o,s,i,r=(((I=(k=l[0])==null?void 0:k.model)==null?void 0:I.name)??((T=(V=l[0])==null?void 0:V.message)==null?void 0:T.model)??"Assistant")+"",a,c,u,f,h,d,_,b,v;t=new ji({props:{src:((F=(H=(O=(L=l[0])==null?void 0:L.model)==null?void 0:O.info)==null?void 0:H.meta)==null?void 0:F.profile_image_url)??"",className:"size-5 -translate-y-[1px]"}}),f=new lu({props:{className:"size-3 "+((G=(Y=l[0])==null?void 0:Y.message)!=null&&G.favorite?"fill-red-500 stroke-red-500":"hover:fill-red-500 hover:stroke-red-500")+" ",strokeWidth:"2.5"}});function g(D,K){var M,W;return(W=(M=D[0])==null?void 0:M.message)!=null&&W.error?b0:p0}let w=g(l),y=w(l);return{c(){e=z("div"),ee(t.$$.fragment),n=x(),o=z("div"),s=z("div"),i=z("div"),a=Ce(r),c=x(),u=z("button"),ee(f.$$.fragment),d=x(),y.c(),this.h()},l(D){e=N(D,"DIV",{class:!0});var K=C(e);oe(t.$$.fragment,K),n=$(K),o=N(K,"DIV",{class:!0});var M=C(o);s=N(M,"DIV",{class:!0});var W=C(s);i=N(W,"DIV",{class:!0});var j=C(i);a=De(j,r),j.forEach(p),c=$(W),u=N(W,"BUTTON",{class:!0});var Z=C(u);oe(f.$$.fragment,Z),Z.forEach(p),W.forEach(p),d=$(M),y.l(M),M.forEach(p),K.forEach(p),this.h()},h(){var D,K;m(i,"class","text-xs text-black dark:text-white font-medium line-clamp-1"),m(u,"class",h=(K=(D=l[0])==null?void 0:D.message)!=null&&K.favorite?"":"invisible group-hover:visible"),m(s,"class","flex justify-between items-center"),m(o,"class","ml-2"),m(e,"class","flex w-full")},m(D,K){B(D,e,K),te(t,e,null),E(e,n),E(e,o),E(o,s),E(s,i),E(i,a),E(s,c),E(s,u),te(f,u,null),E(o,d),y.m(o,null),_=!0,b||(v=ke(u,"click",l[1]),b=!0)},p(D,K){var j,Z,A,X,q,se,J,me,_e,ie,le,Pe;const M={};K&1&&(M.src=((X=(A=(Z=(j=D[0])==null?void 0:j.model)==null?void 0:Z.info)==null?void 0:A.meta)==null?void 0:X.profile_image_url)??""),t.$set(M),(!_||K&1)&&r!==(r=(((se=(q=D[0])==null?void 0:q.model)==null?void 0:se.name)??((me=(J=D[0])==null?void 0:J.message)==null?void 0:me.model)??"Assistant")+"")&&Ne(a,r);const W={};K&1&&(W.className="size-3 "+((ie=(_e=D[0])==null?void 0:_e.message)!=null&&ie.favorite?"fill-red-500 stroke-red-500":"hover:fill-red-500 hover:stroke-red-500")+" "),f.$set(W),(!_||K&1&&h!==(h=(Pe=(le=D[0])==null?void 0:le.message)!=null&&Pe.favorite?"":"invisible group-hover:visible"))&&m(u,"class",h),w===(w=g(D))&&y?y.p(D,K):(y.d(1),y=w(D),y&&(y.c(),y.m(o,null)))},i(D){_||(S(t.$$.fragment,D),S(f.$$.fragment,D),_=!0)},o(D){P(t.$$.fragment,D),P(f.$$.fragment,D),_=!1},d(D){D&&p(e),ne(t),ne(f),y.d(),b=!1,v()}}}function _0(l){var _,b,v;let e,t,n,o,s,i,r=(((b=(_=l[0])==null?void 0:_.user)==null?void 0:b.name)??"User")+"",a,c,u;t=new ji({props:{src:((v=l[0].user)==null?void 0:v.profile_image_url)??"/user.png",className:"size-5 -translate-y-[1px]"}});function f(g,w){var y,k;return(k=(y=g[0])==null?void 0:y.message)!=null&&k.error?w0:v0}let h=f(l),d=h(l);return{c(){e=z("div"),ee(t.$$.fragment),n=x(),o=z("div"),s=z("div"),i=z("div"),a=Ce(r),c=x(),d.c(),this.h()},l(g){e=N(g,"DIV",{class:!0});var w=C(e);oe(t.$$.fragment,w),n=$(w),o=N(w,"DIV",{class:!0});var y=C(o);s=N(y,"DIV",{class:!0});var k=C(s);i=N(k,"DIV",{class:!0});var I=C(i);a=De(I,r),I.forEach(p),k.forEach(p),c=$(y),d.l(y),y.forEach(p),w.forEach(p),this.h()},h(){m(i,"class","text-xs text-black dark:text-white font-medium line-clamp-1"),m(s,"class","flex justify-between items-center"),m(o,"class","ml-2"),m(e,"class","flex w-full")},m(g,w){B(g,e,w),te(t,e,null),E(e,n),E(e,o),E(o,s),E(s,i),E(i,a),E(o,c),d.m(o,null),u=!0},p(g,w){var k,I,V;const y={};w&1&&(y.src=((k=g[0].user)==null?void 0:k.profile_image_url)??"/user.png"),t.$set(y),(!u||w&1)&&r!==(r=(((V=(I=g[0])==null?void 0:I.user)==null?void 0:V.name)??"User")+"")&&Ne(a,r),h===(h=f(g))&&d?d.p(g,w):(d.d(1),d=h(g),d&&(d.c(),d.m(o,null)))},i(g){u||(S(t.$$.fragment,g),u=!0)},o(g){P(t.$$.fragment,g),u=!1},d(g){g&&p(e),ne(t),d.d()}}}function p0(l){let e,t=l[0].message.content+"",n;return{c(){e=z("div"),n=Ce(t),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);n=De(s,t),s.forEach(p),this.h()},h(){m(e,"class","text-gray-500 line-clamp-2 text-xs mt-0.5")},m(o,s){B(o,e,s),E(e,n)},p(o,s){s&1&&t!==(t=o[0].message.content+"")&&Ne(n,t)},d(o){o&&p(e)}}}function b0(l){let e,t=l[0].message.error.content+"",n;return{c(){e=z("div"),n=Ce(t),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);n=De(s,t),s.forEach(p),this.h()},h(){m(e,"class","text-red-500 line-clamp-2 text-xs mt-0.5")},m(o,s){B(o,e,s),E(e,n)},p(o,s){s&1&&t!==(t=o[0].message.error.content+"")&&Ne(n,t)},d(o){o&&p(e)}}}function v0(l){let e,t=l[0].message.content+"",n;return{c(){e=z("div"),n=Ce(t),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);n=De(s,t),s.forEach(p),this.h()},h(){m(e,"class","text-gray-500 line-clamp-2 text-xs mt-0.5")},m(o,s){B(o,e,s),E(e,n)},p(o,s){s&1&&t!==(t=o[0].message.content+"")&&Ne(n,t)},d(o){o&&p(e)}}}function w0(l){let e,t=l[0].message.error.content+"",n;return{c(){e=z("div"),n=Ce(t),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);n=De(s,t),s.forEach(p),this.h()},h(){m(e,"class","text-red-500 line-clamp-2 text-xs mt-0.5")},m(o,s){B(o,e,s),E(e,n)},p(o,s){s&1&&t!==(t=o[0].message.error.content+"")&&Ne(n,t)},d(o){o&&p(e)}}}function y0(l){let e,t,n,o;const s=[_0,g0],i=[];function r(a,c){return a[0].message.role==="user"?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ue()},l(a){t.l(a),n=Ue()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(Oe(),P(i[u],1,1,()=>{i[u]=null}),He(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){P(t),o=!1},d(a){a&&p(n),i[e].d(a)}}}function k0(l){var a,c;let e,t,n,o,s,i,r;return t=new Xt({props:{content:(c=(a=l[0])==null?void 0:a.message)!=null&&c.error?l[0].message.error.content:l[0].message.content,class:"w-full",allowHTML:!1,$$slots:{default:[y0]},$$scope:{ctx:l}}}),o=new Sl({props:{type:"target",position:st.Top,class:"w-2 rounded-full dark:bg-gray-900"}}),i=new Sl({props:{type:"source",position:st.Bottom,class:"w-2 rounded-full dark:bg-gray-900"}}),{c(){e=z("div"),ee(t.$$.fragment),n=x(),ee(o.$$.fragment),s=x(),ee(i.$$.fragment),this.h()},l(u){e=N(u,"DIV",{class:!0});var f=C(e);oe(t.$$.fragment,f),n=$(f),oe(o.$$.fragment,f),s=$(f),oe(i.$$.fragment,f),f.forEach(p),this.h()},h(){m(e,"class","px-4 py-3 shadow-md rounded-xl dark:bg-black bg-white border dark:border-gray-900 w-60 h-20 group")},m(u,f){B(u,e,f),te(t,e,null),E(e,n),te(o,e,null),E(e,s),te(i,e,null),r=!0},p(u,[f]){var d,_;const h={};f&1&&(h.content=(_=(d=u[0])==null?void 0:d.message)!=null&&_.error?u[0].message.error.content:u[0].message.content),f&5&&(h.$$scope={dirty:f,ctx:u}),t.$set(h)},i(u){r||(S(t.$$.fragment,u),S(o.$$.fragment,u),S(i.$$.fragment,u),r=!0)},o(u){P(t.$$.fragment,u),P(o.$$.fragment,u),P(i.$$.fragment,u),r=!1},d(u){u&&p(e),ne(t),ne(o),ne(i)}}}function E0(l,e,t){let{data:n}=e;const o=()=>{var s;t(0,n.message.favorite=!(((s=n==null?void 0:n.message)==null?void 0:s.favorite)??!1),n)};return l.$$set=s=>{"data"in s&&t(0,n=s.data)},[n,o]}class I0 extends Ae{constructor(e){super(),Le(this,e,E0,k0,We,{data:0})}}function S0(l){let e,t,n,o;return e=new hg({props:{showLock:!1}}),n=new Sg({props:{variant:Zn.Dots}}),{c(){ee(e.$$.fragment),t=x(),ee(n.$$.fragment)},l(s){oe(e.$$.fragment,s),t=$(s),oe(n.$$.fragment,s)},m(s,i){te(e,s,i),B(s,t,i),te(n,s,i),o=!0},p:we,i(s){o||(S(e.$$.fragment,s),S(n.$$.fragment,s),o=!0)},o(s){P(e.$$.fragment,s),P(n.$$.fragment,s),o=!1},d(s){s&&p(t),ne(e,s),ne(n,s)}}}function C0(l){let e,t;return e=new R1({props:{nodes:l[0],nodeTypes:l[1],edges:l[2],fitView:!0,minZoom:.001,colorMode:l[3].includes("dark")||l[3]==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",nodesConnectable:!1,nodesDraggable:!1,oninit:l[5],$$slots:{default:[S0]},$$scope:{ctx:l}}}),e.$on("nodeclick",l[6]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,[o]){const s={};o&1&&(s.nodes=n[0]),o&2&&(s.nodeTypes=n[1]),o&4&&(s.edges=n[2]),o&8&&(s.colorMode=n[3].includes("dark")||n[3]==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),o&128&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function D0(l,e,t){let n;ce(l,Fa,u=>t(3,n=u));const o=tn();let{nodes:s}=e,{nodeTypes:i}=e,{edges:r}=e;const a=()=>{console.log("Flow initialized")},c=u=>o("nodeclick",u.detail);return l.$$set=u=>{"nodes"in u&&t(0,s=u.nodes),"nodeTypes"in u&&t(1,i=u.nodeTypes),"edges"in u&&t(2,r=u.edges)},[s,i,r,n,o,a,c]}class M0 extends Ae{constructor(e){super(),Le(this,e,D0,C0,We,{nodes:0,nodeTypes:1,edges:2})}}function T0(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=C(e);t=ze(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:we,o:we,d(n){n&&p(e)}}}function V0(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class Ma extends Ae{constructor(e){super(),Le(this,e,V0,T0,We,{className:0,strokeWidth:1})}}function ui(l){let e,t;return e=new M0({props:{nodes:l[6],nodeTypes:l[8],edges:l[7]}}),e.$on("nodeclick",l[12]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p:we,i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function z0(l){let e,t,n,o,s,i,r,a=l[1].t("Chat Overview")+"",c,u,f,h,d,_,b,v;s=new Ma({props:{className:"size-3.5"}}),h=new bo({props:{className:"size-3.5"}});let g=l[2].length>0&&ui(l);return{c(){e=z("div"),t=z("div"),n=z("div"),o=z("button"),ee(s.$$.fragment),i=x(),r=z("div"),c=Ce(a),u=x(),f=z("button"),ee(h.$$.fragment),d=x(),g&&g.c(),this.h()},l(w){e=N(w,"DIV",{class:!0});var y=C(e);t=N(y,"DIV",{class:!0});var k=C(t);n=N(k,"DIV",{class:!0});var I=C(n);o=N(I,"BUTTON",{class:!0});var V=C(o);oe(s.$$.fragment,V),V.forEach(p),i=$(I),r=N(I,"DIV",{class:!0});var T=C(r);c=De(T,a),T.forEach(p),I.forEach(p),u=$(k),f=N(k,"BUTTON",{class:!0});var L=C(f);oe(h.$$.fragment,L),L.forEach(p),k.forEach(p),d=$(y),g&&g.l(y),y.forEach(p),this.h()},h(){m(o,"class","self-center p-0.5"),m(r,"class","text-lg font-medium self-center font-primary"),m(n,"class","flex items-center gap-2.5"),m(f,"class","self-center p-0.5"),m(t,"class","absolute z-50 w-full flex justify-between dark:text-gray-100 px-4 py-3.5"),m(e,"class","w-full h-full relative")},m(w,y){B(w,e,y),E(e,t),E(t,n),E(n,o),te(s,o,null),E(n,i),E(n,r),E(r,c),E(t,u),E(t,f),te(h,f,null),E(e,d),g&&g.m(e,null),_=!0,b||(v=[ke(o,"click",l[10]),ke(f,"click",l[11])],b=!0)},p(w,[y]){(!_||y&2)&&a!==(a=w[1].t("Chat Overview")+"")&&Ne(c,a),w[2].length>0?g?(g.p(w,y),y&4&&S(g,1)):(g=ui(w),g.c(),S(g,1),g.m(e,null)):g&&(Oe(),P(g,1,1,()=>{g=null}),He())},i(w){_||(S(s.$$.fragment,w),S(h.$$.fragment,w),S(g),_=!0)},o(w){P(s.$$.fragment,w),P(h.$$.fragment,w),P(g),_=!1},d(w){w&&p(e),ne(s),ne(h),g&&g.d(),b=!1,en(v)}}}function N0(l,e,t){let n,o,s,i;ce(l,cl,O=>t(13,n=O)),ce(l,Kn,O=>t(14,o=O));const r=tn(),a=Lt("i18n");ce(l,a,O=>t(1,s=O));const{width:c,height:u}=jt(),{fitView:f,getViewport:h}=Cg(),d=Dg();let{history:_}=e,b=null;const v=xe([]);ce(l,v,O=>t(2,i=O));const g=xe([]),w={custom:I0},y=async()=>{b===null?await f({nodes:[{id:_.currentId}]}):await f({nodes:[{id:b}]}),t(0,b=null)},k=async()=>{const O=[],H=[];let G=new Map,D={};Object.keys(_.messages).forEach(K=>{var j;const M=_.messages[K],W=M.parentId?(((j=G.get(M.parentId))==null?void 0:j.level)??-1)+1:0;D[W]||(D[W]=0),G.set(K,{id:M.id,level:W,position:D[W]++})}),Object.keys(_.messages).forEach(K=>{const M=G.get(K),W=M.position*250,j=M.level*150,Z=W;O.push({id:M.id,type:"custom",data:{user:o,message:_.messages[K],model:n.find(X=>X.id===_.messages[K].model)},position:{x:Z,y:j}});const A=_.messages[K].parentId;A&&H.push({id:A+"-"+M.id,source:A,target:M.id,selectable:!1,class:" dark:fill-gray-300 fill-gray-300",type:"smoothstep",animated:_.currentId===K||I(K,_.currentId)})}),await g.set([...H]),await v.set([...O])},I=(O,H)=>{const F=_.messages[O];return F.childrenIds&&F.childrenIds.some(Y=>Y===H||I(Y,H))};gn(()=>{k(),d.subscribe(async O=>{O&&(await Qe(),await f({nodes:[{id:_.currentId}]}))}),c.subscribe(O=>{O&&f({nodes:[{id:_.currentId}]})}),u.subscribe(O=>{O&&f({nodes:[{id:_.currentId}]})})}),$n(()=>{console.log("Overview destroyed"),v.set([]),g.set([])});const V=()=>{Fn.set(!1)},T=()=>{r("close"),Fn.set(!1)},L=O=>{console.log(O.detail.node.data),r("nodeclick",O.detail),t(0,b=O.detail.node.data.message.id),f({nodes:[{id:b}]})};return l.$$set=O=>{"history"in O&&t(9,_=O.history)},l.$$.update=()=>{l.$$.dirty&512&&_&&k(),l.$$.dirty&512&&_&&_.currentId&&y()},[b,s,i,r,a,f,v,g,w,_,V,T,L]}class Ta extends Ae{constructor(e){super(),Le(this,e,N0,z0,We,{history:9})}}function P0(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=C(e);t=ze(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:we,o:we,d(n){n&&p(e)}}}function O0(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class H0 extends Ae{constructor(e){super(),Le(this,e,O0,P0,We,{className:0,strokeWidth:1})}}function fi(l){let e;return{c(){e=z("div"),this.h()},l(t){e=N(t,"DIV",{class:!0}),C(e).forEach(p),this.h()},h(){m(e,"class","absolute top-0 left-0 right-0 bottom-0 z-10")},m(t,n){B(t,e,n)},d(t){t&&p(e)}}}function B0(l){let e,t=l[5].t("No HTML, CSS, or JavaScript content found.")+"",n;return{c(){e=z("div"),n=Ce(t),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);n=De(s,t),s.forEach(p),this.h()},h(){m(e,"class","m-auto font-medium text-xs text-gray-900 dark:text-white")},m(o,s){B(o,e,s),E(e,n)},p(o,s){s&32&&t!==(t=o[5].t("No HTML, CSS, or JavaScript content found.")+"")&&Ne(n,t)},i:we,o:we,d(o){o&&p(e)}}}function A0(l){let e,t,n,o;const s=[R0,L0],i=[];function r(a,c){return a[1][a[2]].type==="iframe"?0:a[1][a[2]].type==="svg"?1:-1}return~(t=r(l))&&(n=i[t]=s[t](l)),{c(){e=z("div"),n&&n.c(),this.h()},l(a){e=N(a,"DIV",{class:!0});var c=C(e);n&&n.l(c),c.forEach(p),this.h()},h(){m(e,"class","max-w-full w-full h-full")},m(a,c){B(a,e,c),~t&&i[t].m(e,null),o=!0},p(a,c){let u=t;t=r(a),t===u?~t&&i[t].p(a,c):(n&&(Oe(),P(i[u],1,1,()=>{i[u]=null}),He()),~t?(n=i[t],n?n.p(a,c):(n=i[t]=s[t](a),n.c()),S(n,1),n.m(e,null)):n=null)},i(a){o||(S(n),o=!0)},o(a){P(n),o=!1},d(a){a&&p(e),~t&&i[t].d()}}}function L0(l){let e,t;return e=new Wc({props:{className:" w-full h-full max-h-full overflow-hidden",svg:l[1][l[2]].content}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&6&&(s.svg=n[1][n[2]].content),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function R0(l){let e,t,n,o;return{c(){e=z("iframe"),this.h()},l(s){e=N(s,"IFRAME",{title:!0,srcdoc:!0,class:!0,sandbox:!0}),C(e).forEach(p),this.h()},h(){m(e,"title","Content"),m(e,"srcdoc",t=l[1][l[2]].content),m(e,"class","w-full border-0 h-full rounded-none"),m(e,"sandbox","allow-scripts allow-forms allow-same-origin")},m(s,i){B(s,e,i),l[14](e),n||(o=ke(e,"load",l[9]),n=!0)},p(s,i){i&6&&t!==(t=s[1][s[2]].content)&&m(e,"srcdoc",t)},i:we,o:we,d(s){s&&p(e),l[14](null),n=!1,o()}}}function di(l){let e,t,n,o,s,i,r,a,c,u=l[5].t("Version {{selectedVersion}} of {{totalVersions}}",{selectedVersion:l[2]+1,totalVersions:l[1].length})+"",f,h,d,_,b,v,g,w,y,k=(l[3]?l[5].t("Copied"):l[5].t("Copy"))+"",I,V,T,L,O,H=l[1][l[2]].type==="iframe"&&hi(l);return{c(){e=z("div"),t=z("div"),n=z("div"),o=z("button"),s=Ve("svg"),i=Ve("path"),a=x(),c=z("div"),f=Ce(u),h=x(),d=z("button"),_=Ve("svg"),b=Ve("path"),g=x(),w=z("div"),y=z("button"),I=Ce(k),V=x(),H&&H.c(),this.h()},l(F){e=N(F,"DIV",{class:!0});var Y=C(e);t=N(Y,"DIV",{class:!0});var G=C(t);n=N(G,"DIV",{class:!0,dir:!0});var D=C(n);o=N(D,"BUTTON",{class:!0});var K=C(o);s=ze(K,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var M=C(s);i=ze(M,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(i).forEach(p),M.forEach(p),K.forEach(p),a=$(D),c=N(D,"DIV",{class:!0});var W=C(c);f=De(W,u),W.forEach(p),h=$(D),d=N(D,"BUTTON",{class:!0});var j=C(d);_=ze(j,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var Z=C(_);b=ze(Z,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(b).forEach(p),Z.forEach(p),j.forEach(p),D.forEach(p),G.forEach(p),g=$(Y),w=N(Y,"DIV",{class:!0});var A=C(w);y=N(A,"BUTTON",{class:!0});var X=C(y);I=De(X,k),X.forEach(p),V=$(A),H&&H.l(A),A.forEach(p),Y.forEach(p),this.h()},h(){m(i,"stroke-linecap","round"),m(i,"stroke-linejoin","round"),m(i,"d","M15.75 19.5 8.25 12l7.5-7.5"),m(s,"xmlns","http://www.w3.org/2000/svg"),m(s,"fill","none"),m(s,"viewBox","0 0 24 24"),m(s,"stroke","currentColor"),m(s,"stroke-width","2.5"),m(s,"class","size-3.5"),m(o,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition disabled:cursor-not-allowed"),o.disabled=r=l[1].length<=1,m(c,"class","text-xs self-center dark:text-gray-100 min-w-fit"),m(b,"stroke-linecap","round"),m(b,"stroke-linejoin","round"),m(b,"d","m8.25 4.5 7.5 7.5-7.5 7.5"),m(_,"xmlns","http://www.w3.org/2000/svg"),m(_,"fill","none"),m(_,"viewBox","0 0 24 24"),m(_,"stroke","currentColor"),m(_,"stroke-width","2.5"),m(_,"class","size-3.5"),m(d,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition disabled:cursor-not-allowed"),d.disabled=v=l[1].length<=1,m(n,"class","flex items-center gap-0.5 self-center min-w-fit"),m(n,"dir","ltr"),m(t,"class","flex items-center space-x-2"),m(y,"class","copy-code-button bg-none border-none text-xs bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-md px-1.5 py-0.5"),m(w,"class","flex items-center gap-1"),m(e,"class","flex justify-between items-center p-2.5 font-primar text-gray-900 dark:text-white")},m(F,Y){B(F,e,Y),E(e,t),E(t,n),E(n,o),E(o,s),E(s,i),E(n,a),E(n,c),E(c,f),E(n,h),E(n,d),E(d,_),E(_,b),E(e,g),E(e,w),E(w,y),E(y,I),E(w,V),H&&H.m(w,null),T=!0,L||(O=[ke(o,"click",l[15]),ke(d,"click",l[16]),ke(y,"click",l[17])],L=!0)},p(F,Y){(!T||Y&2&&r!==(r=F[1].length<=1))&&(o.disabled=r),(!T||Y&38)&&u!==(u=F[5].t("Version {{selectedVersion}} of {{totalVersions}}",{selectedVersion:F[2]+1,totalVersions:F[1].length})+"")&&Ne(f,u),(!T||Y&2&&v!==(v=F[1].length<=1))&&(d.disabled=v),(!T||Y&40)&&k!==(k=(F[3]?F[5].t("Copied"):F[5].t("Copy"))+"")&&Ne(I,k),F[1][F[2]].type==="iframe"?H?(H.p(F,Y),Y&6&&S(H,1)):(H=hi(F),H.c(),S(H,1),H.m(w,null)):H&&(Oe(),P(H,1,1,()=>{H=null}),He())},i(F){T||(S(H),T=!0)},o(F){P(H),T=!1},d(F){F&&p(e),H&&H.d(),L=!1,en(O)}}}function hi(l){let e,t;return e=new Xt({props:{content:l[5].t("Open in full screen"),$$slots:{default:[U0]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&32&&(s.content=n[5].t("Open in full screen")),o&1048576&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function U0(l){let e,t,n,o,s;return t=new H0({props:{className:"size-3.5"}}),{c(){e=z("button"),ee(t.$$.fragment),this.h()},l(i){e=N(i,"BUTTON",{class:!0});var r=C(e);oe(t.$$.fragment,r),r.forEach(p),this.h()},h(){m(e,"class","bg-none border-none text-xs bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-md p-0.5")},m(i,r){B(i,e,r),te(t,e,null),n=!0,o||(s=ke(e,"click",l[10]),o=!0)},p:we,i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){i&&p(e),ne(t),o=!1,s()}}}function W0(l){let e,t,n,o,s,i,r,a,c,u,f,h,d,_,b,v,g,w,y,k=l[0]&&fi();i=new Ma({props:{className:"size-3.5  text-gray-900 dark:text-white"}}),u=new bo({props:{className:"size-3.5 text-gray-900 dark:text-white"}});const I=[A0,B0],V=[];function T(O,H){return O[1].length>0?0:1}_=T(l),b=V[_]=I[_](l);let L=l[1].length>0&&di(l);return{c(){e=z("div"),t=z("div"),k&&k.c(),n=x(),o=z("div"),s=z("button"),ee(i.$$.fragment),r=x(),a=z("div"),c=z("button"),ee(u.$$.fragment),f=x(),h=z("div"),d=z("div"),b.c(),v=x(),L&&L.c(),this.h()},l(O){e=N(O,"DIV",{class:!0});var H=C(e);t=N(H,"DIV",{class:!0});var F=C(t);k&&k.l(F),n=$(F),o=N(F,"DIV",{class:!0});var Y=C(o);s=N(Y,"BUTTON",{class:!0});var G=C(s);oe(i.$$.fragment,G),G.forEach(p),Y.forEach(p),r=$(F),a=N(F,"DIV",{class:!0});var D=C(a);c=N(D,"BUTTON",{class:!0});var K=C(c);oe(u.$$.fragment,K),K.forEach(p),D.forEach(p),f=$(F),h=N(F,"DIV",{class:!0});var M=C(h);d=N(M,"DIV",{class:!0});var W=C(d);b.l(W),W.forEach(p),M.forEach(p),F.forEach(p),v=$(H),L&&L.l(H),H.forEach(p),this.h()},h(){m(s,"class","self-center pointer-events-auto p-1 rounded-full bg-white dark:bg-gray-850"),m(o,"class","absolute pointer-events-none z-50 w-full flex items-center justify-start p-4"),m(c,"class","self-center pointer-events-auto p-1 rounded-full bg-white dark:bg-gray-850"),m(a,"class","absolute pointer-events-none z-50 w-full flex items-center justify-end p-4"),m(d,"class","h-full flex flex-col"),m(h,"class","flex-1 w-full h-full"),m(t,"class","w-full h-full flex-1 relative"),m(e,"class","w-full h-full relative flex flex-col bg-gray-50 dark:bg-gray-850")},m(O,H){B(O,e,H),E(e,t),k&&k.m(t,null),E(t,n),E(t,o),E(o,s),te(i,s,null),E(t,r),E(t,a),E(a,c),te(u,c,null),E(t,f),E(t,h),E(h,d),V[_].m(d,null),E(e,v),L&&L.m(e,null),g=!0,w||(y=[ke(s,"click",l[12]),ke(c,"click",l[13])],w=!0)},p(O,[H]){O[0]?k||(k=fi(),k.c(),k.m(t,n)):k&&(k.d(1),k=null);let F=_;_=T(O),_===F?V[_].p(O,H):(Oe(),P(V[F],1,1,()=>{V[F]=null}),He(),b=V[_],b?b.p(O,H):(b=V[_]=I[_](O),b.c()),S(b,1),b.m(d,null)),O[1].length>0?L?(L.p(O,H),H&2&&S(L,1)):(L=di(O),L.c(),S(L,1),L.m(e,null)):L&&(Oe(),P(L,1,1,()=>{L=null}),He())},i(O){g||(S(i.$$.fragment,O),S(u.$$.fragment,O),S(b),S(L),g=!0)},o(O){P(i.$$.fragment,O),P(u.$$.fragment,O),P(b),P(L),g=!1},d(O){O&&p(e),k&&k.d(),ne(i),ne(u),V[_].d(),L&&L.d(),w=!1,en(y)}}}function j0(l,e,t){let n;const o=Lt("i18n");ce(l,o,T=>t(5,n=T));const s=tn();let{overlay:i=!1}=e,{history:r}=e,a=[],c=[],u=0,f=!1,h;const d=()=>{t(1,c=[]),a.forEach(T=>{if((T==null?void 0:T.role)!=="user"&&(T!=null&&T.content)){const L=T.content.match(/```[\s\S]*?```/g);let O=[];L&&L.forEach(M=>{const W=M.split(`
`)[0].replace("```","").trim().toLowerCase(),j=M.replace(/```[\s\S]*?\n/,"").replace(/```$/,"");O.push({lang:W,code:j})});let H="",F="",Y="";O.forEach(M=>{const{lang:W,code:j}=M;W==="html"?H+=j+`
`:W==="css"?F+=j+`
`:(W==="javascript"||W==="js")&&(Y+=j+`
`)});const G=T.content.match(/<html>[\s\S]*?<\/html>/gi),D=T.content.match(/<style>[\s\S]*?<\/style>/gi),K=T.content.match(/<script>[\s\S]*?<\/script>/gi);if(G&&G.forEach(M=>{const W=M.replace(/<\/?html>/gi,"");H+=W+`
`}),D&&D.forEach(M=>{const W=M.replace(/<\/?style>/gi,"");F+=W+`
`}),K&&K.forEach(M=>{const W=M.replace(/<\/?script>/gi,"");Y+=W+`
`}),H||F||Y){const M=`
                        <!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
							<style>
								body {
									background-color: white; /* Ensure the iframe has a white background */
								}

								${F}
							</style>
                        </head>
                        <body>
                            ${H}

							<script>
                            	${Y}
							<\/script>
                        </body>
                        </html>
                    `;t(1,c=[...c,{type:"iframe",content:M}])}else for(const M of O)(M.lang==="svg"||M.lang==="xml"&&M.code.includes("<svg"))&&t(1,c=[...c,{type:"svg",content:M.code}])}}),c.length===0&&(At.set(!1),Rn.set(!1)),t(2,u=c?c.length-1:0)};function _(T){console.log(u),t(2,u=T==="prev"?Math.max(u-1,0):Math.min(u+1,c.length-1)),console.log(u)}const b=()=>{h.contentWindow.addEventListener("click",function(T){const L=T.target.closest("a");if(L&&L.href){T.preventDefault();const O=new URL(L.href,h.baseURI);O.origin===window.location.origin?h.contentWindow.history.pushState(null,"",O.pathname+O.search+O.hash):console.log("External navigation blocked:",O.href)}},!0),h.contentWindow.addEventListener("mouseenter",function(T){T.preventDefault(),h.contentWindow.addEventListener("dragstart",L=>{L.preventDefault()})})},v=()=>{h.requestFullscreen?h.requestFullscreen():h.webkitRequestFullscreen?h.webkitRequestFullscreen():h.msRequestFullscreen&&h.msRequestFullscreen()};gn(()=>{});const g=()=>{Rn.set(!1)},w=()=>{s("close"),At.set(!1),Rn.set(!1)};function y(T){je[T?"unshift":"push"](()=>{h=T,t(4,h)})}const k=()=>_("prev"),I=()=>_("next"),V=()=>{Zo(c[u].content),t(3,f=!0),setTimeout(()=>{t(3,f=!1)},2e3)};return l.$$set=T=>{"overlay"in T&&t(0,i=T.overlay),"history"in T&&t(11,r=T.history)},l.$$.update=()=>{l.$$.dirty&2048&&(r?(a=lo(r,r.currentId),d()):(a=[],d()))},[i,c,u,f,h,n,o,s,_,b,v,r,g,w,y,k,I,V]}class Va extends Ae{constructor(e){super(),Le(this,e,j0,W0,We,{overlay:0,history:11})}}function F0(l){let e,t,n,o,s=l[16]&&mi(l);function i(a){l[37](a)}let r={defaultSize:0,onResize:l[35],onCollapse:l[36],collapsible:!0,class:"pt-8",$$slots:{default:[J0]},$$scope:{ctx:l}};return l[4]!==void 0&&(r.pane=l[4]),t=new Pi({props:r}),je.push(()=>qe(t,"pane",i)),{c(){s&&s.c(),e=x(),ee(t.$$.fragment)},l(a){s&&s.l(a),e=$(a),oe(t.$$.fragment,a)},m(a,c){s&&s.m(a,c),B(a,e,c),te(t,a,c),o=!0},p(a,c){a[16]?s?c[0]&65536&&S(s,1):(s=mi(a),s.c(),S(s,1),s.m(e.parentNode,e)):s&&(Oe(),P(s,1,1,()=>{s=null}),He());const u={};c[0]&81936&&(u.onResize=a[35]),c[0]&503791|c[1]&4096&&(u.$$scope={dirty:c,ctx:a}),!n&&c[0]&16&&(n=!0,u.pane=a[4],Ge(()=>n=!1)),t.$set(u)},i(a){o||(S(s),S(t.$$.fragment,a),o=!0)},o(a){P(s),P(t.$$.fragment,a),o=!1},d(a){a&&p(e),s&&s.d(a),ne(t,a)}}}function Y0(l){let e,t,n=l[16]&&_i(l);return{c(){n&&n.c(),e=Ue()},l(o){n&&n.l(o),e=Ue()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[16]?n?(n.p(o,s),s[0]&65536&&S(n,1)):(n=_i(o),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(Oe(),P(n,1,1,()=>{n=null}),He())},i(o){t||(S(n),t=!0)},o(o){P(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function mi(l){let e,t;return e=new La({props:{class:"relative flex w-2 items-center justify-center bg-background group",$$slots:{default:[Z0]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Z0(l){let e,t,n;return t=new su({props:{className:"size-4 invisible group-hover:visible"}}),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=C(e);oe(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","z-10 flex h-7 w-5 items-center justify-center rounded-sm")},m(o,s){B(o,e,s),te(t,e,null),n=!0},p:we,i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){o&&p(e),ne(t)}}}function gi(l){let e,t,n,o,s,i;const r=[q0,G0,K0,X0],a=[];function c(u,f){return u[15]?0:u[18]?1:u[17]?2:3}return n=c(l),o=a[n]=r[n](l),{c(){e=z("div"),t=z("div"),o.c(),this.h()},l(u){e=N(u,"DIV",{class:!0});var f=C(e);t=N(f,"DIV",{class:!0});var h=C(t);o.l(h),h.forEach(p),f.forEach(p),this.h()},h(){m(t,"class",s="w-full "+((l[17]||l[18])&&!l[15]?" ":"px-4 py-4 bg-white dark:shadow-lg dark:bg-gray-850  border border-gray-50 dark:border-gray-850")+" rounded-xl z-40 pointer-events-auto overflow-y-auto scrollbar-hidden"),m(e,"class","pr-4 pb-8 flex max-h-full min-h-full")},m(u,f){B(u,e,f),E(e,t),a[n].m(t,null),i=!0},p(u,f){let h=n;n=c(u),n===h?a[n].p(u,f):(Oe(),P(a[h],1,1,()=>{a[h]=null}),He(),o=a[n],o?o.p(u,f):(o=a[n]=r[n](u),o.c()),S(o,1),o.m(t,null)),(!i||f[0]&425984&&s!==(s="w-full "+((u[17]||u[18])&&!u[15]?" ":"px-4 py-4 bg-white dark:shadow-lg dark:bg-gray-850  border border-gray-50 dark:border-gray-850")+" rounded-xl z-40 pointer-events-auto overflow-y-auto scrollbar-hidden"))&&m(t,"class",s)},i(u){i||(S(o),i=!0)},o(u){P(o),i=!1},d(u){u&&p(e),a[n].d()}}}function X0(l){let e,t,n,o;function s(a){l[32](a)}function i(a){l[33](a)}let r={models:l[5]};return l[1]!==void 0&&(r.chatFiles=l[1]),l[2]!==void 0&&(r.params=l[2]),e=new Ca({props:r}),je.push(()=>qe(e,"chatFiles",s)),je.push(()=>qe(e,"params",i)),e.$on("close",l[34]),{c(){ee(e.$$.fragment)},l(a){oe(e.$$.fragment,a)},m(a,c){te(e,a,c),o=!0},p(a,c){const u={};c[0]&32&&(u.models=a[5]),!t&&c[0]&2&&(t=!0,u.chatFiles=a[1],Ge(()=>t=!1)),!n&&c[0]&4&&(n=!0,u.params=a[2],Ge(()=>n=!1)),e.$set(u)},i(a){o||(S(e.$$.fragment,a),o=!0)},o(a){P(e.$$.fragment,a),o=!1},d(a){ne(e,a)}}}function K0(l){let e,t;return e=new Ta({props:{history:l[0]}}),e.$on("nodeclick",l[30]),e.$on("close",l[31]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function G0(l){let e,t;return e=new Va({props:{history:l[0],overlay:l[13]}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),o[0]&8192&&(s.overlay=n[13]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function q0(l){let e,t,n,o;function s(r){l[28](r)}let i={submitPrompt:l[8],stopResponse:l[9],modelId:l[11],chatId:l[6],eventTarget:l[7]};return l[3]!==void 0&&(i.files=l[3]),t=new Da({props:i}),je.push(()=>qe(t,"files",s)),t.$on("close",l[29]),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(r){e=N(r,"DIV",{class:!0});var a=C(e);oe(t.$$.fragment,a),a.forEach(p),this.h()},h(){m(e,"class","w-full h-full flex justify-center")},m(r,a){B(r,e,a),te(t,e,null),o=!0},p(r,a){const c={};a[0]&256&&(c.submitPrompt=r[8]),a[0]&512&&(c.stopResponse=r[9]),a[0]&2048&&(c.modelId=r[11]),a[0]&64&&(c.chatId=r[6]),a[0]&128&&(c.eventTarget=r[7]),!n&&a[0]&8&&(n=!0,c.files=r[3],Ge(()=>n=!1)),t.$set(c)},i(r){o||(S(t.$$.fragment,r),o=!0)},o(r){P(t.$$.fragment,r),o=!1},d(r){r&&p(e),ne(t)}}}function J0(l){let e,t,n=l[16]&&gi(l);return{c(){n&&n.c(),e=Ue()},l(o){n&&n.l(o),e=Ue()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[16]?n?(n.p(o,s),s[0]&65536&&S(n,1)):(n=gi(o),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(Oe(),P(n,1,1,()=>{n=null}),He())},i(o){t||(S(n),t=!0)},o(o){P(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function _i(l){let e,t;return e=new ou({props:{show:l[16],$$slots:{default:[t_]},$$scope:{ctx:l}}}),e.$on("close",l[27]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&65536&&(s.show=n[16]),o[0]&430063|o[1]&4096&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Q0(l){let e,t,n,o;function s(a){l[24](a)}function i(a){l[25](a)}let r={models:l[5]};return l[1]!==void 0&&(r.chatFiles=l[1]),l[2]!==void 0&&(r.params=l[2]),e=new Ca({props:r}),je.push(()=>qe(e,"chatFiles",s)),je.push(()=>qe(e,"params",i)),e.$on("close",l[26]),{c(){ee(e.$$.fragment)},l(a){oe(e.$$.fragment,a)},m(a,c){te(e,a,c),o=!0},p(a,c){const u={};c[0]&32&&(u.models=a[5]),!t&&c[0]&2&&(t=!0,u.chatFiles=a[1],Ge(()=>t=!1)),!n&&c[0]&4&&(n=!0,u.params=a[2],Ge(()=>n=!1)),e.$set(u)},i(a){o||(S(e.$$.fragment,a),o=!0)},o(a){P(e.$$.fragment,a),o=!1},d(a){ne(e,a)}}}function x0(l){let e,t;return e=new Ta({props:{history:l[0]}}),e.$on("nodeclick",l[22]),e.$on("close",l[23]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function $0(l){let e,t;return e=new Va({props:{history:l[0]}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function e_(l){let e,t,n,o;function s(r){l[20](r)}let i={submitPrompt:l[8],stopResponse:l[9],modelId:l[11],chatId:l[6],eventTarget:l[7]};return l[3]!==void 0&&(i.files=l[3]),t=new Da({props:i}),je.push(()=>qe(t,"files",s)),t.$on("close",l[21]),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(r){e=N(r,"DIV",{class:!0});var a=C(e);oe(t.$$.fragment,a),a.forEach(p),this.h()},h(){m(e,"class","h-full max-h-[100dvh] bg-white text-gray-700 dark:bg-black dark:text-gray-300 flex justify-center")},m(r,a){B(r,e,a),te(t,e,null),o=!0},p(r,a){const c={};a[0]&256&&(c.submitPrompt=r[8]),a[0]&512&&(c.stopResponse=r[9]),a[0]&2048&&(c.modelId=r[11]),a[0]&64&&(c.chatId=r[6]),a[0]&128&&(c.eventTarget=r[7]),!n&&a[0]&8&&(n=!0,c.files=r[3],Ge(()=>n=!1)),t.$set(c)},i(r){o||(S(t.$$.fragment,r),o=!0)},o(r){P(t.$$.fragment,r),o=!1},d(r){r&&p(e),ne(t)}}}function t_(l){let e,t,n,o,s;const i=[e_,$0,x0,Q0],r=[];function a(c,u){return c[15]?0:c[18]?1:c[17]?2:3}return t=a(l),n=r[t]=i[t](l),{c(){e=z("div"),n.c(),this.h()},l(c){e=N(c,"DIV",{class:!0});var u=C(e);n.l(u),u.forEach(p),this.h()},h(){m(e,"class",o=(l[15]||l[17]||l[18]?" h-screen  w-full":"px-6 py-4")+" h-full")},m(c,u){B(c,e,u),r[t].m(e,null),s=!0},p(c,u){let f=t;t=a(c),t===f?r[t].p(c,u):(Oe(),P(r[f],1,1,()=>{r[f]=null}),He(),n=r[t],n?n.p(c,u):(n=r[t]=i[t](c),n.c()),S(n,1),n.m(e,null)),(!s||u[0]&425984&&o!==(o=(c[15]||c[17]||c[18]?" h-screen  w-full":"px-6 py-4")+" h-full"))&&m(e,"class",o)},i(c){s||(S(n),s=!0)},o(c){P(n),s=!1},d(c){c&&p(e),r[t].d()}}}function n_(l){let e,t,n,o;const s=[Y0,F0],i=[];function r(a,c){return a[12]?1:0}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ue()},l(a){t.l(a),n=Ue()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(Oe(),P(i[u],1,1,()=>{i[u]=null}),He(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){P(t),o=!1},d(a){a&&p(n),i[e].d(a)}}}function l_(l){let e,t;return e=new j1({props:{$$slots:{default:[n_]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[0]&524287|o[1]&4096&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function o_(l,e,t){let n,o,s,i;ce(l,wn,ae=>t(15,n=ae)),ce(l,At,ae=>t(16,o=ae)),ce(l,Fn,ae=>t(17,s=ae)),ce(l,Rn,ae=>t(18,i=ae));let{history:r}=e,{models:a=[]}=e,{chatId:c=null}=e,{chatFiles:u=[]}=e,{params:f={}}=e,{eventTarget:h}=e,{submitPrompt:d}=e,{stopResponse:_}=e,{showMessage:b}=e,{files:v}=e,{modelId:g}=e,{pane:w}=e,y,k=!1,I=!1,V=0;const T=()=>{parseInt(localStorage==null?void 0:localStorage.chatControlsSize)?w.resize(parseInt(localStorage==null?void 0:localStorage.chatControlsSize)):w.resize(V)},L=async ae=>{ae.matches?(t(12,k=!0),n&&(wn.set(!1),await Qe(),wn.set(!0))):(t(12,k=!1),n&&(wn.set(!1),await Qe(),wn.set(!0)),t(4,w=null))},O=ae=>{t(13,I=!0)},H=ae=>{t(13,I=!1)};gn(()=>{y=window.matchMedia("(min-width: 1024px)"),y.addEventListener("change",L),L(y);const ae=document.getElementById("chat-container");t(14,V=Math.floor(350/ae.clientWidth*100)),new ResizeObserver(Ie=>{for(let Je of Ie){const rt=350/Je.contentRect.width*100;t(14,V=Math.floor(rt)),o&&w&&w.isExpanded()&&w.getSize()<V&&w.resize(V)}}).observe(ae),document.addEventListener("mousedown",O),document.addEventListener("mouseup",H)}),$n(()=>{At.set(!1),y.removeEventListener("change",L),document.removeEventListener("mousedown",O),document.removeEventListener("mouseup",H)});const F=()=>{At.set(!1),Fn.set(!1),Rn.set(!1),n&&wn.set(!1)};function Y(ae){v=ae,t(3,v)}const G=()=>{At.set(!1)},D=ae=>{b(ae.detail.node.data.message)},K=()=>{At.set(!1)};function M(ae){u=ae,t(1,u)}function W(ae){f=ae,t(2,f)}const j=()=>{At.set(!1)},Z=()=>{At.set(!1)};function A(ae){v=ae,t(3,v)}const X=()=>{At.set(!1)},q=ae=>{ae.detail.node.data.message.favorite?t(0,r.messages[ae.detail.node.data.message.id].favorite=!0,r):t(0,r.messages[ae.detail.node.data.message.id].favorite=null,r),b(ae.detail.node.data.message)},se=()=>{At.set(!1)};function J(ae){u=ae,t(1,u)}function me(ae){f=ae,t(2,f)}const _e=()=>{At.set(!1)},ie=ae=>{console.log("size",ae,V),o&&w.isExpanded()&&(ae<V&&w.resize(V),ae<V?localStorage.chatControlsSize=0:localStorage.chatControlsSize=ae)},le=()=>{At.set(!1)};function Pe(ae){w=ae,t(4,w)}return l.$$set=ae=>{"history"in ae&&t(0,r=ae.history),"models"in ae&&t(5,a=ae.models),"chatId"in ae&&t(6,c=ae.chatId),"chatFiles"in ae&&t(1,u=ae.chatFiles),"params"in ae&&t(2,f=ae.params),"eventTarget"in ae&&t(7,h=ae.eventTarget),"submitPrompt"in ae&&t(8,d=ae.submitPrompt),"stopResponse"in ae&&t(9,_=ae.stopResponse),"showMessage"in ae&&t(10,b=ae.showMessage),"files"in ae&&t(3,v=ae.files),"modelId"in ae&&t(11,g=ae.modelId),"pane"in ae&&t(4,w=ae.pane)},l.$$.update=()=>{l.$$.dirty[0]&64&&(c||F())},[r,u,f,v,w,a,c,h,d,_,b,g,k,I,V,n,o,s,i,T,Y,G,D,K,M,W,j,Z,A,X,q,se,J,me,_e,ie,le,Pe]}class s_ extends Ae{constructor(e){super(),Le(this,e,o_,l_,We,{history:0,models:5,chatId:6,chatFiles:1,params:2,eventTarget:7,submitPrompt:8,stopResponse:9,showMessage:10,files:3,modelId:11,pane:4,openPane:19},null,[-1,-1])}get openPane(){return this.$$.ctx[19]}}function pi(l,e,t){const n=l.slice();return n[33]=e[t],n[35]=t,n}function bi(l){let e,t;return e=new Xt({props:{content:"This chat won't appear in history and your messages will not be saved.",className:"w-full flex justify-center mb-0.5",placement:"top",$$slots:{default:[r_]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function r_(l){let e,t,n,o;return t=new Fc({props:{strokeWidth:"2.5",className:"size-5"}}),{c(){e=z("div"),ee(t.$$.fragment),n=Ce(" Temporary Chat"),this.h()},l(s){e=N(s,"DIV",{class:!0});var i=C(e);oe(t.$$.fragment,i),n=De(i," Temporary Chat"),i.forEach(p),this.h()},h(){m(e,"class","flex items-center gap-2 text-gray-500 font-medium text-lg my-2 w-fit")},m(s,i){B(s,e,i),te(t,e,null),E(e,n),o=!0},p:we,i(s){o||(S(t.$$.fragment,s),o=!0)},o(s){P(t.$$.fragment,s),o=!1},d(s){s&&p(e),ne(t)}}}function i_(l){let e,t,n,o,s,i;function r(){return l[22](l[35])}return{c(){e=z("button"),t=z("img"),o=x(),this.h()},l(a){e=N(a,"BUTTON",{});var c=C(e);t=N(c,"IMG",{crossorigin:!0,src:!0,class:!0,alt:!0,draggable:!0}),c.forEach(p),o=$(a),this.h()},h(){var a,c,u;m(t,"crossorigin","anonymous"),Xn(t.src,n=((u=(c=(a=l[33])==null?void 0:a.info)==null?void 0:c.meta)==null?void 0:u.profile_image_url)??(l[14].language==="dg-DG"?"/doge.png":`${Tl}/static/favicon.png`))||m(t,"src",n),m(t,"class","size-9 sm:size-10 rounded-full border-[1px] border-gray-200 dark:border-none"),m(t,"alt","logo"),m(t,"draggable","false")},m(a,c){B(a,e,c),E(e,t),B(a,o,c),s||(i=ke(e,"click",r),s=!0)},p(a,c){var u,f,h;l=a,c[0]&20480&&!Xn(t.src,n=((h=(f=(u=l[33])==null?void 0:u.info)==null?void 0:f.meta)==null?void 0:h.profile_image_url)??(l[14].language==="dg-DG"?"/doge.png":`${Tl}/static/favicon.png`))&&m(t,"src",n)},d(a){a&&(p(e),p(o)),s=!1,i()}}}function vi(l){var n,o,s;let e,t;return e=new Xt({props:{content:(((s=(o=(n=l[12][l[35]])==null?void 0:n.info)==null?void 0:o.meta)==null?void 0:s.tags)??[]).map(ki).join(", "),placement:"top",$$slots:{default:[i_]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){te(e,i,r),t=!0},p(i,r){var c,u,f;const a={};r[0]&4096&&(a.content=(((f=(u=(c=i[12][i[35]])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.tags)??[]).map(ki).join(", ")),r[0]&28672|r[1]&32&&(a.$$scope={dirty:r,ctx:i}),e.$set(a)},i(i){t||(S(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){ne(e,i)}}}function a_(l){let e=l[14].t("Hello, {{name}}",{name:l[16].name})+"",t;return{c(){t=Ce(e)},l(n){t=De(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&81920&&e!==(e=n[14].t("Hello, {{name}}",{name:n[16].name})+"")&&Ne(t,e)},d(n){n&&p(t)}}}function c_(l){var n;let e=((n=l[12][l[13]])==null?void 0:n.name)+"",t;return{c(){t=Ce(e)},l(o){t=De(o,e)},m(o,s){B(o,t,s)},p(o,s){var i;s[0]&12288&&e!==(e=((i=o[12][o[13]])==null?void 0:i.name)+"")&&Ne(t,e)},d(o){o&&p(t)}}}function wi(l){var i,r,a,c,u,f;let e,t,n,o;e=new Xt({props:{className:" w-fit",content:yl.parse(oo(((a=(r=(i=l[12][l[13]])==null?void 0:i.info)==null?void 0:r.meta)==null?void 0:a.description)??"")),placement:"top",$$slots:{default:[u_]},$$scope:{ctx:l}}});let s=((f=(u=(c=l[12][l[13]])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.user)&&yi(l);return{c(){ee(e.$$.fragment),t=x(),s&&s.c(),n=Ue()},l(h){oe(e.$$.fragment,h),t=$(h),s&&s.l(h),n=Ue()},m(h,d){te(e,h,d),B(h,t,d),s&&s.m(h,d),B(h,n,d),o=!0},p(h,d){var b,v,g,w,y,k;const _={};d[0]&12288&&(_.content=yl.parse(oo(((g=(v=(b=h[12][h[13]])==null?void 0:b.info)==null?void 0:v.meta)==null?void 0:g.description)??""))),d[0]&12288|d[1]&32&&(_.$$scope={dirty:d,ctx:h}),e.$set(_),(k=(y=(w=h[12][h[13]])==null?void 0:w.info)==null?void 0:y.meta)!=null&&k.user?s?s.p(h,d):(s=yi(h),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i(h){o||(S(e.$$.fragment,h),o=!0)},o(h){P(e.$$.fragment,h),o=!1},d(h){h&&(p(t),p(n)),ne(e,h),s&&s.d(h)}}}function u_(l){var o,s,i;let e,t,n=yl.parse(oo((i=(s=(o=l[12][l[13]])==null?void 0:o.info)==null?void 0:s.meta)==null?void 0:i.description))+"";return{c(){e=z("div"),t=new Mi(!1),this.h()},l(r){e=N(r,"DIV",{class:!0});var a=C(e);t=Ti(a,!1),a.forEach(p),this.h()},h(){t.a=null,m(e,"class","mt-0.5 px-2 text-sm font-normal text-gray-500 dark:text-gray-400 line-clamp-2 max-w-xl markdown")},m(r,a){B(r,e,a),t.m(n,e)},p(r,a){var c,u,f;a[0]&12288&&n!==(n=yl.parse(oo((f=(u=(c=r[12][r[13]])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.description))+"")&&t.p(n)},d(r){r&&p(e)}}}function yi(l){let e,t;function n(i,r){var a,c,u;return(u=(c=(a=i[12][i[13]])==null?void 0:a.info)==null?void 0:c.meta)!=null&&u.user.community?d_:f_}let o=n(l),s=o(l);return{c(){e=z("div"),t=Ce(`By
								`),s.c(),this.h()},l(i){e=N(i,"DIV",{class:!0});var r=C(e);t=De(r,`By
								`),s.l(r),r.forEach(p),this.h()},h(){m(e,"class","mt-0.5 text-sm font-normal text-gray-400 dark:text-gray-500")},m(i,r){B(i,e,r),E(e,t),s.m(e,null)},p(i,r){o===(o=n(i))&&s?s.p(i,r):(s.d(1),s=o(i),s&&(s.c(),s.m(e,null)))},d(i){i&&p(e),s.d()}}}function f_(l){var n,o,s;let e=((s=(o=(n=l[12][l[13]])==null?void 0:n.info)==null?void 0:o.meta)==null?void 0:s.user.name)+"",t;return{c(){t=Ce(e)},l(i){t=De(i,e)},m(i,r){B(i,t,r)},p(i,r){var a,c,u;r[0]&12288&&e!==(e=((u=(c=(a=i[12][i[13]])==null?void 0:a.info)==null?void 0:c.meta)==null?void 0:u.user.name)+"")&&Ne(t,e)},d(i){i&&p(t)}}}function d_(l){var s,i,r,a,c,u,f,h,d;let e,t=((r=(i=(s=l[12][l[13]])==null?void 0:s.info)==null?void 0:i.meta)!=null&&r.user.name?(u=(c=(a=l[12][l[13]])==null?void 0:a.info)==null?void 0:c.meta)==null?void 0:u.user.name:`@${(d=(h=(f=l[12][l[13]])==null?void 0:f.info)==null?void 0:h.meta)==null?void 0:d.user.username}`)+"",n,o;return{c(){e=z("a"),n=Ce(t),this.h()},l(_){e=N(_,"A",{href:!0});var b=C(e);n=De(b,t),b.forEach(p),this.h()},h(){var _,b,v;m(e,"href",o="https://openwebui.com/m/"+((v=(b=(_=l[12][l[13]])==null?void 0:_.info)==null?void 0:b.meta)==null?void 0:v.user.username))},m(_,b){B(_,e,b),E(e,n)},p(_,b){var v,g,w,y,k,I,V,T,L,O,H,F;b[0]&12288&&t!==(t=((w=(g=(v=_[12][_[13]])==null?void 0:v.info)==null?void 0:g.meta)!=null&&w.user.name?(I=(k=(y=_[12][_[13]])==null?void 0:y.info)==null?void 0:k.meta)==null?void 0:I.user.name:`@${(L=(T=(V=_[12][_[13]])==null?void 0:V.info)==null?void 0:T.meta)==null?void 0:L.user.username}`)+"")&&Ne(n,t),b[0]&12288&&o!==(o="https://openwebui.com/m/"+((F=(H=(O=_[12][_[13]])==null?void 0:O.info)==null?void 0:H.meta)==null?void 0:F.user.username))&&m(e,"href",o)},d(_){_&&p(e)}}}function h_(l){var Je,he,rt,it,Rt,Mt,bt;let e,t,n,o,s,i,r,a,c,u,f,h,d,_,b,v,g,w,y,k,I,V,T,L,O,H,F,Y,G,D,K,M,W=l[15]&&bi(l),j=wt(l[12]),Z=[];for(let pe=0;pe<j.length;pe+=1)Z[pe]=vi(pi(l,j,pe));const A=pe=>P(Z[pe],1,1,()=>{Z[pe]=null});function X(pe,Xe){var lt;return(lt=pe[12][pe[13]])!=null&&lt.name?c_:a_}let q=X(l),se=q(l),J=(((rt=(he=(Je=l[12][l[13]])==null?void 0:Je.info)==null?void 0:he.meta)==null?void 0:rt.description)??null)&&wi(l);function me(pe){l[23](pe)}function _e(pe){l[24](pe)}function ie(pe){l[25](pe)}function le(pe){l[26](pe)}function Pe(pe){l[27](pe)}function ae(pe){l[28](pe)}function Re(pe){l[29](pe)}let Ie={history:l[11],selectedModels:l[10],transparentBackground:l[7],stopResponse:l[9],createMessagePair:l[8],placeholder:l[14].t("How can I help you today?")};return l[3]!==void 0&&(Ie.files=l[3]),l[2]!==void 0&&(Ie.prompt=l[2]),l[0]!==void 0&&(Ie.autoScroll=l[0]),l[4]!==void 0&&(Ie.selectedToolIds=l[4]),l[5]!==void 0&&(Ie.imageGenerationEnabled=l[5]),l[6]!==void 0&&(Ie.webSearchEnabled=l[6]),l[1]!==void 0&&(Ie.atSelectedModel=l[1]),w=new Xi({props:Ie}),je.push(()=>qe(w,"files",me)),je.push(()=>qe(w,"prompt",_e)),je.push(()=>qe(w,"autoScroll",ie)),je.push(()=>qe(w,"selectedToolIds",le)),je.push(()=>qe(w,"imageGenerationEnabled",Pe)),je.push(()=>qe(w,"webSearchEnabled",ae)),je.push(()=>qe(w,"atSelectedModel",Re)),w.$on("upload",l[30]),w.$on("submit",l[31]),D=new jc({props:{suggestionPrompts:((Mt=(Rt=(it=l[12][l[13]])==null?void 0:it.info)==null?void 0:Rt.meta)==null?void 0:Mt.suggestion_prompts)??((bt=l[17])==null?void 0:bt.default_prompt_suggestions)??[]}}),D.$on("select",l[32]),{c(){e=z("div"),W&&W.c(),t=x(),n=z("div"),o=z("div"),s=z("div"),i=z("div"),r=z("div");for(let pe=0;pe<Z.length;pe+=1)Z[pe].c();c=x(),u=z("div"),se.c(),h=x(),d=z("div"),_=z("div"),J&&J.c(),v=x(),g=z("div"),ee(w.$$.fragment),F=x(),Y=z("div"),G=z("div"),ee(D.$$.fragment),this.h()},l(pe){e=N(pe,"DIV",{class:!0});var Xe=C(e);W&&W.l(Xe),t=$(Xe),n=N(Xe,"DIV",{class:!0});var lt=C(n);o=N(lt,"DIV",{class:!0});var ht=C(o);s=N(ht,"DIV",{class:!0});var pt=C(s);i=N(pt,"DIV",{class:!0});var fe=C(i);r=N(fe,"DIV",{class:!0});var Et=C(r);for(let Be=0;Be<Z.length;Be+=1)Z[Be].l(Et);Et.forEach(p),fe.forEach(p),c=$(pt),u=N(pt,"DIV",{class:!0});var mt=C(u);se.l(mt),mt.forEach(p),pt.forEach(p),h=$(ht),d=N(ht,"DIV",{class:!0});var vt=C(d);_=N(vt,"DIV",{});var Me=C(_);J&&J.l(Me),Me.forEach(p),vt.forEach(p),v=$(ht),g=N(ht,"DIV",{class:!0});var Vt=C(g);oe(w.$$.fragment,Vt),Vt.forEach(p),ht.forEach(p),lt.forEach(p),F=$(Xe),Y=N(Xe,"DIV",{class:!0});var ue=C(Y);G=N(ue,"DIV",{class:!0});var Te=C(G);oe(D.$$.fragment,Te),Te.forEach(p),ue.forEach(p),Xe.forEach(p),this.h()},h(){m(r,"class","flex -space-x-4 mb-0.5"),m(i,"class","flex flex-shrink-0 justify-center"),m(u,"class","text-3xl sm:text-4xl line-clamp-1"),m(s,"class","flex flex-row justify-center gap-3 sm:gap-3.5 w-fit px-5"),m(d,"class","flex mt-1 mb-2"),m(g,"class",H="text-base font-normal xl:translate-x-6 md:max-w-3xl w-full py-3 "+(l[1]?"mt-2":"")),m(o,"class","w-full flex flex-col justify-center items-center"),m(n,"class","w-full text-3xl text-gray-800 dark:text-gray-100 font-medium text-center flex items-center gap-4 font-primary"),m(G,"class","mx-5"),m(Y,"class","mx-auto max-w-2xl font-primary"),m(e,"class","m-auto w-full max-w-6xl px-2 xl:px-20 translate-y-6 py-24 text-center")},m(pe,Xe){B(pe,e,Xe),W&&W.m(e,null),E(e,t),E(e,n),E(n,o),E(o,s),E(s,i),E(i,r);for(let lt=0;lt<Z.length;lt+=1)Z[lt]&&Z[lt].m(r,null);E(s,c),E(s,u),se.m(u,null),E(o,h),E(o,d),E(d,_),J&&J.m(_,null),E(o,v),E(o,g),te(w,g,null),E(e,F),E(e,Y),E(Y,G),te(D,G,null),M=!0},p(pe,Xe){var pt,fe,Et,mt,vt,Me,Vt;if(pe[15]?W?Xe[0]&32768&&S(W,1):(W=bi(pe),W.c(),S(W,1),W.m(e,t)):W&&(Oe(),P(W,1,1,()=>{W=null}),He()),Xe[0]&28672){j=wt(pe[12]);let ue;for(ue=0;ue<j.length;ue+=1){const Te=pi(pe,j,ue);Z[ue]?(Z[ue].p(Te,Xe),S(Z[ue],1)):(Z[ue]=vi(Te),Z[ue].c(),S(Z[ue],1),Z[ue].m(r,null))}for(Oe(),ue=j.length;ue<Z.length;ue+=1)A(ue);He()}q===(q=X(pe))&&se?se.p(pe,Xe):(se.d(1),se=q(pe),se&&(se.c(),se.m(u,null))),((Et=(fe=(pt=pe[12][pe[13]])==null?void 0:pt.info)==null?void 0:fe.meta)==null?void 0:Et.description)??null?J?(J.p(pe,Xe),Xe[0]&12288&&S(J,1)):(J=wi(pe),J.c(),S(J,1),J.m(_,null)):J&&(Oe(),P(J,1,1,()=>{J=null}),He());const lt={};Xe[0]&2048&&(lt.history=pe[11]),Xe[0]&1024&&(lt.selectedModels=pe[10]),Xe[0]&128&&(lt.transparentBackground=pe[7]),Xe[0]&512&&(lt.stopResponse=pe[9]),Xe[0]&256&&(lt.createMessagePair=pe[8]),Xe[0]&16384&&(lt.placeholder=pe[14].t("How can I help you today?")),!y&&Xe[0]&8&&(y=!0,lt.files=pe[3],Ge(()=>y=!1)),!k&&Xe[0]&4&&(k=!0,lt.prompt=pe[2],Ge(()=>k=!1)),!I&&Xe[0]&1&&(I=!0,lt.autoScroll=pe[0],Ge(()=>I=!1)),!V&&Xe[0]&16&&(V=!0,lt.selectedToolIds=pe[4],Ge(()=>V=!1)),!T&&Xe[0]&32&&(T=!0,lt.imageGenerationEnabled=pe[5],Ge(()=>T=!1)),!L&&Xe[0]&64&&(L=!0,lt.webSearchEnabled=pe[6],Ge(()=>L=!1)),!O&&Xe[0]&2&&(O=!0,lt.atSelectedModel=pe[1],Ge(()=>O=!1)),w.$set(lt),(!M||Xe[0]&2&&H!==(H="text-base font-normal xl:translate-x-6 md:max-w-3xl w-full py-3 "+(pe[1]?"mt-2":"")))&&m(g,"class",H);const ht={};Xe[0]&143360&&(ht.suggestionPrompts=((Me=(vt=(mt=pe[12][pe[13]])==null?void 0:mt.info)==null?void 0:vt.meta)==null?void 0:Me.suggestion_prompts)??((Vt=pe[17])==null?void 0:Vt.default_prompt_suggestions)??[]),D.$set(ht)},i(pe){if(!M){S(W);for(let Xe=0;Xe<j.length;Xe+=1)S(Z[Xe]);pe&&(a||Qn(()=>{a=Xl(r,gl,{duration:100}),a.start()})),pe&&(f||Qn(()=>{f=Xl(u,gl,{duration:100}),f.start()})),S(J),pe&&(b||Qn(()=>{b=Xl(_,gl,{duration:100,delay:50}),b.start()})),S(w.$$.fragment,pe),S(D.$$.fragment,pe),pe&&(K||Qn(()=>{K=Xl(Y,gl,{duration:200,delay:200}),K.start()})),M=!0}},o(pe){P(W),Z=Z.filter(Boolean);for(let Xe=0;Xe<Z.length;Xe+=1)P(Z[Xe]);P(J),P(w.$$.fragment,pe),P(D.$$.fragment,pe),M=!1},d(pe){pe&&p(e),W&&W.d(),Sn(Z,pe),se.d(),J&&J.d(),ne(w),ne(D)}}}const ki=l=>l.name.toUpperCase();function m_(l,e,t){let n,o,s,i,r;ce(l,cl,A=>t(21,n=A)),ce(l,go,A=>t(15,s=A)),ce(l,Kn,A=>t(16,i=A)),ce(l,Al,A=>t(17,r=A));const a=tn(),c=Lt("i18n");ce(l,c,A=>t(14,o=A));let{transparentBackground:u=!1}=e,{createMessagePair:f}=e,{stopResponse:h}=e,{autoScroll:d=!1}=e,{atSelectedModel:_}=e,{selectedModels:b}=e,{history:v}=e,{prompt:g=""}=e,{files:w=[]}=e,{selectedToolIds:y=[]}=e,{imageGenerationEnabled:k=!1}=e,{webSearchEnabled:I=!1}=e,V=[];const T=async A=>{let X=A;if(A.includes("{{CLIPBOARD}}")){const J=await navigator.clipboard.readText().catch(me=>(nt.error(o.t("Failed to read clipboard contents")),"{{CLIPBOARD}}"));X=A.replaceAll("{{CLIPBOARD}}",J),console.log("Clipboard text:",J,X)}t(2,g=X),console.log(g),await Qe();const q=document.getElementById("chat-input-container"),se=document.getElementById("chat-input");q&&(q.style.height="",q.style.height=Math.min(q.scrollHeight,200)+"px"),await Qe(),se&&(se.focus(),se.dispatchEvent(new Event("input"))),await Qe()};let L=0;gn(()=>{});const O=A=>{t(13,L=A)};function H(A){w=A,t(3,w)}function F(A){g=A,t(2,g)}function Y(A){d=A,t(0,d)}function G(A){y=A,t(4,y)}function D(A){k=A,t(5,k)}function K(A){I=A,t(6,I)}function M(A){_=A,t(1,_)}const W=A=>{a("upload",A.detail)},j=A=>{a("submit",A.detail)},Z=A=>{T(A.detail)};return l.$$set=A=>{"transparentBackground"in A&&t(7,u=A.transparentBackground),"createMessagePair"in A&&t(8,f=A.createMessagePair),"stopResponse"in A&&t(9,h=A.stopResponse),"autoScroll"in A&&t(0,d=A.autoScroll),"atSelectedModel"in A&&t(1,_=A.atSelectedModel),"selectedModels"in A&&t(10,b=A.selectedModels),"history"in A&&t(11,v=A.history),"prompt"in A&&t(2,g=A.prompt),"files"in A&&t(3,w=A.files),"selectedToolIds"in A&&t(4,y=A.selectedToolIds),"imageGenerationEnabled"in A&&t(5,k=A.imageGenerationEnabled),"webSearchEnabled"in A&&t(6,I=A.webSearchEnabled)},l.$$.update=()=>{l.$$.dirty[0]&2098176&&t(12,V=b.map(A=>n.find(X=>X.id===A))),l.$$.dirty[0]&5120&&b.length>0&&t(13,L=V.length-1)},[d,_,g,w,y,k,I,u,f,h,b,v,V,L,o,s,i,r,a,c,T,n,O,H,F,Y,G,D,K,M,W,j,Z]}class g_ extends Ae{constructor(e){super(),Le(this,e,m_,h_,We,{transparentBackground:7,createMessagePair:8,stopResponse:9,autoScroll:0,atSelectedModel:1,selectedModels:10,history:11,prompt:2,files:3,selectedToolIds:4,imageGenerationEnabled:5,webSearchEnabled:6},null,[-1,-1])}}const{document:Ao}=Ni;function Ei(l,e,t){const n=l.slice();return n[115]=e[t],n}function Ii(l){var u;let e,t,n,o,s,i,r=(((u=l[26])==null?void 0:u.backgroundImageUrl)??null)&&Si(l);function a(f){l[54](f)}let c={chat:{id:l[25],chat:{title:l[28],models:l[1],system:l[26].system??void 0,params:l[24],history:l[20],timestamp:Date.now()}},title:l[28],shareEnabled:!!l[20].currentId,initNewChat:l[38]};return l[1]!==void 0&&(c.selectedModels=l[1]),t=new jd({props:c}),l[53](t),je.push(()=>qe(t,"selectedModels",a)),s=new Ra({props:{direction:"horizontal",class:"w-full h-full",$$slots:{default:[v_]},$$scope:{ctx:l}}}),{c(){r&&r.c(),e=x(),ee(t.$$.fragment),o=x(),ee(s.$$.fragment)},l(f){r&&r.l(f),e=$(f),oe(t.$$.fragment,f),o=$(f),oe(s.$$.fragment,f)},m(f,h){r&&r.m(f,h),B(f,e,h),te(t,f,h),B(f,o,h),te(s,f,h),i=!0},p(f,h){var b;((b=f[26])==null?void 0:b.backgroundImageUrl)??null?r?r.p(f,h):(r=Si(f),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null);const d={};h[0]&386924546&&(d.chat={id:f[25],chat:{title:f[28],models:f[1],system:f[26].system??void 0,params:f[24],history:f[20],timestamp:Date.now()}}),h[0]&268435456&&(d.title=f[28]),h[0]&1048576&&(d.shareEnabled=!!f[20].currentId),!n&&h[0]&2&&(n=!0,d.selectedModels=f[1],Ge(()=>n=!1)),t.$set(d);const _={};h[0]&268370166|h[1]&1|h[3]&33554432&&(_.$$scope={dirty:h,ctx:f}),s.$set(_)},i(f){i||(S(t.$$.fragment,f),S(s.$$.fragment,f),i=!0)},o(f){P(t.$$.fragment,f),P(s.$$.fragment,f),i=!1},d(f){f&&(p(e),p(o)),r&&r.d(f),l[53](null),ne(t,f),ne(s,f)}}}function Si(l){let e,t,n,o;return{c(){e=z("div"),n=x(),o=z("div"),this.h()},l(s){e=N(s,"DIV",{class:!0,style:!0}),C(e).forEach(p),n=$(s),o=N(s,"DIV",{class:!0}),C(o).forEach(p),this.h()},h(){m(e,"class",t="absolute "+(l[30]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat"),et(e,"background-image","url("+l[26].backgroundImageUrl+")"),m(o,"class","absolute top-0 left-0 w-full h-full bg-gradient-to-t from-white to-white/85 dark:from-gray-900 dark:to-[#171717]/90 z-0")},m(s,i){B(s,e,i),B(s,n,i),B(s,o,i)},p(s,i){i[0]&1073741824&&t!==(t="absolute "+(s[30]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat")&&m(e,"class",t),i[0]&67108864&&et(e,"background-image","url("+s[26].backgroundImageUrl+")")},d(s){s&&(p(e),p(n),p(o))}}}function Ci(l){let e,t,n,o=wt(l[31].filter(l[55])),s=[];for(let r=0;r<o.length;r+=1)s[r]=Di(Ei(l,o,r));const i=r=>P(s[r],1,1,()=>{s[r]=null});return{c(){e=z("div"),t=z("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=N(r,"DIV",{class:!0});var a=C(e);t=N(a,"DIV",{class:!0});var c=C(t);for(let u=0;u<s.length;u+=1)s[u].l(c);c.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","flex flex-col gap-1 w-full"),m(e,"class","absolute top-12 left-0 right-0 w-full z-30")},m(r,a){B(r,e,a),E(e,t);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(t,null);n=!0},p(r,a){if(a[1]&1){o=wt(r[31].filter(r[55]));let c;for(c=0;c<o.length;c+=1){const u=Ei(r,o,c);s[c]?(s[c].p(u,a),S(s[c],1)):(s[c]=Di(u),s[c].c(),S(s[c],1),s[c].m(t,null))}for(Oe(),c=o.length;c<s.length;c+=1)i(c);He()}},i(r){if(!n){for(let a=0;a<o.length;a+=1)S(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)P(s[a]);n=!1},d(r){r&&p(e),Sn(s,r)}}}function Di(l){let e,t;return e=new Ou({props:{banner:l[115]}}),e.$on("dismiss",l[56]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o[1]&1&&(s.banner=n[115]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function __(l){var y;let e,t,n,o,s,i,r,a,c,u;function f(k){l[72](k)}function h(k){l[73](k)}function d(k){l[74](k)}function _(k){l[75](k)}function b(k){l[76](k)}function v(k){l[77](k)}function g(k){l[78](k)}let w={history:l[20],selectedModels:l[1],transparentBackground:((y=l[26])==null?void 0:y.backgroundImageUrl)??!1,stopResponse:l[45],createMessagePair:l[41]};return l[23]!==void 0&&(w.files=l[23]),l[21]!==void 0&&(w.prompt=l[21]),l[6]!==void 0&&(w.autoScroll=l[6]),l[17]!==void 0&&(w.selectedToolIds=l[17]),l[18]!==void 0&&(w.imageGenerationEnabled=l[18]),l[19]!==void 0&&(w.webSearchEnabled=l[19]),l[2]!==void 0&&(w.atSelectedModel=l[2]),t=new g_({props:w}),je.push(()=>qe(t,"files",f)),je.push(()=>qe(t,"prompt",h)),je.push(()=>qe(t,"autoScroll",d)),je.push(()=>qe(t,"selectedToolIds",_)),je.push(()=>qe(t,"imageGenerationEnabled",b)),je.push(()=>qe(t,"webSearchEnabled",v)),je.push(()=>qe(t,"atSelectedModel",g)),t.$on("upload",l[79]),t.$on("submit",l[80]),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(k){e=N(k,"DIV",{class:!0});var I=C(e);oe(t.$$.fragment,I),I.forEach(p),this.h()},h(){m(e,"class","overflow-auto w-full h-full flex items-center")},m(k,I){B(k,e,I),te(t,e,null),u=!0},p(k,I){var T;const V={};I[0]&1048576&&(V.history=k[20]),I[0]&2&&(V.selectedModels=k[1]),I[0]&67108864&&(V.transparentBackground=((T=k[26])==null?void 0:T.backgroundImageUrl)??!1),!n&&I[0]&8388608&&(n=!0,V.files=k[23],Ge(()=>n=!1)),!o&&I[0]&2097152&&(o=!0,V.prompt=k[21],Ge(()=>o=!1)),!s&&I[0]&64&&(s=!0,V.autoScroll=k[6],Ge(()=>s=!1)),!i&&I[0]&131072&&(i=!0,V.selectedToolIds=k[17],Ge(()=>i=!1)),!r&&I[0]&262144&&(r=!0,V.imageGenerationEnabled=k[18],Ge(()=>r=!1)),!a&&I[0]&524288&&(a=!0,V.webSearchEnabled=k[19],Ge(()=>a=!1)),!c&&I[0]&4&&(c=!0,V.atSelectedModel=k[2],Ge(()=>c=!1)),t.$set(V)},i(k){u||(S(t.$$.fragment,k),u=!0)},o(k){P(t.$$.fragment,k),u=!1},d(k){k&&p(e),ne(t)}}}function p_(l){var Z;let e,t,n,o,s,i,r,a,c,u,f,h,d,_,b,v,g,w,y="",k,I,V;function T(A){l[57](A)}function L(A){l[58](A)}function O(A){l[59](A)}let H={chatId:l[25],selectedModels:l[1],sendPrompt:l[44],showMessage:l[34],submitMessage:l[46],continueResponse:l[48],regenerateResponse:l[47],mergeResponses:l[49],chatActionHandler:l[40],addMessages:l[42],bottomPadding:l[23].length>0};l[20]!==void 0&&(H.history=l[20]),l[6]!==void 0&&(H.autoScroll=l[6]),l[21]!==void 0&&(H.prompt=l[21]),n=new Yc({props:H}),je.push(()=>qe(n,"history",T)),je.push(()=>qe(n,"autoScroll",L)),je.push(()=>qe(n,"prompt",O));function F(A){l[63](A)}function Y(A){l[64](A)}function G(A){l[65](A)}function D(A){l[66](A)}function K(A){l[67](A)}function M(A){l[68](A)}function W(A){l[69](A)}let j={history:l[20],selectedModels:l[1],transparentBackground:((Z=l[26])==null?void 0:Z.backgroundImageUrl)??!1,stopResponse:l[45],createMessagePair:l[41],onChange:l[62]};return l[23]!==void 0&&(j.files=l[23]),l[21]!==void 0&&(j.prompt=l[21]),l[6]!==void 0&&(j.autoScroll=l[6]),l[17]!==void 0&&(j.selectedToolIds=l[17]),l[18]!==void 0&&(j.imageGenerationEnabled=l[18]),l[19]!==void 0&&(j.webSearchEnabled=l[19]),l[2]!==void 0&&(j.atSelectedModel=l[2]),c=new Xi({props:j}),je.push(()=>qe(c,"files",F)),je.push(()=>qe(c,"prompt",Y)),je.push(()=>qe(c,"autoScroll",G)),je.push(()=>qe(c,"selectedToolIds",D)),je.push(()=>qe(c,"imageGenerationEnabled",K)),je.push(()=>qe(c,"webSearchEnabled",M)),je.push(()=>qe(c,"atSelectedModel",W)),c.$on("upload",l[70]),c.$on("submit",l[71]),{c(){e=z("div"),t=z("div"),ee(n.$$.fragment),r=x(),a=z("div"),ee(c.$$.fragment),g=x(),w=z("div"),w.innerHTML=y,this.h()},l(A){e=N(A,"DIV",{class:!0,id:!0});var X=C(e);t=N(X,"DIV",{class:!0});var q=C(t);oe(n.$$.fragment,q),q.forEach(p),X.forEach(p),r=$(A),a=N(A,"DIV",{class:!0});var se=C(a);oe(c.$$.fragment,se),g=$(se),w=N(se,"DIV",{class:!0,"data-svelte-h":!0}),ft(w)!=="svelte-1t2gtm5"&&(w.innerHTML=y),se.forEach(p),this.h()},h(){m(t,"class","h-full w-full flex flex-col"),m(e,"class","pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 max-w-full z-10 scrollbar-hidden"),m(e,"id","messages-container"),m(w,"class","absolute bottom-1 text-xs text-gray-500 text-center line-clamp-1 right-0 left-0"),m(a,"class","pb-[1rem]")},m(A,X){B(A,e,X),E(e,t),te(n,t,null),l[60](e),B(A,r,X),B(A,a,X),te(c,a,null),E(a,g),E(a,w),k=!0,I||(V=ke(e,"scroll",l[61]),I=!0)},p(A,X){var J;const q={};X[0]&33554432&&(q.chatId=A[25]),X[0]&2&&(q.selectedModels=A[1]),X[0]&8388608&&(q.bottomPadding=A[23].length>0),!o&&X[0]&1048576&&(o=!0,q.history=A[20],Ge(()=>o=!1)),!s&&X[0]&64&&(s=!0,q.autoScroll=A[6],Ge(()=>s=!1)),!i&&X[0]&2097152&&(i=!0,q.prompt=A[21],Ge(()=>i=!1)),n.$set(q);const se={};X[0]&1048576&&(se.history=A[20]),X[0]&2&&(se.selectedModels=A[1]),X[0]&67108864&&(se.transparentBackground=((J=A[26])==null?void 0:J.backgroundImageUrl)??!1),X[0]&33554432&&(se.onChange=A[62]),!u&&X[0]&8388608&&(u=!0,se.files=A[23],Ge(()=>u=!1)),!f&&X[0]&2097152&&(f=!0,se.prompt=A[21],Ge(()=>f=!1)),!h&&X[0]&64&&(h=!0,se.autoScroll=A[6],Ge(()=>h=!1)),!d&&X[0]&131072&&(d=!0,se.selectedToolIds=A[17],Ge(()=>d=!1)),!_&&X[0]&262144&&(_=!0,se.imageGenerationEnabled=A[18],Ge(()=>_=!1)),!b&&X[0]&524288&&(b=!0,se.webSearchEnabled=A[19],Ge(()=>b=!1)),!v&&X[0]&4&&(v=!0,se.atSelectedModel=A[2],Ge(()=>v=!1)),c.$set(se)},i(A){k||(S(n.$$.fragment,A),S(c.$$.fragment,A),k=!0)},o(A){P(n.$$.fragment,A),P(c.$$.fragment,A),k=!1},d(A){A&&(p(e),p(r),p(a)),ne(n),l[60](null),ne(c),I=!1,V()}}}function b_(l){let e,t,n,o,s,i,r=l[31].length>0&&!l[20].currentId&&!l[25]&&l[1].length<=1&&Ci(l);const a=[p_,__],c=[];function u(f,h){var d;return h[0]&68157440&&(n=null),n==null&&(n=((d=f[26])==null?void 0:d.landingPageMode)==="chat"||f[39](f[20].currentId).length>0),n?0:1}return o=u(l,[-1,-1,-1,-1]),s=c[o]=a[o](l),{c(){r&&r.c(),e=x(),t=z("div"),s.c(),this.h()},l(f){r&&r.l(f),e=$(f),t=N(f,"DIV",{class:!0});var h=C(t);s.l(h),h.forEach(p),this.h()},h(){m(t,"class","flex flex-col flex-auto z-10 w-full")},m(f,h){r&&r.m(f,h),B(f,e,h),B(f,t,h),c[o].m(t,null),i=!0},p(f,h){f[31].length>0&&!f[20].currentId&&!f[25]&&f[1].length<=1?r?(r.p(f,h),h[0]&34603010|h[1]&1&&S(r,1)):(r=Ci(f),r.c(),S(r,1),r.m(e.parentNode,e)):r&&(Oe(),P(r,1,1,()=>{r=null}),He());let d=o;o=u(f,h),o===d?c[o].p(f,h):(Oe(),P(c[d],1,1,()=>{c[d]=null}),He(),s=c[o],s?s.p(f,h):(s=c[o]=a[o](f),s.c()),S(s,1),s.m(t,null))},i(f){i||(S(r),S(s),i=!0)},o(f){P(r),P(s),i=!1},d(f){f&&(p(e),p(t)),r&&r.d(f),c[o].d()}}}function v_(l){var v;let e,t,n,o,s,i,r,a,c;e=new Pi({props:{defaultSize:50,class:"h-full flex w-full relative",$$slots:{default:[b_]},$$scope:{ctx:l}}});function u(g){l[83](g)}function f(g){l[84](g)}function h(g){l[85](g)}function d(g){l[86](g)}function _(g){l[87](g)}let b={chatId:l[25],modelId:((v=l[16])==null?void 0:v.at(0))??null,models:l[16].reduce(l[81],[]),submitPrompt:l[43],stopResponse:l[45],showMessage:l[34],eventTarget:l[33]};return l[20]!==void 0&&(b.history=l[20]),l[22]!==void 0&&(b.chatFiles=l[22]),l[24]!==void 0&&(b.params=l[24]),l[23]!==void 0&&(b.files=l[23]),l[4]!==void 0&&(b.pane=l[4]),n=new s_({props:b}),l[82](n),je.push(()=>qe(n,"history",u)),je.push(()=>qe(n,"chatFiles",f)),je.push(()=>qe(n,"params",h)),je.push(()=>qe(n,"files",d)),je.push(()=>qe(n,"pane",_)),{c(){ee(e.$$.fragment),t=x(),ee(n.$$.fragment)},l(g){oe(e.$$.fragment,g),t=$(g),oe(n.$$.fragment,g)},m(g,w){te(e,g,w),B(g,t,w),te(n,g,w),c=!0},p(g,w){var I;const y={};w[0]&113115334|w[1]&1|w[3]&33554432&&(y.$$scope={dirty:w,ctx:g}),e.$set(y);const k={};w[0]&33554432&&(k.chatId=g[25]),w[0]&65536&&(k.modelId=((I=g[16])==null?void 0:I.at(0))??null),w[0]&134283264&&(k.models=g[16].reduce(g[81],[])),!o&&w[0]&1048576&&(o=!0,k.history=g[20],Ge(()=>o=!1)),!s&&w[0]&4194304&&(s=!0,k.chatFiles=g[22],Ge(()=>s=!1)),!i&&w[0]&16777216&&(i=!0,k.params=g[24],Ge(()=>i=!1)),!r&&w[0]&8388608&&(r=!0,k.files=g[23],Ge(()=>r=!1)),!a&&w[0]&16&&(a=!0,k.pane=g[4],Ge(()=>a=!1)),n.$set(k)},i(g){c||(S(e.$$.fragment,g),S(n.$$.fragment,g),c=!0)},o(g){P(e.$$.fragment,g),P(n.$$.fragment,g),c=!1},d(g){g&&p(t),ne(e,g),l[82](null),ne(n,g)}}}function w_(l){let e,t,n,o,s,i,r,a,c,u,f;Ao.title=e=`
		`+(l[28]?`${l[28].length>30?`${l[28].slice(0,30)}...`:l[28]} | ${l[29]}`:`${l[29]}`)+`
	`;function h(b){l[50](b)}let d={title:l[10],message:l[11],input:l[12],inputPlaceholder:l[13],inputValue:l[14]};l[9]!==void 0&&(d.show=l[9]),i=new ru({props:d}),je.push(()=>qe(i,"show",h)),i.$on("confirm",l[51]),i.$on("cancel",l[52]);let _=(!l[0]||l[3]&&l[0])&&Ii(l);return{c(){t=x(),n=z("audio"),s=x(),ee(i.$$.fragment),a=x(),c=z("div"),_&&_.c(),this.h()},l(b){Oa("svelte-8uu834",Ao.head).forEach(p),t=$(b),n=N(b,"AUDIO",{id:!0,src:!0,style:!0}),C(n).forEach(p),s=$(b),oe(i.$$.fragment,b),a=$(b),c=N(b,"DIV",{class:!0,id:!0});var g=C(c);_&&_.l(g),g.forEach(p),this.h()},h(){m(n,"id","audioElement"),Xn(n.src,o="")||m(n,"src",o),et(n,"display","none"),m(c,"class",u="h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(l[30]?"  md:max-w-[calc(100%-260px)]":" ")+" w-full max-w-full flex flex-col"),m(c,"id","chat-container")},m(b,v){B(b,t,v),B(b,n,v),B(b,s,v),te(i,b,v),B(b,a,v),B(b,c,v),_&&_.m(c,null),f=!0},p(b,v){(!f||v[0]&805306368)&&e!==(e=`
		`+(b[28]?`${b[28].length>30?`${b[28].slice(0,30)}...`:b[28]} | ${b[29]}`:`${b[29]}`)+`
	`)&&(Ao.title=e);const g={};v[0]&1024&&(g.title=b[10]),v[0]&2048&&(g.message=b[11]),v[0]&4096&&(g.input=b[12]),v[0]&8192&&(g.inputPlaceholder=b[13]),v[0]&16384&&(g.inputValue=b[14]),!r&&v[0]&512&&(r=!0,g.show=b[9],Ge(()=>r=!1)),i.$set(g),!b[0]||b[3]&&b[0]?_?(_.p(b,v),v[0]&9&&S(_,1)):(_=Ii(b),_.c(),S(_,1),_.m(c,null)):_&&(Oe(),P(_,1,1,()=>{_=null}),He()),(!f||v[0]&1073741824&&u!==(u="h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(b[30]?"  md:max-w-[calc(100%-260px)]":" ")+" w-full max-w-full flex flex-col"))&&m(c,"class",u)},i(b){f||(S(i.$$.fragment,b),S(_),f=!0)},o(b){P(i.$$.fragment,b),P(_),f=!1},d(b){b&&(p(t),p(n),p(s),p(a),p(c)),ne(i,b),_&&_.d()}}}function y_(l,e,t){let n,o,s,i,r,a,c,u,f,h,d,_,b,v,g,w,y;ce(l,ol,R=>t(92,n=R)),ce(l,go,R=>t(93,o=R)),ce(l,rl,R=>t(25,s=R)),ce(l,jn,R=>t(26,i=R)),ce(l,cl,R=>t(27,a=R)),ce(l,Ya,R=>t(95,c=R)),ce(l,Kn,R=>t(96,u=R)),ce(l,Al,R=>t(97,f=R)),ce(l,wn,R=>t(98,h=R)),ce(l,Ua,R=>t(99,d=R)),ce(l,Ll,R=>t(100,_=R)),ce(l,il,R=>t(101,b=R)),ce(l,Kl,R=>t(28,v=R)),ce(l,Bi,R=>t(29,g=R)),ce(l,Lo,R=>t(30,w=R)),ce(l,Za,R=>t(31,y=R));const k=Lt("i18n");ce(l,k,R=>t(94,r=R));let{chatIdProp:I=""}=e,V=!1;const T=new EventTarget;let L,O,H=!0,F,Y,G=!1,D="",K="",M=!1,W="",j="",Z=null,A,X=[""],q,se=[],J=[],me=!1,_e=!1,ie=null,le={messages:{},currentId:null},Pe=null,ae="",Re=[],Ie=[],Je={};const he=()=>{X.length===0||X.length===1&&X[0]===""||(sessionStorage.selectedModels=JSON.stringify(X),console.log("saveSessionSelectedModels",X,sessionStorage.selectedModels))},rt=async()=>{var re,ye;if(b||il.set(await Xo(localStorage.token)),X.length!==1)return;const R=a.find(ge=>ge.id===X[0]);R&&t(17,J=(((ye=(re=R==null?void 0:R.info)==null?void 0:re.meta)==null?void 0:ye.toolIds)??[]).filter(ge=>b.find(Ee=>Ee.id===ge)))},it=async R=>{const re=JSON.parse(JSON.stringify(s));let ye=JSON.parse(JSON.stringify(R.id)),ge=le.messages[ye].childrenIds;for(;ge.length!==0;)ye=ge.at(-1),ge=le.messages[ye].childrenIds;t(20,le.currentId=ye,le),await Qe(),await Qe(),await Qe();const Ee=document.getElementById(`message-${R.id}`);Ee&&Ee.scrollIntoView({behavior:"smooth"}),await Qe(),Pt(re)},Rt=async(R,re)=>{var ye,ge;if(console.log(R),R.chat_id===s){await Qe();let Ee=le.messages[R.message_id];if(Ee){const be=((ye=R==null?void 0:R.data)==null?void 0:ye.type)??null,ve=((ge=R==null?void 0:R.data)==null?void 0:ge.data)??null;if(be==="status")Ee!=null&&Ee.statusHistory?Ee.statusHistory.push(ve):Ee.statusHistory=[ve];else if(be==="source"||be==="citation")if((ve==null?void 0:ve.type)==="code_execution"){Ee!=null&&Ee.code_executions||(Ee.code_executions=[]);const Fe=Ee.code_executions.findIndex(tt=>tt.id===ve.id);Fe!==-1?Ee.code_executions[Fe]=ve:Ee.code_executions.push(ve),Ee.code_executions=Ee.code_executions}else Ee!=null&&Ee.sources?Ee.sources.push(ve):Ee.sources=[ve];else if(be==="chat:completion")ue(ve,Ee,R.chat_id);else if(be==="chat:title")Kl.set(ve),ol.set(1),await sl.set(await ml(localStorage.token,n));else if(be==="chat:tags")ie=await Ro(localStorage.token,s),Xa.set(await sc(localStorage.token));else if(be==="message")Ee.content+=ve.content;else if(be==="replace")Ee.content=ve.content;else if(be==="action"){if(ve.action==="continue"){const Fe=document.getElementById("continue-response-button");Fe&&Fe.click()}}else if(be==="confirmation")t(15,Z=re),t(12,M=!1),t(9,G=!0),t(10,D=ve.title),t(11,K=ve.message);else if(be==="execute"){t(15,Z=re);try{const tt=await new Function(`return (async () => { ${ve.code} })()`)();re&&re(tt)}catch(Fe){console.error("Error executing code:",Fe)}}else if(be==="input")t(15,Z=re),t(12,M=!0),t(9,G=!0),t(10,D=ve.title),t(11,K=ve.message),t(13,W=ve.placeholder),t(14,j=(ve==null?void 0:ve.value)??"");else if(be==="notification"){const Fe=(ve==null?void 0:ve.type)??"info",tt=(ve==null?void 0:ve.content)??"";Fe==="success"?nt.success(tt):Fe==="error"?nt.error(tt):Fe==="warning"?nt.warning(tt):nt.info(tt)}else console.log("Unknown message type",ve);t(20,le.messages[R.message_id]=Ee,le)}}},Mt=async R=>{if(R.origin===window.origin){if(R.data.type==="input:prompt"){console.debug(R.data.text);const re=document.getElementById("chat-input");re&&(t(21,ae=R.data.text),re.focus())}R.data.type==="action:submit"&&(console.debug(R.data.text),ae!==""&&(await Qe(),Te(ae))),R.data.type==="input:prompt:submit"&&(console.debug(R.data.text),ae!==""&&(await Qe(),Te(R.data.text)))}};gn(async()=>{if(console.log("mounted"),window.addEventListener("message",Mt),c==null||c.on("chat-events",Rt),s?o&&await Co("/"):A=rl.subscribe(async re=>{re||await lt()}),localStorage.getItem(`chat-input-${I}`))try{const re=JSON.parse(localStorage.getItem(`chat-input-${I}`));t(21,ae=re.prompt),t(23,Ie=re.files),t(17,J=re.selectedToolIds),t(19,_e=re.webSearchEnabled),t(18,me=re.imageGenerationEnabled)}catch{t(21,ae=""),t(23,Ie=[]),t(17,J=[]),t(19,_e=!1),t(18,me=!1)}At.subscribe(async re=>{if(L&&!_)try{re?O.openPane():L.collapse()}catch{}re||(wn.set(!1),Fn.set(!1),Rn.set(!1))});const R=document.getElementById("chat-input");R==null||R.focus(),sl.subscribe(()=>{})}),$n(()=>{A==null||A(),window.removeEventListener("message",Mt),c==null||c.off("chat-events",Rt)});const bt=async R=>{var ge,Ee;if(console.log("Starting uploadGoogleDriveFile with:",{id:R.id,name:R.name,url:R.url,headers:{Authorization:`Bearer ${token}`}}),!(R!=null&&R.id)||!(R!=null&&R.name)||!(R!=null&&R.url)||!((ge=R==null?void 0:R.headers)!=null&&ge.Authorization))throw new Error("Invalid file data provided");const re=Jn(),ye={type:"file",file:"",id:null,url:R.url,name:R.name,collection_name:"",status:"uploading",error:"",itemId:re,size:0};try{t(23,Ie=[...Ie,ye]),console.log("Processing web file with URL:",R.url);const be={headers:{Authorization:R.headers.Authorization,Accept:"*/*"},method:"GET"};console.log("Fetching file content from Google Drive...");const ve=await fetch(R.url,be);if(!ve.ok){const Ot=await ve.text();throw new Error(`Failed to fetch file (${ve.status}): ${Ot}`)}const Fe=ve.headers.get("content-type")||"application/octet-stream";console.log("Response received with content-type:",Fe),console.log("Converting response to blob...");const tt=await ve.blob();if(tt.size===0)throw new Error("Retrieved file is empty");console.log("Blob created:",{size:tt.size,type:tt.type||Fe});const ut=new File([tt],R.name,{type:tt.type||Fe});if(console.log("File object created:",{name:ut.name,size:ut.size,type:ut.type}),ut.size===0)throw new Error("Created file is empty");console.log("Uploading file to server...");const dt=await uploadFile(localStorage.token,ut);if(!dt)throw new Error("Server returned null response for file upload");console.log("File uploaded successfully:",dt),ye.status="uploaded",ye.file=dt,ye.id=dt.id,ye.size=ut.size,ye.collection_name=(Ee=dt==null?void 0:dt.meta)==null?void 0:Ee.collection_name,ye.url=`${WEBUI_API_BASE_URL}/files/${dt.id}`,t(23,Ie),t(0,I),nt.success(r.t("File uploaded successfully"))}catch(be){console.error("Error uploading file:",be),t(23,Ie=Ie.filter(ve=>ve.itemId!==re)),nt.error(r.t("Error uploading file: {{error}}",{error:be.message||"Unknown error"}))}},pe=async R=>{console.log(R);const re={type:"doc",name:R,collection_name:"",status:"uploading",url:R,error:""};try{t(23,Ie=[...Ie,re]);const ye=await ac(localStorage.token,"",R);ye&&(re.status="uploaded",re.collection_name=ye.collection_name,re.file={...ye.file,...re.file},t(23,Ie),t(0,I))}catch(ye){t(23,Ie=Ie.filter(ge=>ge.name!==R)),nt.error(JSON.stringify(ye))}},Xe=async R=>{console.log(R);const re={type:"doc",name:R,collection_name:"",status:"uploading",context:"full",url:R,error:""};try{t(23,Ie=[...Ie,re]);const ye=await cc(localStorage.token,R);ye&&(re.status="uploaded",re.collection_name=ye.collection_name,re.file={...ye.file,...re.file},t(23,Ie),t(0,I))}catch(ye){t(23,Ie=Ie.filter(ge=>ge.name!==R)),nt.error(ye)}},lt=async()=>{var ye,ge,Ee,be;if(d.url.searchParams.get("models"))t(1,X=(ye=d.url.searchParams.get("models"))==null?void 0:ye.split(","));else if(d.url.searchParams.get("model")){const ve=(ge=d.url.searchParams.get("model"))==null?void 0:ge.split(",");if(ve.length===1)if(a.find(tt=>tt.id===ve[0]))t(1,X=ve);else{const tt=document.getElementById("model-selector-0-button");if(tt){tt.click(),await Qe();const ut=document.getElementById("model-search-input");ut&&(ut.focus(),ut.value=ve[0],ut.dispatchEvent(new Event("input")))}}else t(1,X=ve)}else sessionStorage.selectedModels?(t(1,X=JSON.parse(sessionStorage.selectedModels)),sessionStorage.removeItem("selectedModels")):i!=null&&i.models?t(1,X=i==null?void 0:i.models):f!=null&&f.default_models&&(console.log((f==null?void 0:f.default_models.split(","))??""),t(1,X=f==null?void 0:f.default_models.split(",")));t(1,X=X.filter(ve=>a.map(Fe=>Fe.id).includes(ve))),(X.length===0||X.length===1&&X[0]==="")&&(a.length>0?t(1,X=[a[0].id]):t(1,X=[""])),await At.set(!1),await wn.set(!1),await Fn.set(!1),await Rn.set(!1),d.url.pathname.includes("/c/")&&window.history.replaceState(le.state,"","/"),t(6,H=!0),await rl.set(""),await Kl.set(""),t(20,le={messages:{},currentId:null}),t(22,Re=[]),t(24,Je={}),d.url.searchParams.get("youtube")&&Xe(`https://www.youtube.com/watch?v=${d.url.searchParams.get("youtube")}`),d.url.searchParams.get("web-search")==="true"&&t(19,_e=!0),d.url.searchParams.get("image-generation")==="true"&&t(18,me=!0),d.url.searchParams.get("tools")?t(17,J=(Ee=d.url.searchParams.get("tools"))==null?void 0:Ee.split(",").map(ve=>ve.trim()).filter(ve=>ve)):d.url.searchParams.get("tool-ids")&&t(17,J=(be=d.url.searchParams.get("tool-ids"))==null?void 0:be.split(",").map(ve=>ve.trim()).filter(ve=>ve)),d.url.searchParams.get("call")==="true"&&(wn.set(!0),At.set(!0)),d.url.searchParams.get("q")&&(t(21,ae=d.url.searchParams.get("q")??""),ae&&(await Qe(),Te(ae))),t(1,X=X.map(ve=>a.map(Fe=>Fe.id).includes(ve)?ve:""));const R=await as(localStorage.token);R?jn.set(R.ui):jn.set(JSON.parse(localStorage.getItem("settings")??"{}"));const re=document.getElementById("chat-input");setTimeout(()=>re==null?void 0:re.focus(),0)},ht=async()=>{if(rl.set(I),ie=await Ro(localStorage.token,s).catch(async R=>(await Co("/"),null)),ie){await rc(localStorage.token,s).catch(async re=>[]);const R=ie.chat;if(R){console.log(R),t(1,X=((R==null?void 0:R.models)??void 0)!==void 0?R.models:[R.models??""]),t(20,le=((R==null?void 0:R.history)??void 0)!==void 0?R.history:lc(R.messages)),Kl.set(R.title);const re=await as(localStorage.token);return re?await jn.set(re.ui):await jn.set(JSON.parse(localStorage.getItem("settings")??"{}")),t(24,Je=(R==null?void 0:R.params)??{}),t(22,Re=(R==null?void 0:R.files)??[]),t(6,H=!0),await Qe(),le.currentId&&t(20,le.messages[le.currentId].done=!0,le),await Qe(),!0}else return null}},pt=async()=>{await Qe(),F&&t(7,F.scrollTop=F.scrollHeight,F)},fe=R=>{if(R===null)return[];const re=le.messages[R];return re!=null&&re.parentId?[...fe(re.parentId),re]:[re]},Et=async(R,re,ye,ge)=>{const Ee=await Ic(localStorage.token,{model:re,messages:ge.map(be=>({id:be.id,role:be.role,content:be.content,info:be.info?be.info:void 0,timestamp:be.timestamp,...be.sources?{sources:be.sources}:{}})),chat_id:R,session_id:c==null?void 0:c.id,id:ye}).catch(be=>(nt.error(`${be}`),ge.at(-1).error={content:be},null));if(Ee!==null&&Ee.messages)for(const be of Ee.messages)be!=null&&be.id&&t(20,le.messages[be.id]={...le.messages[be.id],...le.messages[be.id].content!==be.content?{originalContent:le.messages[be.id].content}:{},...be},le);await Qe(),s==R&&(o||(ie=await Mo(localStorage.token,R,{models:X,messages:ge,history:le,params:Je,files:Re}),ol.set(1),await sl.set(await ml(localStorage.token,n))))},mt=async(R,re,ye,ge,Ee=null)=>{const be=fe(ge),ve=await yc(localStorage.token,re,{model:ye,messages:be.map(Fe=>({id:Fe.id,role:Fe.role,content:Fe.content,info:Fe.info?Fe.info:void 0,timestamp:Fe.timestamp,...Fe.sources?{sources:Fe.sources}:{}})),...Ee?{event:Ee}:{},chat_id:R,session_id:c==null?void 0:c.id,id:ge}).catch(Fe=>(nt.error(`${Fe}`),be.at(-1).error={content:Fe},null));if(ve!==null&&ve.messages)for(const Fe of ve.messages)t(20,le.messages[Fe.id]={...le.messages[Fe.id],...le.messages[Fe.id].content!==Fe.content?{originalContent:le.messages[Fe.id].content}:{},...Fe},le);s==R&&(o||(ie=await Mo(localStorage.token,R,{models:X,messages:be,history:le,params:Je,files:Re}),ol.set(1),await sl.set(await ml(localStorage.token,n))))},vt=async(R,re="")=>setInterval(()=>{c==null||c.emit("usage",{action:"chat",model:R,chat_id:re})},1e3),Me=async R=>{if(t(21,ae=""),X.length===0)nt.error(r.t("Model not selected"));else{const re=X[0],ye=a.filter(ut=>ut.id===re).at(0),ge=fe(le.currentId),Ee=ge.length!==0?ge.at(-1):null,be=Jn(),ve=Jn(),Fe={id:be,parentId:Ee?Ee.id:null,childrenIds:[ve],role:"user",content:R||`[PROMPT] ${be}`,timestamp:Math.floor(Date.now()/1e3)},tt={id:ve,parentId:be,childrenIds:[],role:"assistant",content:`[RESPONSE] ${ve}`,done:!0,model:re,modelName:ye.name??ye.id,modelIdx:0,timestamp:Math.floor(Date.now()/1e3)};Ee&&(Ee.childrenIds.push(be),t(20,le.messages[Ee.id]=Ee,le)),t(20,le.messages[be]=Fe,le),t(20,le.messages[ve]=tt,le),t(20,le.currentId=ve,le),await Qe(),H&&pt(),ge.length===0?await Ft():await Pt(s)}},Vt=async({modelId:R,parentId:re,messages:ye})=>{const ge=a.filter(ve=>ve.id===R).at(0);let Ee=le.messages[re],be=Ee?Ee.id:null;for(const ve of ye){let Fe=Jn();if(ve.role==="user"){const tt={id:Fe,parentId:be,childrenIds:[],timestamp:Math.floor(Date.now()/1e3),...ve};Ee&&(Ee.childrenIds.push(Fe),t(20,le.messages[Ee.id]=Ee,le)),t(20,le.messages[Fe]=tt,le),Ee=tt,be=Fe}else{const tt={id:Fe,parentId:be,childrenIds:[],done:!0,model:ge.id,modelName:ge.name??ge.id,modelIdx:0,timestamp:Math.floor(Date.now()/1e3),...ve};Ee&&(Ee.childrenIds.push(Fe),t(20,le.messages[Ee.id]=Ee,le)),t(20,le.messages[Fe]=tt,le),Ee=tt,be=Fe}}t(20,le.currentId=be,le),await Qe(),H&&pt(),ye.length===0?await Ft():await Pt(s)},ue=async(R,re,ye)=>{var Ot,Ct,on,cn,Mn,pn,Hn,bn,ct,Qt,un,xt,vn,Bn;const{id:ge,done:Ee,choices:be,content:ve,sources:Fe,selected_model_id:tt,error:ut,usage:dt}=R;if(ut&&await yt(ut,re),Fe&&(re.sources=Fe),be)if((Ct=(Ot=be[0])==null?void 0:Ot.message)!=null&&Ct.content)re.content+=(cn=(on=be[0])==null?void 0:on.message)==null?void 0:cn.content;else{let Dt=((pn=(Mn=be[0])==null?void 0:Mn.delta)==null?void 0:pn.content)??"";if(re.content==""&&Dt==`
`)console.log("Empty response");else{re.content+=Dt,navigator.vibrate&&((i==null?void 0:i.hapticFeedback)??!1)&&navigator.vibrate(5);const Tn=Do(re.content,((bn=(Hn=f==null?void 0:f.audio)==null?void 0:Hn.tts)==null?void 0:bn.split_on)??"punctuation");Tn.pop(),Tn.length>0&&Tn[Tn.length-1]!==re.lastSentence&&(re.lastSentence=Tn[Tn.length-1],T.dispatchEvent(new CustomEvent("chat",{detail:{id:re.id,content:Tn[Tn.length-1]}})))}}if(ve){re.content=ve,navigator.vibrate&&((i==null?void 0:i.hapticFeedback)??!1)&&navigator.vibrate(5);const Dt=Do(re.content,((Qt=(ct=f==null?void 0:f.audio)==null?void 0:ct.tts)==null?void 0:Qt.split_on)??"punctuation");Dt.pop(),Dt.length>0&&Dt[Dt.length-1]!==re.lastSentence&&(re.lastSentence=Dt[Dt.length-1],T.dispatchEvent(new CustomEvent("chat",{detail:{id:re.id,content:Dt[Dt.length-1]}})))}if(tt&&(re.selectedModelId=tt,re.arena=!0),dt&&(re.usage=dt),t(20,le.messages[re.id]=re,le),Ee){re.done=!0,i.responseAutoCopy&&Zo(re.content),i.responseAutoPlayback&&!h&&(await Qe(),(un=document.getElementById(`speak-button-${re.id}`))==null||un.click());let Dt=((Bn=Do(re.content,((vn=(xt=f==null?void 0:f.audio)==null?void 0:xt.tts)==null?void 0:vn.split_on)??"punctuation"))==null?void 0:Bn.at(-1))??"";Dt&&T.dispatchEvent(new CustomEvent("chat",{detail:{id:re.id,content:Dt}})),T.dispatchEvent(new CustomEvent("chat:finish",{detail:{id:re.id,content:re.content}})),t(20,le.messages[re.id]=re,le),await Et(ye,re.model,re.id,fe(re.id))}console.log(R),H&&pt()},Te=async(R,{_raw:re=!1}={})=>{var ut,dt,Ot;console.log("submitPrompt",R,s);const ye=fe(le.currentId),ge=X.map(Ct=>a.map(on=>on.id).includes(Ct)?Ct:"");if(JSON.stringify(X)!==JSON.stringify(ge)&&t(1,X=ge),R===""){nt.error(r.t("Please enter a prompt"));return}if(X.includes("")){nt.error(r.t("Model not selected"));return}if(ye.length!=0&&ye.at(-1).done!=!0)return;if(ye.length!=0&&ye.at(-1).error){nt.error(r.t("Oops! There was an error in the previous response."));return}if(Ie.length>0&&Ie.filter(Ct=>Ct.type!=="image"&&Ct.status==="uploading").length>0){nt.error(r.t("Oops! There are files still uploading. Please wait for the upload to complete."));return}if((((ut=f==null?void 0:f.file)==null?void 0:ut.max_count)??null)!==null&&Ie.length+Re.length>((dt=f==null?void 0:f.file)==null?void 0:dt.max_count)){nt.error(r.t("You can only chat with a maximum of {{maxCount}} file(s) at a time.",{maxCount:(Ot=f==null?void 0:f.file)==null?void 0:Ot.max_count}));return}t(21,ae=""),await Qe();const Ee=document.getElementById("chat-input");Ee&&(Ee.style.height="");const be=JSON.parse(JSON.stringify(Ie));Re.push(...be.filter(Ct=>["doc","file","collection"].includes(Ct.type))),t(22,Re=Re.filter((Ct,on,cn)=>cn.findIndex(Mn=>JSON.stringify(Mn)===JSON.stringify(Ct))===on)),t(23,Ie=[]),t(21,ae="");let ve=Jn(),Fe={id:ve,parentId:ye.length!==0?ye.at(-1).id:null,childrenIds:[],role:"user",content:R,files:be.length>0?be:void 0,timestamp:Math.floor(Date.now()/1e3),models:X};t(20,le.messages[ve]=Fe,le),t(20,le.currentId=ve,le),ye.length!==0&&le.messages[ye.at(-1).id].childrenIds.push(ve),await Qe();const tt=document.getElementById("chat-input");tt==null||tt.focus(),he(),await Be(R,ve,{newChat:!0})},Be=async(R,re,{modelId:ye=null,modelIdx:ge=null,newChat:Ee=!1}={})=>{Ee&&le.messages[le.currentId].parentId===null&&le.messages[le.currentId].role==="user"?await Ft():await Pt(s);let be=ye?[ye]:q!==void 0?[q.id]:X;const ve={};for(const[tt,ut]of be.entries()){const dt=a.filter(Ot=>Ot.id===ut).at(0);if(dt){let Ot=Jn(),Ct={parentId:re,id:Ot,childrenIds:[],role:"assistant",content:"",model:dt.id,modelName:dt.name??dt.id,modelIdx:ge||tt,userContext:null,timestamp:Math.floor(Date.now()/1e3)};t(20,le.messages[Ot]=Ct,le),t(20,le.currentId=Ot,le),re!==null&&le.messages[re]&&t(20,le.messages[re].childrenIds=[...le.messages[re].childrenIds,Ot],le),ve[`${ut}-${ge||tt}`]=Ot}}await Qe(),await Pt(s);const Fe=JSON.parse(JSON.stringify(s));await Promise.all(be.map(async(tt,ut)=>{var Ot,Ct,on;console.log("modelId",tt);const dt=a.filter(cn=>cn.id===tt).at(0);if(dt){fe(re).some(Qt=>{var un;return(un=Qt.files)==null?void 0:un.some(xt=>xt.type==="image")})&&!(((on=(Ct=(Ot=dt.info)==null?void 0:Ot.meta)==null?void 0:Ct.capabilities)==null?void 0:on.vision)??!0)&&nt.error(r.t("Model {{modelName}} is not vision capable",{modelName:dt.name??dt.id}));let pn=ve[`${tt}-${ge||ut}`],Hn=le.messages[pn],bn=null;if(((i==null?void 0:i.memory)??!1)&&bn===null){const Qt=await _c(localStorage.token,R).catch(un=>(nt.error(`${un}`),null));Qt&&(Qt.documents[0].length>0&&(bn=Qt.documents[0].reduce((un,xt,vn)=>{const Bn=Qt.metadatas[0][vn].created_at,Dt=new Date(Bn*1e3).toISOString().split("T")[0];return`${un}${vn+1}. [${Dt}]. ${xt}
`},"")),console.log(bn))}Hn.userContext=bn;const ct=await vt(dt.id,Fe);pt(),await Ke(dt,pn),ct&&clearInterval(ct)}else nt.error(r.t("Model {{modelId}} not found",{modelId:tt}))})),ol.set(1),sl.set(await ml(localStorage.token,n))},Ke=async(R,re,ye)=>{var ut,dt,Ot,Ct,on,cn,Mn,pn,Hn,bn;const ge=le.messages[re],Ee=le.messages[ge.parentId];let be=JSON.parse(JSON.stringify(Re));be.push(...((Ee==null?void 0:Ee.files)??[]).filter(ct=>["doc","file","collection"].includes(ct.type)),...((ge==null?void 0:ge.files)??[]).filter(ct=>["web_search_results"].includes(ct.type))),be=be.filter((ct,Qt,un)=>un.findIndex(xt=>JSON.stringify(xt)===JSON.stringify(ct))===Qt),pt(),T.dispatchEvent(new CustomEvent("chat:start",{detail:{id:re}})),await Qe();const ve=((dt=(ut=R==null?void 0:R.info)==null?void 0:ut.params)==null?void 0:dt.stream_response)??((Ot=i==null?void 0:i.params)==null?void 0:Ot.stream_response)??(Je==null?void 0:Je.stream_response)??!0,Fe=[Je!=null&&Je.system||i.system||((ge==null?void 0:ge.userContext)??null)?{role:"system",content:`${tc((Je==null?void 0:Je.system)??(i==null?void 0:i.system)??"",u.name,i!=null&&i.userLocation?await bc(localStorage.token):void 0)}${(ge==null?void 0:ge.userContext)??null?`

User Context:
${(ge==null?void 0:ge.userContext)??""}`:""}`}:void 0,...fe(re).map(ct=>({...ct,content:nc(ct.content)}))].filter(ct=>{var Qt;return(Qt=ct==null?void 0:ct.content)==null?void 0:Qt.trim()}).map((ct,Qt,un)=>{var xt,vn,Bn;return{role:ct.role,...((xt=ct.files)==null?void 0:xt.filter(Dt=>Dt.type==="image").length)>0&&ct.role==="user"?{content:[{type:"text",text:((vn=ct==null?void 0:ct.merged)==null?void 0:vn.content)??ct.content},...ct.files.filter(Dt=>Dt.type==="image").map(Dt=>({type:"image_url",image_url:{url:Dt.url}}))]}:{content:((Bn=ct==null?void 0:ct.merged)==null?void 0:Bn.content)??ct.content}}}),tt=await ic(localStorage.token,{stream:ve,model:R.id,messages:Fe,params:{...i==null?void 0:i.params,...Je,format:i.requestFormat??void 0,keep_alive:i.keepAlive??void 0,stop:(Je==null?void 0:Je.stop)??((Ct=i==null?void 0:i.params)==null?void 0:Ct.stop)??void 0?((Je==null?void 0:Je.stop.split(",").map(ct=>ct.trim()))??i.params.stop).map(ct=>decodeURIComponent(JSON.parse('"'+ct.replace(/\"/g,'\\"')+'"'))):void 0},files:((be==null?void 0:be.length)??0)>0?be:void 0,tool_ids:J.length>0?J:void 0,features:{image_generation:me,web_search:_e},session_id:c==null?void 0:c.id,chat_id:s,id:re,...!o&&(Fe.length==1||Fe.length==2&&((on=Fe.at(0))==null?void 0:on.role)==="system"&&((cn=Fe.at(1))==null?void 0:cn.role)==="user")&&X[0]===R.id?{background_tasks:{title_generation:((Mn=i==null?void 0:i.title)==null?void 0:Mn.auto)??!0,tags_generation:(i==null?void 0:i.autoTags)??!0}}:{},...ve&&(((bn=(Hn=(pn=R.info)==null?void 0:pn.meta)==null?void 0:Hn.capabilities)==null?void 0:bn.usage)??!1)?{stream_options:{include_usage:!0}}:{}},`${Tl}/api`).catch(ct=>(console.log(ct),ge.error={content:ct},ge.done=!0,t(20,le.messages[re]=ge,le),null));console.log(tt),tt&&(Pe=tt.task_id),await Qe(),pt()},yt=async(R,re)=>{let ye="",ge;R&&(ge=R),console.error(ge),"detail"in ge?(nt.error(ge.detail),ye=ge.detail):"error"in ge?"message"in ge.error?(nt.error(ge.error.message),ye=ge.error.message):(nt.error(ge.error),ye=ge.error):"message"in ge&&(nt.error(ge.message),ye=ge.message),re.error={content:r.t("Uh-oh! There was an issue with the response.")+`
`+ye},re.done=!0,re.statusHistory&&(re.statusHistory=re.statusHistory.filter(Ee=>Ee.action!=="knowledge_search")),t(20,le.messages[re.id]=re,le)},It=()=>{if(Pe&&kc(localStorage.token,Pe).catch(re=>null)){Pe=null;const re=le.messages[le.currentId];re.done=!0,t(20,le.messages[le.currentId]=re,le),H&&pt()}},St=async(R,re)=>{let ye=re,ge=Jn(),Ee={id:ge,parentId:R,childrenIds:[],role:"user",content:ye,models:X};R!==null&&t(20,le.messages[R].childrenIds=[...le.messages[R].childrenIds,ge],le),t(20,le.messages[ge]=Ee,le),t(20,le.currentId=ge,le),await Qe(),await Be(ye,ge)},zt=async R=>{if(console.log("regenerateResponse"),le.currentId){let re=le.messages[R.parentId],ye=re.content;((re==null?void 0:re.models)??[...X]).length==1?await Be(ye,re.id):await Be(ye,re.id,{modelId:R.model,modelIdx:R.modelIdx})}},Bt=async()=>{if(console.log("continueResponse"),JSON.parse(JSON.stringify(s)),le.currentId&&le.messages[le.currentId].done==!0){const R=le.messages[le.currentId];R.done=!1,await Qe();const re=a.filter(ye=>ye.id===((R==null?void 0:R.selectedModelId)??R.model)).at(0);re&&await Ke(re,R.id)}},Nt=async(R,re,ye)=>{console.log("mergeResponses",R,re);const ge=le.messages[R],Ee={status:!0,content:""};ge.merged=Ee,t(20,le.messages[R]=ge,le);try{const[be,ve]=await Ec(localStorage.token,ge.model,le.messages[ge.parentId].content,re);if(be&&be.ok&&be.body){const Fe=await Mu(be.body,i.splitLargeChunks);for await(const tt of Fe){const{value:ut,done:dt,sources:Ot,error:Ct,usage:on}=tt;if(Ct||dt)break;Ee.content==""&&ut==`
`||(Ee.content+=ut,t(20,le.messages[R]=ge,le),H&&pt())}await Pt(ye)}else console.error(be)}catch(be){console.error(be)}},Ft=async()=>{o?await rl.set("local"):(ie=await oc(localStorage.token,{id:s,title:r.t("New Chat"),models:X,system:i.system??void 0,params:Je,history:le,messages:fe(le.currentId),tags:[],timestamp:Date.now()}),ol.set(1),await sl.set(await ml(localStorage.token,n)),await rl.set(ie.id),window.history.replaceState(le.state,"",`/c/${ie.id}`)),await Qe()},Pt=async R=>{s==R&&(o||(ie=await Mo(localStorage.token,R,{models:X,history:le,messages:fe(le.currentId),params:Je,files:Re}),ol.set(1),await sl.set(await ml(localStorage.token,n))))};function nn(R){G=R,t(9,G)}const fn=R=>{R.detail?Z(R.detail):Z(!0)},sn=()=>{Z(!1)};function dn(R){je[R?"unshift":"push"](()=>{Y=R,t(8,Y)})}function yn(R){X=R,t(1,X)}const U=R=>R.dismissible?!JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]").includes(R.id):!0,Se=R=>{const re=R.detail;localStorage.setItem("dismissedBannerIds",JSON.stringify([re,...JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]")].filter(ye=>y.find(ge=>ge.id===ye))))};function Ze(R){le=R,t(20,le)}function $e(R){H=R,t(6,H)}function Ye(R){ae=R,t(21,ae),t(0,I)}function at(R){je[R?"unshift":"push"](()=>{F=R,t(7,F)})}const rn=R=>{t(6,H=F.scrollHeight-F.scrollTop<=F.clientHeight+5)},ln=R=>{R.prompt?localStorage.setItem(`chat-input-${s}`,JSON.stringify(R)):localStorage.removeItem(`chat-input-${s}`)};function gt(R){Ie=R,t(23,Ie),t(0,I)}function Ut(R){ae=R,t(21,ae),t(0,I)}function an(R){H=R,t(6,H)}function _n(R){J=R,t(17,J),t(0,I)}function kn(R){me=R,t(18,me),t(0,I)}function Gn(R){_e=R,t(19,_e),t(0,I)}function el(R){q=R,t(2,q)}const Cn=async R=>{const{type:re,data:ye}=R.detail;re==="web"?await pe(ye):re==="youtube"?await Xe(ye):re==="google-drive"&&await bt(ye)},ul=async R=>{R.detail&&(await Qe(),Te((i==null?void 0:i.richTextInput)??!0?R.detail.replaceAll(`

`,`
`):R.detail))};function tl(R){Ie=R,t(23,Ie),t(0,I)}function En(R){ae=R,t(21,ae),t(0,I)}function On(R){H=R,t(6,H)}function Wn(R){J=R,t(17,J),t(0,I)}function qn(R){me=R,t(18,me),t(0,I)}function nl(R){_e=R,t(19,_e),t(0,I)}function Dn(R){q=R,t(2,q)}const fl=async R=>{const{type:re,data:ye}=R.detail;re==="web"?await pe(ye):re==="youtube"&&await Xe(ye)},ll=async R=>{R.detail&&(await Qe(),Te((i==null?void 0:i.richTextInput)??!0?R.detail.replaceAll(`

`,`
`):R.detail))},Q=(R,re,ye,ge)=>{const Ee=a.find(be=>be.id===re);return Ee?[...R,Ee]:R};function Yt(R){je[R?"unshift":"push"](()=>{O=R,t(5,O)})}function Tt(R){le=R,t(20,le)}function dl(R){Re=R,t(22,Re)}function jl(R){Je=R,t(24,Je)}function Fl(R){Ie=R,t(23,Ie),t(0,I)}function hl(R){L=R,t(4,L)}return l.$$set=R=>{"chatIdProp"in R&&t(0,I=R.chatIdProp)},l.$$.update=()=>{l.$$.dirty[0]&6&&t(16,se=q!==void 0?[q.id]:X),l.$$.dirty[0]&1&&I&&(async()=>{if(console.log(I),t(21,ae=""),t(23,Ie=[]),t(17,J=[]),t(19,_e=!1),t(18,me=!1),t(3,V=!1),I&&await ht()){if(await Qe(),t(3,V=!0),localStorage.getItem(`chat-input-${I}`))try{const re=JSON.parse(localStorage.getItem(`chat-input-${I}`));t(21,ae=re.prompt),t(23,Ie=re.files),t(17,J=re.selectedToolIds),t(19,_e=re.webSearchEnabled),t(18,me=re.imageGenerationEnabled)}catch{}window.setTimeout(()=>pt(),0);const R=document.getElementById("chat-input");R==null||R.focus()}else await Co("/")})(),l.$$.dirty[0]&3&&X&&I!==""&&he(),l.$$.dirty[0]&2&&X&&rt()},[I,X,q,V,L,O,H,F,Y,G,D,K,M,W,j,Z,se,J,me,_e,le,ae,Re,Ie,Je,s,i,a,v,g,w,y,k,T,it,bt,pe,Xe,lt,fe,mt,Me,Vt,Te,Be,It,St,zt,Bt,Nt,nn,fn,sn,dn,yn,U,Se,Ze,$e,Ye,at,rn,ln,gt,Ut,an,_n,kn,Gn,el,Cn,ul,tl,En,On,Wn,qn,nl,Dn,fl,ll,Q,Yt,Tt,dl,jl,Fl,hl]}class Xp extends Ae{constructor(e){super(),Le(this,e,y_,w_,We,{chatIdProp:0},null,[-1,-1,-1,-1])}}function k_(l){let e,t,n,o=l[1].t("Keyboard shortcuts")+"",s,i,r,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,u,f,h,d,_,b=l[1].t("Open new chat")+"",v,g,w,y='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">O</div>',k,I,V,T=l[1].t("Focus chat input")+"",L,O,H,F='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Esc</div>',Y,G,D,K=l[1].t("Copy last code block")+"",M,W,j,Z='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">;</div>',A,X,q,se=l[1].t("Copy last response")+"",J,me,_e,ie='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">C</div>',le,Pe,ae,Re,Ie=l[1].t("Toggle settings")+"",Je,he,rt,it='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">.</div>',Rt,Mt,bt,pe=l[1].t("Toggle sidebar")+"",Xe,lt,ht,pt='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">S</div>',fe,Et,mt,vt=l[1].t("Delete chat")+"",Me,Vt,ue,Te='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">âŒ«/Delete</div>',Be,Ke,yt,It=l[1].t("Show shortcuts")+"",St,zt,Bt,Nt='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',Ft,Pt,nn,fn=l[1].t("Input commands")+"",sn,dn,yn,U,Se,Ze,$e,Ye=l[1].t("Attach file")+"",at,rn,ln,gt='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">#</div>',Ut,an,_n,kn=l[1].t("Add custom prompt")+"",Gn,el,Cn,ul='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',tl,En,On,Wn=l[1].t("Select model")+"",qn,nl,Dn,fl='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">@</div>',ll,Q;return{c(){e=z("div"),t=z("div"),n=z("div"),s=Ce(o),i=x(),r=z("button"),r.innerHTML=a,c=x(),u=z("div"),f=z("div"),h=z("div"),d=z("div"),_=z("div"),v=Ce(b),g=x(),w=z("div"),w.innerHTML=y,k=x(),I=z("div"),V=z("div"),L=Ce(T),O=x(),H=z("div"),H.innerHTML=F,Y=x(),G=z("div"),D=z("div"),M=Ce(K),W=x(),j=z("div"),j.innerHTML=Z,A=x(),X=z("div"),q=z("div"),J=Ce(se),me=x(),_e=z("div"),_e.innerHTML=ie,le=x(),Pe=z("div"),ae=z("div"),Re=z("div"),Je=Ce(Ie),he=x(),rt=z("div"),rt.innerHTML=it,Rt=x(),Mt=z("div"),bt=z("div"),Xe=Ce(pe),lt=x(),ht=z("div"),ht.innerHTML=pt,fe=x(),Et=z("div"),mt=z("div"),Me=Ce(vt),Vt=x(),ue=z("div"),ue.innerHTML=Te,Be=x(),Ke=z("div"),yt=z("div"),St=Ce(It),zt=x(),Bt=z("div"),Bt.innerHTML=Nt,Ft=x(),Pt=z("div"),nn=z("div"),sn=Ce(fn),dn=x(),yn=z("div"),U=z("div"),Se=z("div"),Ze=z("div"),$e=z("div"),at=Ce(Ye),rn=x(),ln=z("div"),ln.innerHTML=gt,Ut=x(),an=z("div"),_n=z("div"),Gn=Ce(kn),el=x(),Cn=z("div"),Cn.innerHTML=ul,tl=x(),En=z("div"),On=z("div"),qn=Ce(Wn),nl=x(),Dn=z("div"),Dn.innerHTML=fl,this.h()},l(Yt){e=N(Yt,"DIV",{class:!0});var Tt=C(e);t=N(Tt,"DIV",{class:!0});var dl=C(t);n=N(dl,"DIV",{class:!0});var jl=C(n);s=De(jl,o),jl.forEach(p),i=$(dl),r=N(dl,"BUTTON",{class:!0,"data-svelte-h":!0}),ft(r)!=="svelte-745w2y"&&(r.innerHTML=a),dl.forEach(p),c=$(Tt),u=N(Tt,"DIV",{class:!0});var Fl=C(u);f=N(Fl,"DIV",{class:!0});var hl=C(f);h=N(hl,"DIV",{class:!0});var R=C(h);d=N(R,"DIV",{class:!0});var re=C(d);_=N(re,"DIV",{class:!0});var ye=C(_);v=De(ye,b),ye.forEach(p),g=$(re),w=N(re,"DIV",{class:!0,"data-svelte-h":!0}),ft(w)!=="svelte-lcmjz9"&&(w.innerHTML=y),re.forEach(p),k=$(R),I=N(R,"DIV",{class:!0});var ge=C(I);V=N(ge,"DIV",{class:!0});var Ee=C(V);L=De(Ee,T),Ee.forEach(p),O=$(ge),H=N(ge,"DIV",{class:!0,"data-svelte-h":!0}),ft(H)!=="svelte-1c7wvdz"&&(H.innerHTML=F),ge.forEach(p),Y=$(R),G=N(R,"DIV",{class:!0});var be=C(G);D=N(be,"DIV",{class:!0});var ve=C(D);M=De(ve,K),ve.forEach(p),W=$(be),j=N(be,"DIV",{class:!0,"data-svelte-h":!0}),ft(j)!=="svelte-1vgtrzt"&&(j.innerHTML=Z),be.forEach(p),A=$(R),X=N(R,"DIV",{class:!0});var Fe=C(X);q=N(Fe,"DIV",{class:!0});var tt=C(q);J=De(tt,se),tt.forEach(p),me=$(Fe),_e=N(Fe,"DIV",{class:!0,"data-svelte-h":!0}),ft(_e)!=="svelte-m149u9"&&(_e.innerHTML=ie),Fe.forEach(p),R.forEach(p),le=$(hl),Pe=N(hl,"DIV",{class:!0});var ut=C(Pe);ae=N(ut,"DIV",{class:!0});var dt=C(ae);Re=N(dt,"DIV",{class:!0});var Ot=C(Re);Je=De(Ot,Ie),Ot.forEach(p),he=$(dt),rt=N(dt,"DIV",{class:!0,"data-svelte-h":!0}),ft(rt)!=="svelte-1lfzi34"&&(rt.innerHTML=it),dt.forEach(p),Rt=$(ut),Mt=N(ut,"DIV",{class:!0});var Ct=C(Mt);bt=N(Ct,"DIV",{class:!0});var on=C(bt);Xe=De(on,pe),on.forEach(p),lt=$(Ct),ht=N(Ct,"DIV",{class:!0,"data-svelte-h":!0}),ft(ht)!=="svelte-1egz3pd"&&(ht.innerHTML=pt),Ct.forEach(p),fe=$(ut),Et=N(ut,"DIV",{class:!0});var cn=C(Et);mt=N(cn,"DIV",{class:!0});var Mn=C(mt);Me=De(Mn,vt),Mn.forEach(p),Vt=$(cn),ue=N(cn,"DIV",{class:!0,"data-svelte-h":!0}),ft(ue)!=="svelte-tx0rkx"&&(ue.innerHTML=Te),cn.forEach(p),Be=$(ut),Ke=N(ut,"DIV",{class:!0});var pn=C(Ke);yt=N(pn,"DIV",{class:!0});var Hn=C(yt);St=De(Hn,It),Hn.forEach(p),zt=$(pn),Bt=N(pn,"DIV",{class:!0,"data-svelte-h":!0}),ft(Bt)!=="svelte-714lzr"&&(Bt.innerHTML=Nt),pn.forEach(p),ut.forEach(p),hl.forEach(p),Fl.forEach(p),Ft=$(Tt),Pt=N(Tt,"DIV",{class:!0});var bn=C(Pt);nn=N(bn,"DIV",{class:!0});var ct=C(nn);sn=De(ct,fn),ct.forEach(p),bn.forEach(p),dn=$(Tt),yn=N(Tt,"DIV",{class:!0});var Qt=C(yn);U=N(Qt,"DIV",{class:!0});var un=C(U);Se=N(un,"DIV",{class:!0});var xt=C(Se);Ze=N(xt,"DIV",{class:!0});var vn=C(Ze);$e=N(vn,"DIV",{class:!0});var Bn=C($e);at=De(Bn,Ye),Bn.forEach(p),rn=$(vn),ln=N(vn,"DIV",{class:!0,"data-svelte-h":!0}),ft(ln)!=="svelte-11t0lmd"&&(ln.innerHTML=gt),vn.forEach(p),Ut=$(xt),an=N(xt,"DIV",{class:!0});var Dt=C(an);_n=N(Dt,"DIV",{class:!0});var Tn=C(_n);Gn=De(Tn,kn),Tn.forEach(p),el=$(Dt),Cn=N(Dt,"DIV",{class:!0,"data-svelte-h":!0}),ft(Cn)!=="svelte-1s9pky1"&&(Cn.innerHTML=ul),Dt.forEach(p),tl=$(xt),En=N(xt,"DIV",{class:!0});var Yl=C(En);On=N(Yl,"DIV",{class:!0});var es=C(On);qn=De(es,Wn),es.forEach(p),nl=$(Yl),Dn=N(Yl,"DIV",{class:!0,"data-svelte-h":!0}),ft(Dn)!=="svelte-oivy56"&&(Dn.innerHTML=fl),Yl.forEach(p),xt.forEach(p),un.forEach(p),Qt.forEach(p),Tt.forEach(p),this.h()},h(){m(n,"class","text-lg font-medium self-center"),m(r,"class","self-center"),m(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4"),m(_,"class","text-sm"),m(w,"class","flex space-x-1 text-xs"),m(d,"class","w-full flex justify-between items-center"),m(V,"class","text-sm"),m(H,"class","flex space-x-1 text-xs"),m(I,"class","w-full flex justify-between items-center"),m(D,"class","text-sm"),m(j,"class","flex space-x-1 text-xs"),m(G,"class","w-full flex justify-between items-center"),m(q,"class","text-sm"),m(_e,"class","flex space-x-1 text-xs"),m(X,"class","w-full flex justify-between items-center"),m(h,"class","flex flex-col space-y-3 w-full self-start"),m(Re,"class","text-sm"),m(rt,"class","flex space-x-1 text-xs"),m(ae,"class","w-full flex justify-between items-center"),m(bt,"class","text-sm"),m(ht,"class","flex space-x-1 text-xs"),m(Mt,"class","w-full flex justify-between items-center"),m(mt,"class","text-sm"),m(ue,"class","flex space-x-1 text-xs"),m(Et,"class","w-full flex justify-between items-center"),m(yt,"class","text-sm"),m(Bt,"class","flex space-x-1 text-xs"),m(Ke,"class","w-full flex justify-between items-center"),m(Pe,"class","flex flex-col space-y-3 w-full self-start"),m(f,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),m(u,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),m(nn,"class","text-lg font-medium self-center"),m(Pt,"class","flex justify-between dark:text-gray-300 px-5"),m($e,"class","text-sm"),m(ln,"class","flex space-x-1 text-xs"),m(Ze,"class","w-full flex justify-between items-center"),m(_n,"class","text-sm"),m(Cn,"class","flex space-x-1 text-xs"),m(an,"class","w-full flex justify-between items-center"),m(On,"class","text-sm"),m(Dn,"class","flex space-x-1 text-xs"),m(En,"class","w-full flex justify-between items-center"),m(Se,"class","flex flex-col space-y-3 w-full self-start"),m(U,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),m(yn,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),m(e,"class","text-gray-700 dark:text-gray-100")},m(Yt,Tt){B(Yt,e,Tt),E(e,t),E(t,n),E(n,s),E(t,i),E(t,r),E(e,c),E(e,u),E(u,f),E(f,h),E(h,d),E(d,_),E(_,v),E(d,g),E(d,w),E(h,k),E(h,I),E(I,V),E(V,L),E(I,O),E(I,H),E(h,Y),E(h,G),E(G,D),E(D,M),E(G,W),E(G,j),E(h,A),E(h,X),E(X,q),E(q,J),E(X,me),E(X,_e),E(f,le),E(f,Pe),E(Pe,ae),E(ae,Re),E(Re,Je),E(ae,he),E(ae,rt),E(Pe,Rt),E(Pe,Mt),E(Mt,bt),E(bt,Xe),E(Mt,lt),E(Mt,ht),E(Pe,fe),E(Pe,Et),E(Et,mt),E(mt,Me),E(Et,Vt),E(Et,ue),E(Pe,Be),E(Pe,Ke),E(Ke,yt),E(yt,St),E(Ke,zt),E(Ke,Bt),E(e,Ft),E(e,Pt),E(Pt,nn),E(nn,sn),E(e,dn),E(e,yn),E(yn,U),E(U,Se),E(Se,Ze),E(Ze,$e),E($e,at),E(Ze,rn),E(Ze,ln),E(Se,Ut),E(Se,an),E(an,_n),E(_n,Gn),E(an,el),E(an,Cn),E(Se,tl),E(Se,En),E(En,On),E(On,qn),E(En,nl),E(En,Dn),ll||(Q=ke(r,"click",l[3]),ll=!0)},p(Yt,Tt){Tt&2&&o!==(o=Yt[1].t("Keyboard shortcuts")+"")&&Ne(s,o),Tt&2&&b!==(b=Yt[1].t("Open new chat")+"")&&Ne(v,b),Tt&2&&T!==(T=Yt[1].t("Focus chat input")+"")&&Ne(L,T),Tt&2&&K!==(K=Yt[1].t("Copy last code block")+"")&&Ne(M,K),Tt&2&&se!==(se=Yt[1].t("Copy last response")+"")&&Ne(J,se),Tt&2&&Ie!==(Ie=Yt[1].t("Toggle settings")+"")&&Ne(Je,Ie),Tt&2&&pe!==(pe=Yt[1].t("Toggle sidebar")+"")&&Ne(Xe,pe),Tt&2&&vt!==(vt=Yt[1].t("Delete chat")+"")&&Ne(Me,vt),Tt&2&&It!==(It=Yt[1].t("Show shortcuts")+"")&&Ne(St,It),Tt&2&&fn!==(fn=Yt[1].t("Input commands")+"")&&Ne(sn,fn),Tt&2&&Ye!==(Ye=Yt[1].t("Attach file")+"")&&Ne(at,Ye),Tt&2&&kn!==(kn=Yt[1].t("Add custom prompt")+"")&&Ne(Gn,kn),Tt&2&&Wn!==(Wn=Yt[1].t("Select model")+"")&&Ne(qn,Wn)},d(Yt){Yt&&p(e),ll=!1,Q()}}}function E_(l){let e,t,n;function o(i){l[4](i)}let s={$$slots:{default:[k_]},$$scope:{ctx:l}};return l[0]!==void 0&&(s.show=l[0]),e=new Jc({props:s}),je.push(()=>qe(e,"show",o)),{c(){ee(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){te(e,i,r),n=!0},p(i,[r]){const a={};r&35&&(a.$$scope={dirty:r,ctx:i}),!t&&r&1&&(t=!0,a.show=i[0],Ge(()=>t=!1)),e.$set(a)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){P(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function I_(l,e,t){let n;const o=Lt("i18n");ce(l,o,a=>t(1,n=a));let{show:s=!1}=e;const i=()=>{t(0,s=!1)};function r(a){s=a,t(0,s)}return l.$$set=a=>{"show"in a&&t(0,s=a.show)},[s,n,o,i,r]}class S_ extends Ae{constructor(e){super(),Le(this,e,I_,E_,We,{show:0})}}function C_(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=C(e);t=ze(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:we,o:we,d(n){n&&p(e)}}}function D_(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class M_ extends Ae{constructor(e){super(),Le(this,e,D_,C_,We,{className:0,strokeWidth:1})}}function T_(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,class:!0});var o=C(e);t=ze(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7Zm5.01 1H5v2.01h2.01V8Zm3 0H8v2.01h2.01V8Zm3 0H11v2.01h2.01V8Zm3 0H14v2.01h2.01V8Zm3 0H17v2.01h2.01V8Zm-12 3H5v2.01h2.01V11Zm3 0H8v2.01h2.01V11Zm3 0H11v2.01h2.01V11Zm3 0H14v2.01h2.01V11Zm3 0H17v2.01h2.01V11Zm-12 3H5v2.01h2.01V14ZM8 14l-.001 2 8.011.01V14H8Zm11.01 0H17v2.01h2.01V14Z"),m(t,"clip-rule","evenodd"),m(e,"aria-hidden","true"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","currentColor"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"class",l[0])},m(n,o){B(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:we,o:we,d(n){n&&p(e)}}}function V_(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class z_ extends Ae{constructor(e){super(),Le(this,e,V_,T_,We,{className:0,strokeWidth:1})}}function N_(l){let e;const t=l[5].default,n=Kt(t,l,l[9],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&512)&&Gt(n,t,o,o[9],e?Jt(t,o[9],s,null):qt(o[9]),null)},i(o){e||(S(n,o),e=!0)},o(o){P(n,o),e=!1},d(o){n&&n.d(o)}}}function P_(l){let e,t,n,o=l[2].t("Documentation")+"",s,i;return e=new M_({props:{className:"size-5"}}),{c(){ee(e.$$.fragment),t=x(),n=z("div"),s=Ce(o),this.h()},l(r){oe(e.$$.fragment,r),t=$(r),n=N(r,"DIV",{class:!0});var a=C(n);s=De(a,o),a.forEach(p),this.h()},h(){m(n,"class","flex items-center")},m(r,a){te(e,r,a),B(r,t,a),B(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&4)&&o!==(o=r[2].t("Documentation")+"")&&Ne(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){r&&(p(t),p(n)),ne(e,r)}}}function O_(l){let e,t,n,o=l[2].t("Keyboard shortcuts")+"",s,i;return e=new z_({props:{className:"size-5"}}),{c(){ee(e.$$.fragment),t=x(),n=z("div"),s=Ce(o),this.h()},l(r){oe(e.$$.fragment,r),t=$(r),n=N(r,"DIV",{class:!0});var a=C(n);s=De(a,o),a.forEach(p),this.h()},h(){m(n,"class","flex items-center")},m(r,a){te(e,r,a),B(r,t,a),B(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&4)&&o!==(o=r[2].t("Keyboard shortcuts")+"")&&Ne(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){r&&(p(t),p(n)),ne(e,r)}}}function H_(l){let e,t,n,o;return e=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[P_]},$$scope:{ctx:l}}}),e.$on("click",l[6]),n=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[O_]},$$scope:{ctx:l}}}),n.$on("click",l[7]),{c(){ee(e.$$.fragment),t=x(),ee(n.$$.fragment)},l(s){oe(e.$$.fragment,s),t=$(s),oe(n.$$.fragment,s)},m(s,i){te(e,s,i),B(s,t,i),te(n,s,i),o=!0},p(s,i){const r={};i&516&&(r.$$scope={dirty:i,ctx:s}),e.$set(r);const a={};i&516&&(a.$$scope={dirty:i,ctx:s}),n.$set(a)},i(s){o||(S(e.$$.fragment,s),S(n.$$.fragment,s),o=!0)},o(s){P(e.$$.fragment,s),P(n.$$.fragment,s),o=!1},d(s){s&&p(t),ne(e,s),ne(n,s)}}}function B_(l){let e,t,n;return t=new po({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:4,side:"top",align:"end",transition:Rl,$$slots:{default:[H_]},$$scope:{ctx:l}}}),{c(){e=z("div"),ee(t.$$.fragment),this.h()},l(o){e=N(o,"DIV",{slot:!0});var s=C(e);oe(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"slot","content")},m(o,s){B(o,e,s),te(t,e,null),n=!0},p(o,s){const i={};s&517&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){o&&p(e),ne(t)}}}function A_(l){let e,t;return e=new _o({props:{$$slots:{content:[B_],default:[N_]},$$scope:{ctx:l}}}),e.$on("change",l[8]),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,[o]){const s={};o&517&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function L_(l,e,t){let n,{$$slots:o={},$$scope:s}=e;const i=Lt("i18n");ce(l,i,d=>t(2,n=d));let{showDocsHandler:r}=e,{showShortcutsHandler:a}=e,{onClose:c=()=>{}}=e;const u=()=>{window.open("https://docs.openwebui.com","_blank")},f=()=>{a()},h=d=>{d.detail===!1&&c()};return l.$$set=d=>{"showDocsHandler"in d&&t(4,r=d.showDocsHandler),"showShortcutsHandler"in d&&t(0,a=d.showShortcutsHandler),"onClose"in d&&t(1,c=d.onClose),"$$scope"in d&&t(9,s=d.$$scope)},[a,c,n,i,r,o,u,f,h,s]}class R_ extends Ae{constructor(e){super(),Le(this,e,L_,A_,We,{showDocsHandler:4,showShortcutsHandler:0,onClose:1})}}function U_(l){let e,t="?";return{c(){e=z("button"),e.textContent=t,this.h()},l(n){e=N(n,"BUTTON",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-oq3opr"&&(e.textContent=t),this.h()},h(){m(e,"class","text-gray-600 dark:text-gray-300 bg-gray-300/20 size-5 flex items-center justify-center text-[0.7rem] rounded-full")},m(n,o){B(n,e,o)},p:we,d(n){n&&p(e)}}}function W_(l){let e,t;return e=new Xt({props:{content:l[1].t("Help"),placement:"left",$$slots:{default:[U_]},$$scope:{ctx:l}}}),{c(){ee(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){te(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.content=n[1].t("Help")),o&128&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function j_(l){let e,t,n,o,s,i,r,a,c,u;o=new R_({props:{showDocsHandler:l[4],showShortcutsHandler:l[5],$$slots:{default:[W_]},$$scope:{ctx:l}}});function f(d){l[6](d)}let h={};return l[0]!==void 0&&(h.show=l[0]),i=new S_({props:h}),je.push(()=>qe(i,"show",f)),{c(){e=z("div"),t=z("button"),n=x(),ee(o.$$.fragment),s=x(),ee(i.$$.fragment),this.h()},l(d){e=N(d,"DIV",{class:!0});var _=C(e);t=N(_,"BUTTON",{id:!0,class:!0}),C(t).forEach(p),n=$(_),oe(o.$$.fragment,_),_.forEach(p),s=$(d),oe(i.$$.fragment,d),this.h()},h(){m(t,"id","show-shortcuts-button"),m(t,"class","hidden"),m(e,"class","hidden lg:flex fixed bottom-0 right-0 px-2 py-2 z-20")},m(d,_){B(d,e,_),E(e,t),E(e,n),te(o,e,null),B(d,s,_),te(i,d,_),a=!0,c||(u=ke(t,"click",l[3]),c=!0)},p(d,[_]){const b={};_&1&&(b.showDocsHandler=d[4]),_&1&&(b.showShortcutsHandler=d[5]),_&130&&(b.$$scope={dirty:_,ctx:d}),o.$set(b);const v={};!r&&_&1&&(r=!0,v.show=d[0],Ge(()=>r=!1)),i.$set(v)},i(d){a||(S(o.$$.fragment,d),S(i.$$.fragment,d),a=!0)},o(d){P(o.$$.fragment,d),P(i.$$.fragment,d),a=!1},d(d){d&&(p(e),p(s)),ne(o),ne(i,d),c=!1,u()}}}function F_(l,e,t){let n;const o=Lt("i18n");ce(l,o,u=>t(1,n=u));let s=!1;const i=()=>{t(0,s=!s)},r=()=>{t(0,s=!s)},a=()=>{t(0,s=!s)};function c(u){s=u,t(0,s)}return[s,n,o,i,r,a,c]}class Kp extends Ae{constructor(e){super(),Le(this,e,F_,j_,We,{})}}export{Xp as C,Kp as H};
//# sourceMappingURL=Help.B2mjg06d.js.map
